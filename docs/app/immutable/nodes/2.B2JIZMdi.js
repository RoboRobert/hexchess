var ft=Object.defineProperty;var ut=(s,t,e)=>t in s?ft(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var N=(s,t,e)=>ut(s,typeof t!="symbol"?t+"":t,e);import{s as ce,a as ct,u as gt,g as pt,b as mt,r as Pe,o as $t,e as st,x as Ye,n as xe,k as je}from"../chunks/scheduler.BeaK0CkN.js";import{S as be,i as Ce,e as X,c as J,a as ne,d as E,o as K,g as G,y as le,k as g,l as m,u as b,v as C,w as q,x as I,z as Ie,t as Be,A as Me,b as We,h as z,j as Ge,p as ae,m as ue,q as Ae,n as ye,s as ie,f as oe,B as Ue,C as ve,D as Te,E as Le,F as Ve}from"../chunks/index.5FCiXH1Q.js";import{w as ze}from"../chunks/index.BIw2-lZ9.js";function Ne(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}class dt{constructor(t,e,n,r){this.q=t,this.r=e,this.size=n,this.color=r}}class he{constructor(t,e){this.x=t,this.y=e}}const x=class x{constructor(t,e,n){N(this,"q");N(this,"r");N(this,"s");if(this.q=t,this.r=e,this.s=-t-e,Math.round(t+e+this.s)!==0)throw"q + r + s must be 0"}inRadius(t){return Math.abs(this.q)+Math.abs(this.r)+Math.abs(this.s)<=2*t}add(t){return new x(this.q+t.q,this.r+t.r,this.s+t.s)}subtract(t){return new x(this.q-t.q,this.r-t.r,this.s-t.s)}scale(t){return new x(this.q*t,this.r*t,this.s*t)}rotateLeft(){return new x(-this.s,-this.q,-this.r)}rotateRight(){return new x(-this.r,-this.s,-this.q)}static direction(t){return x.directions[t]}neighbor(t){return this.add(x.direction(t))}diagonalNeighbor(t){return this.add(x.diagonals[t])}knightNeighbor(t){return this.add(x.knightMoves[t])}len(){return(Math.abs(this.q)+Math.abs(this.r)+Math.abs(this.s))/2}distance(t){return this.subtract(t).len()}round(){var t=Math.round(this.q),e=Math.round(this.r),n=Math.round(this.s),r=Math.abs(t-this.q),i=Math.abs(e-this.r),o=Math.abs(n-this.s);return r>i&&r>o?t=-e-n:i>o?e=-t-n:n=-t-e,new x(t,e,n)}lerp(t,e){return new x(this.q*(1-e)+t.q*e,this.r*(1-e)+t.r*e,this.s*(1-e)+t.s*e)}linedraw(t){for(var e=this.distance(t),n=new x(this.q+1e-6,this.r+1e-6,this.s-2e-6),r=new x(t.q+1e-6,t.r+1e-6,t.s-2e-6),i=[],o=1/Math.max(e,1),l=0;l<=e;l++)i.push(n.lerp(r,o*l).round());return i}};N(x,"directions",[new x(1,0,-1),new x(1,-1,0),new x(0,-1,1),new x(-1,0,1),new x(-1,1,0),new x(0,1,-1)]),N(x,"diagonals",[new x(2,-1,-1),new x(1,-2,1),new x(-1,-1,2),new x(-2,1,1),new x(-1,2,-1),new x(1,1,-2)]),N(x,"knightMoves",[new x(2,1),new x(1,2),new x(-1,3),new x(-2,3),new x(-3,2),new x(-3,1),new x(-2,-1),new x(-1,-2),new x(1,-3),new x(2,-3),new x(3,-2),new x(3,-1)]);let fe=x;class Qe{constructor(t,e,n,r,i,o,l,p,M){this.f0=t,this.f1=e,this.f2=n,this.f3=r,this.b0=i,this.b1=o,this.b2=l,this.b3=p,this.start_angle=M}}class qe{constructor(t,e,n){this.orientation=t,this.size=e,this.origin=n}hexToPixel(t){var e=this.orientation,n=this.size,r=this.origin,i=(e.f0*t.q+e.f1*t.r)*n.x,o=(e.f2*t.q+e.f3*t.r)*n.y;return new he(i+r.x,o+r.y)}pixelToHex(t){var e=this.orientation,n=this.size,r=this.origin,i=new he((t.x-r.x)/n.x,(t.y-r.y)/n.y),o=e.b0*i.x+e.b1*i.y,l=e.b2*i.x+e.b3*i.y;return new fe(o,l,-o-l)}hexCornerOffset(t){var e=this.orientation,n=this.size,r=2*Math.PI*(e.start_angle-t)/6;return new he(n.x*Math.cos(r),n.y*Math.sin(r))}polygonCorners(t){for(var e=[],n=this.hexToPixel(t),r=0;r<6;r++){var i=this.hexCornerOffset(r);e.push(new he(n.x+i.x,n.y+i.y))}return e}}N(qe,"POINTY",new Qe(Math.sqrt(3),Math.sqrt(3)/2,0,3/2,Math.sqrt(3)/3,-1/3,0,2/3,.5)),N(qe,"FLAT",new Qe(3/2,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,0));var ke=(s=>(s[s.WOOD=0]="WOOD",s[s.GRAYSCALE=1]="GRAYSCALE",s))(ke||{});class Fe{constructor(t,e){N(this,"colorArray",[["#d18b47","#e8ab6f","#ffce9e"],["#9a9a9a","#cdcdcd","#ffffff"]]);if(this.currentIndex=t,this.theme=e,t>2||t<0)throw"color picker must be within range [0,2]"}next(){let t=this.colorArray[this.theme][this.currentIndex];return this.currentIndex++,this.currentIndex>2&&(this.currentIndex=0),t}previous(){let t=this.colorArray[this.theme][this.currentIndex];return this.currentIndex--,this.currentIndex<0&&(this.currentIndex=2),t}}class it{constructor(t,e,n){N(this,"currentColor");N(this,"running");N(this,"stalemate");N(this,"checkmate");this.running=t,this.currentColor=e,this.stalemate=n}}var k=(s=>(s[s.WHITE_PAWN=0]="WHITE_PAWN",s[s.BLACK_PAWN=1]="BLACK_PAWN",s[s.WHITE_ROOK=2]="WHITE_ROOK",s[s.BLACK_ROOK=3]="BLACK_ROOK",s[s.WHITE_KNIGHT=4]="WHITE_KNIGHT",s[s.BLACK_KNIGHT=5]="BLACK_KNIGHT",s[s.WHITE_BISHOP=6]="WHITE_BISHOP",s[s.BLACK_BISHOP=7]="BLACK_BISHOP",s[s.WHITE_QUEEN=8]="WHITE_QUEEN",s[s.BLACK_QUEEN=9]="BLACK_QUEEN",s[s.WHITE_KING=10]="WHITE_KING",s[s.BLACK_KING=11]="BLACK_KING",s))(k||{});const Ke=[[0,0,"/svgs/Chess_plt45.svg"],[1,0,"/svgs/Chess_pdt45.svg"],[0,1,"/svgs/Chess_rlt45.svg"],[1,1,"/svgs/Chess_rdt45.svg"],[0,3,"/svgs/Chess_nlt45.svg"],[1,3,"/svgs/Chess_ndt45.svg"],[0,2,"/svgs/Chess_blt45.svg"],[1,2,"/svgs/Chess_bdt45.svg"],[0,4,"/svgs/Chess_qlt45.svg"],[1,4,"/svgs/Chess_qdt45.svg"],[0,5,"/svgs/Chess_klt45.svg"],[1,5,"/svgs/Chess_kdt45.svg"]];class u{constructor(t,e){N(this,"enumNumber");N(this,"pieceType");N(this,"pieceImage");N(this,"hex");N(this,"color");N(this,"enPassantable");N(this,"firstMove");N(this,"boardMeta",Oe);this.enumNumber=e,this.color=Ke[e][0],this.pieceType=Ke[e][1],this.pieceImage=Ke[e][2],this.enPassantable=!1,this.firstMove=!0,this.hex=new fe(t[0],t[1]),_e.subscribe(n=>{this.boardMeta=n})}static equals(t,e){return t.q===e.q&&t.r===e.r}static cloneArray(t){var e=[];return t.forEach(n=>{e.push(new u([n.hex.q,n.hex.r],n.enumNumber))}),e}static colorToEnum(t){return t.toLowerCase()=="white"?0:1}static enumToColor(t){return t==0?"WHITE":"BLACK"}getEnemyColor(){return this.color==0?1:0}movePiece(t){let e=[];we.subscribe(l=>{e=l});let n=this.getLegalMoves(!1,e).find(l=>u.equals(l.to,t));if(n==null)return!1;e=e.map(l=>(l.enPassantable=!1,l)),this.pieceType==0&&this.hex.distance(n.to)>1&&(this.enPassantable=!0),e=e.filter(l=>!u.equals(l.hex,n.attacking)),this.firstMove=!1,this.hex=n.to;const r=this.getPromotion();r&&(this.pieceImage=r.pieceImage,this.pieceType=r.pieceType,this.enumNumber=r.enumNumber),we.set(e);let i=this.getEnemyColor(),o=new it(!0,u.enumToColor(i),!1);return u.getAllLegalMoves(i).length==0&&(o.running=!1,u.inCheck(i)?o.checkmate=[u.enumToColor(this.color),u.enumToColor(i)]:o.stalemate=!0),Re.set(o),!0}getLegalMoves(t,e){let n=[];if(e?n=e:we.subscribe(o=>{n=o}),!t){let o=ot;if(Re.subscribe(l=>o=l),!o.running||this.color!=u.colorToEnum(o.currentColor))return[]}let r=[];return this.getMoves(n).forEach(o=>{let l=u.cloneArray(n);u.testMove(o,l)&&r.push(o)}),r}static testMove(t,e){let n=e.find(i=>u.equals(i.hex,t.from)),r=[];return e.forEach(i=>{u.equals(i.hex,t.attacking)||r.push(i)}),n.hex=t.to,!u.inCheck(n.color,r)}static inCheck(t,e){let n=[];e?n=e:we.subscribe(o=>{n=o});let r=[];n.forEach(o=>{o.color!=t&&(r=r.concat(o.getMoves(n)))});let i=r.map(o=>o.attacking);return!!n.find(o=>o.color==t&&o.pieceType==5&&i.find(l=>u.equals(l,o.hex)))}static getAllLegalMoves(t,e){let n=[];e?n=e:we.subscribe(i=>{n=i});let r=[];return n.forEach(i=>{i.color===t&&(r=r.concat(i.getLegalMoves(!0)))}),r}getMoves(t){let e=[];switch(this.pieceType){case 4:{e=e.concat(this.diagonalMoves(this.boardMeta.radius,t),this.adjacentMoves(t),this.directionalMoves(t));break}case 5:{e=e.concat(this.diagonalMoves(1,t),this.adjacentMoves(t));break}case 2:{e=e.concat(this.diagonalMoves(this.boardMeta.radius,t));break}case 1:{e=e.concat(this.directionalMoves(t));break}case 3:{e=e.concat(this.knightMoves(t));break}case 0:{e=e.concat(this.pawnMoves(t));break}}return e}static pieceOn(t,e){let n=[];return e?n=e:we.subscribe(r=>{n=r}),n.find(r=>u.equals(r.hex,t))}adjacentMoves(t){let e=[];for(let n=0;n<6;n++){let r=this.hex.neighbor(n),i=u.pieceOn(r,t);r.inRadius(this.boardMeta.radius)&&(i===void 0||i.color!==this.color)&&e.push(new F(this.hex,r,r))}return e}diagonalMoves(t,e){let n=[];for(let r=0;r<6;r++){let i=this.hex.diagonalNeighbor(r);for(let o=0;o<t&&i.inRadius(this.boardMeta.radius);o++){let l=u.pieceOn(i,e);if(l){l.color!==this.color&&n.push(new F(this.hex,i,i));break}n.push(new F(this.hex,i,i)),i=i.diagonalNeighbor(r)}}return n}directionalMoves(t){let e=[];for(let n=0;n<6;n++){let r=this.hex.neighbor(n);for(;r.inRadius(this.boardMeta.radius);){let i=u.pieceOn(r,t);if(i){i.color!==this.color&&e.push(new F(this.hex,r,r));break}e.push(new F(this.hex,r,r)),r=r.neighbor(n)}}return e}knightMoves(t){let e=[];for(let n=0;n<12;n++){let r=this.hex.knightNeighbor(n),i=u.pieceOn(r,t);r.inRadius(this.boardMeta.radius)&&(i===void 0||i.color!==this.color)&&e.push(new F(this.hex,r,r))}return e}pawnMoves(t){var o,l,p,M,w,_,h,v;let e=[],n=[],r=[],i=1;switch(this.firstMove==!0&&(i=2),this.color){case 0:{let d=this.hex;for(let A=0;A<i&&(d=d.neighbor(2),!u.pieceOn(d,t));A++)e.push(new F(this.hex,d,d));n.push(new F(this.hex,this.hex.neighbor(1),this.hex.neighbor(1)),new F(this.hex,this.hex.neighbor(3),this.hex.neighbor(3))),((o=u.pieceOn(this.hex.neighbor(0),t))==null?void 0:o.color)!=this.color&&((l=u.pieceOn(this.hex.neighbor(0),t))!=null&&l.enPassantable)&&r.push(new F(this.hex,this.hex.neighbor(1),this.hex.neighbor(0))),((p=u.pieceOn(this.hex.neighbor(4),t))==null?void 0:p.color)!=this.color&&((M=u.pieceOn(this.hex.neighbor(4),t))!=null&&M.enPassantable)&&r.push(new F(this.hex,this.hex.neighbor(3),this.hex.neighbor(4)));break}case 1:{let d=this.hex;for(let A=0;A<i&&(d=d.neighbor(5),!u.pieceOn(d,t));A++)e.push(new F(this.hex,d,d));n.push(new F(this.hex,this.hex.neighbor(0),this.hex.neighbor(0)),new F(this.hex,this.hex.neighbor(4),this.hex.neighbor(4))),((w=u.pieceOn(this.hex.neighbor(1),t))==null?void 0:w.color)!=this.color&&((_=u.pieceOn(this.hex.neighbor(1),t))!=null&&_.enPassantable)&&r.push(new F(this.hex,this.hex.neighbor(0),this.hex.neighbor(1))),((h=u.pieceOn(this.hex.neighbor(3),t))==null?void 0:h.color)!=this.color&&((v=u.pieceOn(this.hex.neighbor(3),t))!=null&&v.enPassantable)&&r.push(new F(this.hex,this.hex.neighbor(4),this.hex.neighbor(3)));break}}return e.filter(d=>d.to.inRadius(this.boardMeta.radius)&&u.pieceOn(d.to,t)===void 0).concat(n.filter(d=>{var A;return d.to.inRadius(this.boardMeta.radius)&&u.pieceOn(d.to,t)!=null&&((A=u.pieceOn(d.to,t))==null?void 0:A.color)!=this.color})).concat(r)}getPromotion(){if(this.pieceType==0){if(this.color==0&&(this.hex.q+this.hex.r==-5||this.hex.r==-5))return new u([this.hex.q,this.hex.r],8);if(this.color==1&&(this.hex.q+this.hex.r==5||this.hex.r==5))return new u([this.hex.q,this.hex.r],9)}}}class F{constructor(t,e,n){N(this,"from");N(this,"to");N(this,"attacking");this.from=t,this.to=e,this.attacking=n}}class wt{constructor(t,e,n,r){N(this,"layout");N(this,"theme");N(this,"radius");N(this,"hexSize");this.layout=t,this.theme=e,this.radius=n,this.hexSize=r}}const Se=new qe(qe.FLAT,new he(50,50),new he(0,0)),vt=new qe(qe.POINTY,new he(50,50),new he(0,0)),Oe=new wt(Se,ke.GRAYSCALE,5,50),_e=ze(Oe),ot=new it(!0,"WHITE",!1),Re=ze(ot);let xt=[new u([0,-5],k.BLACK_BISHOP),new u([0,-4],k.BLACK_BISHOP),new u([0,-3],k.BLACK_BISHOP),new u([0,5],k.WHITE_BISHOP),new u([0,4],k.WHITE_BISHOP),new u([0,3],k.WHITE_BISHOP),new u([-4,-1],k.BLACK_PAWN),new u([-3,-1],k.BLACK_PAWN),new u([-2,-1],k.BLACK_PAWN),new u([-1,-1],k.BLACK_PAWN),new u([0,-1],k.BLACK_PAWN),new u([1,-2],k.BLACK_PAWN),new u([2,-3],k.BLACK_PAWN),new u([3,-4],k.BLACK_PAWN),new u([4,-5],k.BLACK_PAWN),new u([-4,5],k.WHITE_PAWN),new u([-3,4],k.WHITE_PAWN),new u([-2,3],k.WHITE_PAWN),new u([-1,2],k.WHITE_PAWN),new u([0,1],k.WHITE_PAWN),new u([1,1],k.WHITE_PAWN),new u([2,1],k.WHITE_PAWN),new u([3,1],k.WHITE_PAWN),new u([4,1],k.WHITE_PAWN),new u([-3,-2],k.BLACK_ROOK),new u([3,-5],k.BLACK_ROOK),new u([-3,5],k.WHITE_ROOK),new u([3,2],k.WHITE_ROOK),new u([-2,-3],k.BLACK_KNIGHT),new u([2,-5],k.BLACK_KNIGHT),new u([-2,5],k.WHITE_KNIGHT),new u([2,3],k.WHITE_KNIGHT),new u([-1,-4],k.BLACK_QUEEN),new u([-1,5],k.WHITE_QUEEN),new u([1,-5],k.BLACK_KING),new u([1,4],k.WHITE_KING)];const we=ze(xt);function _t(s){let t,e,n,r;const i=s[6].default,o=ct(i,s,s[5],null);return{c(){t=X("div"),o&&o.c(),this.h()},l(l){t=J(l,"DIV",{class:!0});var p=ne(t);o&&o.l(p),p.forEach(E),this.h()},h(){K(t,"class","draggable svelte-13lde0")},m(l,p){G(l,t,p),o&&o.m(t,null),s[7](t),e=!0,n||(r=[le(window,"pointermove",s[3]),le(window,"pointerup",s[1]),le(t,"pointerdown",s[2])],n=!0)},p(l,[p]){o&&o.p&&(!e||p&32)&&gt(o,i,l,l[5],e?mt(i,l[5],p,null):pt(l[5]),null)},i(l){e||(g(o,l),e=!0)},o(l){m(o,l),e=!1},d(l){l&&E(t),o&&o.d(l),s[7](null),n=!1,Pe(r)}}}function bt(s){if(s.classList.contains("possible"))return"possible";if(s.classList.contains("attack"))return"attack"}function Ct(s,t,e){let{$$slots:n={},$$scope:r}=t,{currentPiece:i}=t;_e.subscribe(y=>{});let o,l,p=0,M=0,w=0,_=0,h,v=[],d=[],A=[],B,W,j=!1;$t(()=>{Z()});function Z(){var S,Y;w=h.getBoundingClientRect().width,_=h.getBoundingClientRect().height;let y=document.getElementById(`${i.hex.q},${i.hex.r}`).getBoundingClientRect();p=(S=h.parentElement)==null?void 0:S.getBoundingClientRect().left,M=(Y=h.parentElement)==null?void 0:Y.getBoundingClientRect().top,h.setAttribute("style",`left:${y.left+y.width/2-w/2-p}px; top:${y.top+y.height/2-_/2-M}px;`)}function D(y){if(e(0,h.style.cursor="",h),e(0,h.style.zIndex="",h),d.forEach(S=>S.classList.remove("possible")),A.forEach(S=>S.classList.remove("attack")),!!j){if(j=!1,W!=null){W.classList.remove("selection");let S=parseInt(W.getAttribute("data-q")),Y=parseInt(W.getAttribute("data-r"));i.movePiece(new fe(S,Y)),Z(),W=void 0;return}{e(0,h.style.left=o,h),e(0,h.style.top=l,h);return}}}function U(y){var L,c;j=!0,o=h.style.left,l=h.style.top,p=(L=h.parentElement)==null?void 0:L.getBoundingClientRect().left,M=(c=h.parentElement)==null?void 0:c.getBoundingClientRect().top;let S=i.getLegalMoves(!1);S.filter($=>u.pieceOn($.attacking)).forEach($=>A.push(document.getElementById(`${$.to.q},${$.to.r}`))),S.filter($=>!u.pieceOn($.attacking)).forEach($=>d.push(document.getElementById(`${$.to.q},${$.to.r}`))),d.forEach($=>$.classList.add("possible")),A.forEach($=>$.classList.add("attack")),V(y),e(0,h.style.cursor="grabbing",h),e(0,h.style.zIndex="100",h)}function ee(y){j&&V(y)}function V(y){let S=y.clientX-w/2-p,Y=y.clientY-_/2-M;e(0,h.style.left=`${S}px`,h),e(0,h.style.top=`${Y}px`,h),v=document.elementsFromPoint(y.clientX,y.clientY),W!=null&&(W.classList.remove("selection"),B&&W.classList.add(B),W=void 0),W=v.find(T=>T.classList.contains("droppable")),W!=null&&(B=bt(W),B&&W.classList.remove(B),W.classList.add("selection"))}function Q(y){st[y?"unshift":"push"](()=>{h=y,e(0,h)})}return s.$$set=y=>{"currentPiece"in y&&e(4,i=y.currentPiece),"$$scope"in y&&e(5,r=y.$$scope)},[h,D,U,ee,i,r,n,Q]}class qt extends be{constructor(t){super(),Ce(this,t,Ct,_t,ce,{currentPiece:4})}}function It(s){let t,e;return{c(){t=X("img"),this.h()},l(n){t=J(n,"IMG",{class:!0,draggable:!0,src:!0}),this.h()},h(){K(t,"class","piece svelte-mwpcpw"),K(t,"draggable","false"),Ye(t.src,e=s[0].pieceImage)||K(t,"src",e)},m(n,r){G(n,t,r)},p(n,r){r&1&&!Ye(t.src,e=n[0].pieceImage)&&K(t,"src",e)},d(n){n&&E(t)}}}function Mt(s){let t,e;return t=new qt({props:{currentPiece:s[0],$$slots:{default:[It]},$$scope:{ctx:s}}}),{c(){b(t.$$.fragment)},l(n){C(t.$$.fragment,n)},m(n,r){q(t,n,r),e=!0},p(n,[r]){const i={};r&1&&(i.currentPiece=n[0]),r&3&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i(n){e||(g(t.$$.fragment,n),e=!0)},o(n){m(t.$$.fragment,n),e=!1},d(n){I(t,n)}}}function At(s,t,e){let{piece:n}=t;return s.$$set=r=>{"piece"in r&&e(0,n=r.piece)},[n]}class yt extends be{constructor(t){super(),Ce(this,t,At,Mt,ce,{piece:0})}}function kt(s){let t,e,n;return{c(){t=Ie("g"),e=Ie("text"),n=Be(s[0]),this.h()},l(r){t=Me(r,"g",{transform:!0});var i=ne(t);e=Me(i,"text",{x:!0,y:!0,class:!0});var o=ne(e);n=We(o,s[0]),o.forEach(E),i.forEach(E),this.h()},h(){K(e,"x",-15*s[2]-12),K(e,"y",-15*s[3]),K(e,"class","coordinate"),K(t,"transform","translate("+s[1].x+", "+s[1].y+")")},m(r,i){G(r,t,i),z(t,e),z(e,n)},p(r,[i]){i&1&&Ge(n,r[0])},i:xe,o:xe,d(r){r&&E(t)}}}function Ot(s,t,e){let{q:n}=t,{r}=t,{text:i}=t,o=Oe;_e.subscribe(h=>{o=h});const l=new fe(n,r),p=o.layout.hexToPixel(l),M=Math.sqrt(p.x*p.x+p.y*p.y),w=p.x/M,_=p.y/M;return o.layout.size.x,s.$$set=h=>{"q"in h&&e(4,n=h.q),"r"in h&&e(5,r=h.r),"text"in h&&e(0,i=h.text)},[i,p,w,_,n,r]}class O extends be{constructor(t){super(),Ce(this,t,Ot,kt,ce,{q:4,r:5,text:0})}}function Et(s){let t,e,n,r,i;return{c(){t=Ie("g"),e=Ie("polygon"),this.h()},l(o){t=Me(o,"g",{transform:!0});var l=ne(t);e=Me(l,"polygon",{id:!0,"data-q":!0,"data-r":!0,class:!0,points:!0,style:!0}),ne(e).forEach(E),l.forEach(E),this.h()},h(){K(e,"id",n=s[0]+","+s[1]),K(e,"data-q",r=s[0]+","),K(e,"data-r",i=s[1]+","),K(e,"class","hexagon droppable"),K(e,"points",s[4]),ae(e,"fill",s[2]),ae(e,"stroke","black"),ae(e,"stroke-width","2px"),K(t,"transform","translate("+s[3].x+", "+s[3].y+")")},m(o,l){G(o,t,l),z(t,e)},p(o,[l]){l&3&&n!==(n=o[0]+","+o[1])&&K(e,"id",n),l&1&&r!==(r=o[0]+",")&&K(e,"data-q",r),l&2&&i!==(i=o[1]+",")&&K(e,"data-r",i),l&4&&ae(e,"fill",o[2])},i:xe,o:xe,d(o){o&&E(t)}}}function Tt(s){var t="";return s.forEach(e=>{t=t.concat(`${e.x},${e.y} `)}),t}function Lt(s,t,e){let{q:n}=t,{r}=t,{color:i}=t,o=Oe;_e.subscribe(h=>{o=h});const l=new fe(0,0),p=o.layout.polygonCorners(l),M=new fe(n,r),w=o.layout.hexToPixel(M);o.layout.size.x;const _=Tt(p);return s.$$set=h=>{"q"in h&&e(0,n=h.q),"r"in h&&e(1,r=h.r),"color"in h&&e(2,i=h.color)},[n,r,i,w,_]}class Nt extends be{constructor(t){super(),Ce(this,t,Lt,Et,ce,{q:0,r:1,color:2})}}function Xe(s,t,e){const n=s.slice();return n[9]=t[e],n}function Je(s,t,e){const n=s.slice();return n[12]=t[e].q,n[13]=t[e].r,n[14]=t[e].color,n}function Ze(s){let t,e;return t=new Nt({props:{q:s[12],r:s[13],color:s[14]}}),{c(){b(t.$$.fragment)},l(n){C(t.$$.fragment,n)},m(n,r){q(t,n,r),e=!0},p(n,r){const i={};r&2&&(i.q=n[12]),r&2&&(i.r=n[13]),r&2&&(i.color=n[14]),t.$set(i)},i(n){e||(g(t.$$.fragment,n),e=!0)},o(n){m(t.$$.fragment,n),e=!1},d(n){I(t,n)}}}function De(s){let t,e;return t=new yt({props:{piece:s[9]}}),{c(){b(t.$$.fragment)},l(n){C(t.$$.fragment,n)},m(n,r){q(t,n,r),e=!0},p(n,r){const i={};r&4&&(i.piece=n[9]),t.$set(i)},i(n){e||(g(t.$$.fragment,n),e=!0)},o(n){m(t.$$.fragment,n),e=!1},d(n){I(t,n)}}}function et(s){let t,e,n,r,i,o,l,p,M,w,_,h,v,d,A,B,W,j,Z,D,U,ee,V,Q,y,S,Y,T,L,c,$,re,se,ge,pe,me,He,Ee,$e=Ne(s[1]),R=[];for(let a=0;a<$e.length;a+=1)R[a]=Ze(Je(s,$e,a));const lt=a=>m(R[a],1,1,()=>{R[a]=null});r=new O({props:{q:-5,r:6,text:"a"}}),i=new O({props:{q:-4,r:6,text:"b"}}),o=new O({props:{q:-3,r:6,text:"c"}}),l=new O({props:{q:-2,r:6,text:"d"}}),p=new O({props:{q:-1,r:6,text:"e"}}),M=new O({props:{q:0,r:6,text:"f"}}),w=new O({props:{q:1,r:5,text:"g"}}),_=new O({props:{q:2,r:4,text:"h"}}),h=new O({props:{q:3,r:3,text:"i"}}),v=new O({props:{q:4,r:2,text:"k"}}),d=new O({props:{q:5,r:1,text:"l"}}),A=new O({props:{q:-6,r:5,text:"1"}}),B=new O({props:{q:-6,r:4,text:"2"}}),W=new O({props:{q:-6,r:3,text:"3"}}),j=new O({props:{q:-6,r:2,text:"4"}}),Z=new O({props:{q:-6,r:1,text:"5"}}),D=new O({props:{q:-6,r:0,text:"6"}}),U=new O({props:{q:-5,r:-1,text:"7"}}),ee=new O({props:{q:-4,r:-2,text:"8"}}),V=new O({props:{q:-3,r:-3,text:"9"}}),Q=new O({props:{q:-2,r:-4,text:"10"}}),y=new O({props:{q:-1,r:-5,text:"11"}}),S=new O({props:{q:6,r:-1,text:"1"}}),Y=new O({props:{q:6,r:-2,text:"2"}}),T=new O({props:{q:6,r:-3,text:"3"}}),L=new O({props:{q:6,r:-4,text:"4"}}),c=new O({props:{q:6,r:-5,text:"5"}}),$=new O({props:{q:6,r:-6,text:"6"}}),re=new O({props:{q:5,r:-6,text:"7"}}),se=new O({props:{q:4,r:-6,text:"8"}}),ge=new O({props:{q:3,r:-6,text:"9"}}),pe=new O({props:{q:2,r:-6,text:"10"}}),me=new O({props:{q:1,r:-6,text:"11"}});let de=Ne(s[2]),P=[];for(let a=0;a<de.length;a+=1)P[a]=De(Xe(s,de,a));const ht=a=>m(P[a],1,1,()=>{P[a]=null});return{c(){t=X("div"),e=Ie("svg");for(let a=0;a<R.length;a+=1)R[a].c();n=ue(),b(r.$$.fragment),b(i.$$.fragment),b(o.$$.fragment),b(l.$$.fragment),b(p.$$.fragment),b(M.$$.fragment),b(w.$$.fragment),b(_.$$.fragment),b(h.$$.fragment),b(v.$$.fragment),b(d.$$.fragment),b(A.$$.fragment),b(B.$$.fragment),b(W.$$.fragment),b(j.$$.fragment),b(Z.$$.fragment),b(D.$$.fragment),b(U.$$.fragment),b(ee.$$.fragment),b(V.$$.fragment),b(Q.$$.fragment),b(y.$$.fragment),b(S.$$.fragment),b(Y.$$.fragment),b(T.$$.fragment),b(L.$$.fragment),b(c.$$.fragment),b($.$$.fragment),b(re.$$.fragment),b(se.$$.fragment),b(ge.$$.fragment),b(pe.$$.fragment),b(me.$$.fragment),He=ie();for(let a=0;a<P.length;a+=1)P[a].c();this.h()},l(a){t=J(a,"DIV",{class:!0});var H=ne(t);e=Me(H,"svg",{overflow:!0,viewBox:!0,width:!0,height:!0});var f=ne(e);for(let te=0;te<R.length;te+=1)R[te].l(f);n=ue(),C(r.$$.fragment,f),C(i.$$.fragment,f),C(o.$$.fragment,f),C(l.$$.fragment,f),C(p.$$.fragment,f),C(M.$$.fragment,f),C(w.$$.fragment,f),C(_.$$.fragment,f),C(h.$$.fragment,f),C(v.$$.fragment,f),C(d.$$.fragment,f),C(A.$$.fragment,f),C(B.$$.fragment,f),C(W.$$.fragment,f),C(j.$$.fragment,f),C(Z.$$.fragment,f),C(D.$$.fragment,f),C(U.$$.fragment,f),C(ee.$$.fragment,f),C(V.$$.fragment,f),C(Q.$$.fragment,f),C(y.$$.fragment,f),C(S.$$.fragment,f),C(Y.$$.fragment,f),C(T.$$.fragment,f),C(L.$$.fragment,f),C(c.$$.fragment,f),C($.$$.fragment,f),C(re.$$.fragment,f),C(se.$$.fragment,f),C(ge.$$.fragment,f),C(pe.$$.fragment,f),C(me.$$.fragment,f),f.forEach(E),He=oe(H);for(let te=0;te<P.length;te+=1)P[te].l(H);H.forEach(E),this.h()},h(){K(e,"overflow","visible"),K(e,"viewBox",s[5]),K(e,"width",s[4].x),K(e,"height",s[4].y),K(t,"class","board svelte-14rtn39")},m(a,H){G(a,t,H),z(t,e);for(let f=0;f<R.length;f+=1)R[f]&&R[f].m(e,null);z(e,n),q(r,e,null),q(i,e,null),q(o,e,null),q(l,e,null),q(p,e,null),q(M,e,null),q(w,e,null),q(_,e,null),q(h,e,null),q(v,e,null),q(d,e,null),q(A,e,null),q(B,e,null),q(W,e,null),q(j,e,null),q(Z,e,null),q(D,e,null),q(U,e,null),q(ee,e,null),q(V,e,null),q(Q,e,null),q(y,e,null),q(S,e,null),q(Y,e,null),q(T,e,null),q(L,e,null),q(c,e,null),q($,e,null),q(re,e,null),q(se,e,null),q(ge,e,null),q(pe,e,null),q(me,e,null),z(t,He);for(let f=0;f<P.length;f+=1)P[f]&&P[f].m(t,null);s[6](t),Ee=!0},p(a,H){if(H&2){$e=Ne(a[1]);let f;for(f=0;f<$e.length;f+=1){const te=Je(a,$e,f);R[f]?(R[f].p(te,H),g(R[f],1)):(R[f]=Ze(te),R[f].c(),g(R[f],1),R[f].m(e,n))}for(Ae(),f=$e.length;f<R.length;f+=1)lt(f);ye()}if(H&4){de=Ne(a[2]);let f;for(f=0;f<de.length;f+=1){const te=Xe(a,de,f);P[f]?(P[f].p(te,H),g(P[f],1)):(P[f]=De(te),P[f].c(),g(P[f],1),P[f].m(t,null))}for(Ae(),f=de.length;f<P.length;f+=1)ht(f);ye()}},i(a){if(!Ee){for(let H=0;H<$e.length;H+=1)g(R[H]);g(r.$$.fragment,a),g(i.$$.fragment,a),g(o.$$.fragment,a),g(l.$$.fragment,a),g(p.$$.fragment,a),g(M.$$.fragment,a),g(w.$$.fragment,a),g(_.$$.fragment,a),g(h.$$.fragment,a),g(v.$$.fragment,a),g(d.$$.fragment,a),g(A.$$.fragment,a),g(B.$$.fragment,a),g(W.$$.fragment,a),g(j.$$.fragment,a),g(Z.$$.fragment,a),g(D.$$.fragment,a),g(U.$$.fragment,a),g(ee.$$.fragment,a),g(V.$$.fragment,a),g(Q.$$.fragment,a),g(y.$$.fragment,a),g(S.$$.fragment,a),g(Y.$$.fragment,a),g(T.$$.fragment,a),g(L.$$.fragment,a),g(c.$$.fragment,a),g($.$$.fragment,a),g(re.$$.fragment,a),g(se.$$.fragment,a),g(ge.$$.fragment,a),g(pe.$$.fragment,a),g(me.$$.fragment,a);for(let H=0;H<de.length;H+=1)g(P[H]);Ee=!0}},o(a){R=R.filter(Boolean);for(let H=0;H<R.length;H+=1)m(R[H]);m(r.$$.fragment,a),m(i.$$.fragment,a),m(o.$$.fragment,a),m(l.$$.fragment,a),m(p.$$.fragment,a),m(M.$$.fragment,a),m(w.$$.fragment,a),m(_.$$.fragment,a),m(h.$$.fragment,a),m(v.$$.fragment,a),m(d.$$.fragment,a),m(A.$$.fragment,a),m(B.$$.fragment,a),m(W.$$.fragment,a),m(j.$$.fragment,a),m(Z.$$.fragment,a),m(D.$$.fragment,a),m(U.$$.fragment,a),m(ee.$$.fragment,a),m(V.$$.fragment,a),m(Q.$$.fragment,a),m(y.$$.fragment,a),m(S.$$.fragment,a),m(Y.$$.fragment,a),m(T.$$.fragment,a),m(L.$$.fragment,a),m(c.$$.fragment,a),m($.$$.fragment,a),m(re.$$.fragment,a),m(se.$$.fragment,a),m(ge.$$.fragment,a),m(pe.$$.fragment,a),m(me.$$.fragment,a),P=P.filter(Boolean);for(let H=0;H<P.length;H+=1)m(P[H]);Ee=!1},d(a){a&&E(t),Ue(R,a),I(r),I(i),I(o),I(l),I(p),I(M),I(w),I(_),I(h),I(v),I(d),I(A),I(B),I(W),I(j),I(Z),I(D),I(U),I(ee),I(V),I(Q),I(y),I(S),I(Y),I(T),I(L),I(c),I($),I(re),I(se),I(ge),I(pe),I(me),Ue(P,a),s[6](null)}}}function Bt(s){let t=[s[0].theme,s[2]],e,n,r=et(s);return{c(){r.c(),e=ue()},l(i){r.l(i),e=ue()},m(i,o){r.m(i,o),G(i,e,o),n=!0},p(i,[o]){o&5&&ce(t,t=[i[0].theme,i[2]])?(Ae(),m(r,1,1,xe),ye(),r=et(i),r.c(),g(r,1),r.m(e.parentNode,e)):r.p(i,o)},i(i){n||(g(r),n=!0)},o(i){m(r),n=!1},d(i){i&&E(e),r.d(i)}}}function Wt(s,t,e){let n=Oe;_e.subscribe(h=>{e(0,n=h),l()});const r=n.radius*2+1;var i=[],o=[];we.subscribe(h=>{e(2,o=h)});function l(){e(1,i=[]);let h=new Fe(0,n.theme);for(let v=n.radius;v>=n.radius*-1;v--){let d=new Fe(h.currentIndex,h.theme);for(let A=n.radius;A>=n.radius*-1;A--)new fe(v,A).inRadius(n.radius)&&i.push(new dt(v,A,n.hexSize,d.next()));v>0?h.next():h.previous()}}l();const p=new he(n.hexSize*(3/2)*r,n.hexSize*Math.sqrt(3)*r),M=`${p.x/-2} ${p.y/-2} ${p.x} ${p.y}`;let w;function _(h){st[h?"unshift":"push"](()=>{w=h,e(3,w)})}return[n,i,o,w,p,M,_]}class Ht extends be{constructor(t){super(),Ce(this,t,Wt,Bt,ce,{})}}function tt(s){let t,e,n,r="×",i,o,l="GAME OVER!",p,M,w,_,h;return{c(){t=X("div"),e=X("div"),n=X("span"),n.textContent=r,i=ie(),o=X("p"),o.textContent=l,p=ie(),M=X("p"),w=Be(s[0]),this.h()},l(v){t=J(v,"DIV",{class:!0});var d=ne(t);e=J(d,"DIV",{class:!0});var A=ne(e);n=J(A,"SPAN",{class:!0,"data-svelte-h":!0}),ve(n)!=="svelte-ty2x6x"&&(n.textContent=r),i=oe(A),o=J(A,"P",{"data-svelte-h":!0}),ve(o)!=="svelte-av41o5"&&(o.textContent=l),p=oe(A),M=J(A,"P",{});var B=ne(M);w=We(B,s[0]),B.forEach(E),A.forEach(E),d.forEach(E),this.h()},h(){K(n,"class","close-button svelte-p4vkuh"),K(e,"class","popup-content svelte-p4vkuh"),K(t,"class","popup svelte-p4vkuh")},m(v,d){G(v,t,d),z(t,e),z(e,n),z(e,i),z(e,o),z(e,p),z(e,M),z(M,w),_||(h=[le(n,"click",s[2]),le(t,"click",s[3])],_=!0)},p(v,d){d&1&&Ge(w,v[0])},d(v){v&&E(t),_=!1,Pe(h)}}}function Kt(s){let t,e=s[1]&&tt(s);return{c(){e&&e.c(),t=ue()},l(n){e&&e.l(n),t=ue()},m(n,r){e&&e.m(n,r),G(n,t,r)},p(n,[r]){n[1]?e?e.p(n,r):(e=tt(n),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:xe,o:xe,d(n){n&&E(t),e&&e.d(n)}}}function St(s,t,e){let{text:n=""}=t,r=!0;function i(){e(1,r=!1)}function o(l){l.target===l.currentTarget&&i()}return s.$$set=l=>{"text"in l&&e(0,n=l.text)},[n,r,i,o]}class at extends be{constructor(t){super(),Ce(this,t,St,Kt,ce,{text:0})}}function nt(s){let t,e;return t=new at({props:{text:s[0].checkmate[0]+" checkmated "+s[0].checkmate[1]}}),{c(){b(t.$$.fragment)},l(n){C(t.$$.fragment,n)},m(n,r){q(t,n,r),e=!0},p(n,r){const i={};r&1&&(i.text=n[0].checkmate[0]+" checkmated "+n[0].checkmate[1]),t.$set(i)},i(n){e||(g(t.$$.fragment,n),e=!0)},o(n){m(t.$$.fragment,n),e=!1},d(n){I(t,n)}}}function rt(s){let t,e;return t=new at({props:{text:"Stalemate!"}}),{c(){b(t.$$.fragment)},l(n){C(t.$$.fragment,n)},m(n,r){q(t,n,r),e=!0},i(n){e||(g(t.$$.fragment,n),e=!0)},o(n){m(t.$$.fragment,n),e=!1},d(n){I(t,n)}}}function Rt(s){let t,e="Hexagonal Chess",n,r,i,o="Grayscale",l,p="Wood",M,w,_,h="Flat",v,d="Pointy",A,B,W=s[0].currentColor+"",j,Z,D,U,ee,V,Q,y,S,Y;U=new Ht({});let T=s[0].checkmate&&nt(s),L=s[0].stalemate&&rt();return{c(){t=X("h1"),t.textContent=e,n=ie(),r=X("select"),i=X("option"),i.textContent=o,l=X("option"),l.textContent=p,M=ie(),w=X("select"),_=X("option"),_.textContent=h,v=X("option"),v.textContent=d,A=ie(),B=X("h2"),j=Be(W),Z=Be(" TO MOVE"),D=ie(),b(U.$$.fragment),ee=ie(),T&&T.c(),V=ie(),L&&L.c(),Q=ue(),this.h()},l(c){t=J(c,"H1",{class:!0,"data-svelte-h":!0}),ve(t)!=="svelte-1bl0xm5"&&(t.textContent=e),n=oe(c),r=J(c,"SELECT",{style:!0});var $=ne(r);i=J($,"OPTION",{"data-svelte-h":!0}),ve(i)!=="svelte-c4ukt8"&&(i.textContent=o),l=J($,"OPTION",{"data-svelte-h":!0}),ve(l)!=="svelte-1loqtfl"&&(l.textContent=p),$.forEach(E),M=oe(c),w=J(c,"SELECT",{style:!0});var re=ne(w);_=J(re,"OPTION",{"data-svelte-h":!0}),ve(_)!=="svelte-itmjg8"&&(_.textContent=h),v=J(re,"OPTION",{"data-svelte-h":!0}),ve(v)!=="svelte-wt3xu4"&&(v.textContent=d),re.forEach(E),A=oe(c),B=J(c,"H2",{style:!0});var se=ne(B);j=We(se,W),Z=We(se," TO MOVE"),se.forEach(E),D=oe(c),C(U.$$.fragment,c),ee=oe(c),T&&T.l(c),V=oe(c),L&&L.l(c),Q=ue(),this.h()},h(){K(t,"class","header"),i.__value=ke.GRAYSCALE,Te(i,i.__value),i.selected=!0,l.__value=ke.WOOD,Te(l,l.__value),ae(r,"margin","10px"),ae(r,"margin-bottom","20px"),s[2]===void 0&&je(()=>s[4].call(r)),_.__value=0,Te(_,_.__value),_.selected=!0,v.__value=1,Te(v,v.__value),ae(w,"margin","10px"),ae(w,"margin-bottom","20px"),s[1]===void 0&&je(()=>s[6].call(w)),ae(B,"margin-bottom","20px")},m(c,$){G(c,t,$),G(c,n,$),G(c,r,$),z(r,i),z(r,l),Le(r,s[2],!0),G(c,M,$),G(c,w,$),z(w,_),z(w,v),Le(w,s[1],!0),G(c,A,$),G(c,B,$),z(B,j),z(B,Z),G(c,D,$),q(U,c,$),G(c,ee,$),T&&T.m(c,$),G(c,V,$),L&&L.m(c,$),G(c,Q,$),y=!0,S||(Y=[le(r,"change",s[4]),le(r,"change",s[5]),le(w,"change",s[6]),le(w,"change",s[7])],S=!0)},p(c,[$]){$&4&&Le(r,c[2]),$&2&&Le(w,c[1]),(!y||$&1)&&W!==(W=c[0].currentColor+"")&&Ge(j,W),c[0].checkmate?T?(T.p(c,$),$&1&&g(T,1)):(T=nt(c),T.c(),g(T,1),T.m(V.parentNode,V)):T&&(Ae(),m(T,1,1,()=>{T=null}),ye()),c[0].stalemate?L?$&1&&g(L,1):(L=rt(),L.c(),g(L,1),L.m(Q.parentNode,Q)):L&&(Ae(),m(L,1,1,()=>{L=null}),ye())},i(c){y||(g(U.$$.fragment,c),g(T),g(L),y=!0)},o(c){m(U.$$.fragment,c),m(T),m(L),y=!1},d(c){c&&(E(t),E(n),E(r),E(M),E(w),E(A),E(B),E(D),E(ee),E(V),E(Q)),I(U,c),T&&T.d(c),L&&L.d(c),S=!1,Pe(Y)}}}function Pt(s,t,e){let n,r,i;Re.subscribe(_=>e(0,i=_));function o(_){let h=Se;switch(_){case 0:{h=Se;break}case 1:{h=vt;break}}_e.update(v=>{let d=v;return d.layout=h,d})}function l(){n=Ve(this),e(2,n)}const p=_=>_e.update(h=>{let v=h;return v.theme=n,v});function M(){r=Ve(this),e(1,r)}const w=_=>{o(r)};return e(2,n=ke.GRAYSCALE),e(1,r=0),[i,r,n,o,l,p,M,w]}class Ut extends be{constructor(t){super(),Ce(this,t,Pt,Rt,ce,{})}}export{Ut as component};
