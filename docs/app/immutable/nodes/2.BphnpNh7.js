var Et=Object.defineProperty;var Ot=(s,e,t)=>e in s?Et(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var B=(s,e,t)=>Ot(s,typeof e!="symbol"?e+"":e,t);import{s as me,a as yt,u as Lt,g as St,b as Bt,r as Qe,o as Nt,e as Ht,c as Ge,x as Ze,n as le,k as De}from"../chunks/scheduler.BeaK0CkN.js";import{S as xe,i as qe,e as ne,c as re,a as ee,d as L,o as S,g as G,y as ue,k as _,l as v,u as I,v as M,w as T,x as E,p as z,z as pe,m as Z,A as $e,h as j,t as vt,b as bt,j as xt,q as we,n as ve,s as Ce,f as Ae,B as Be,C as ke,D as He,E as Re,F as et}from"../chunks/index.5FCiXH1Q.js";import{w as ze}from"../chunks/index.BIw2-lZ9.js";function ce(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}class be{constructor(e,t){this.x=e,this.y=t}}const y=class y{constructor(e,t,n){B(this,"q");B(this,"r");B(this,"s");if(this.q=e,this.r=t,this.s=-e-t,Math.round(e+t+this.s)!==0)throw"q + r + s must be 0"}inRadius(e){return Math.abs(this.q)+Math.abs(this.r)+Math.abs(this.s)<=2*e}add(e){return new y(this.q+e.q,this.r+e.r,this.s+e.s)}subtract(e){return new y(this.q-e.q,this.r-e.r,this.s-e.s)}scale(e){return new y(this.q*e,this.r*e,this.s*e)}rotateLeft(){return new y(-this.s,-this.q,-this.r)}rotateRight(){return new y(-this.r,-this.s,-this.q)}static direction(e){return y.directions[e]}neighbor(e){return this.add(y.direction(e))}diagonalNeighbor(e){return this.add(y.diagonals[e])}knightNeighbor(e){return this.add(y.knightMoves[e])}len(){return(Math.abs(this.q)+Math.abs(this.r)+Math.abs(this.s))/2}distance(e){return this.subtract(e).len()}round(){var e=Math.round(this.q),t=Math.round(this.r),n=Math.round(this.s),r=Math.abs(e-this.q),i=Math.abs(t-this.r),o=Math.abs(n-this.s);return r>i&&r>o?e=-t-n:i>o?t=-e-n:n=-e-t,new y(e,t,n)}lerp(e,t){return new y(this.q*(1-t)+e.q*t,this.r*(1-t)+e.r*t,this.s*(1-t)+e.s*t)}linedraw(e){for(var t=this.distance(e),n=new y(this.q+1e-6,this.r+1e-6,this.s-2e-6),r=new y(e.q+1e-6,e.r+1e-6,e.s-2e-6),i=[],o=1/Math.max(t,1),l=0;l<=t;l++)i.push(n.lerp(r,o*l).round());return i}};B(y,"directions",[new y(1,0,-1),new y(1,-1,0),new y(0,-1,1),new y(-1,0,1),new y(-1,1,0),new y(0,1,-1)]),B(y,"diagonals",[new y(2,-1,-1),new y(1,-2,1),new y(-1,-1,2),new y(-2,1,1),new y(-1,2,-1),new y(1,1,-2)]),B(y,"knightMoves",[new y(2,1),new y(1,2),new y(-1,3),new y(-2,3),new y(-3,2),new y(-3,1),new y(-2,-1),new y(-1,-2),new y(1,-3),new y(2,-3),new y(3,-2),new y(3,-1)]);let ae=y;class Ye{constructor(e,t,n,r,i,o,l,m,q){this.f0=e,this.f1=t,this.f2=n,this.f3=r,this.b0=i,this.b1=o,this.b2=l,this.b3=m,this.start_angle=q}}class Le{constructor(e,t,n){this.orientation=e,this.size=t,this.origin=n}hexToPixel(e){var t=this.orientation,n=this.size,r=this.origin,i=(t.f0*e.q+t.f1*e.r)*n.x,o=(t.f2*e.q+t.f3*e.r)*n.y;return new be(i+r.x,o+r.y)}pixelToHex(e){var t=this.orientation,n=this.size,r=this.origin,i=new be((e.x-r.x)/n.x,(e.y-r.y)/n.y),o=t.b0*i.x+t.b1*i.y,l=t.b2*i.x+t.b3*i.y;return new ae(o,l,-o-l)}hexCornerOffset(e){var t=this.orientation,n=this.size,r=2*Math.PI*(t.start_angle-e)/6;return new be(n.x*Math.cos(r),n.y*Math.sin(r))}polygonCorners(e){for(var t=[],n=this.hexToPixel(e),r=0;r<6;r++){var i=this.hexCornerOffset(r);t.push(new be(n.x+i.x,n.y+i.y))}return t}}B(Le,"POINTY",new Ye(Math.sqrt(3),Math.sqrt(3)/2,0,3/2,Math.sqrt(3)/3,-1/3,0,2/3,.5)),B(Le,"FLAT",new Ye(3/2,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,0)),B(Le,"FLIPPED",new Ye(-3/2,0,-Math.sqrt(3)/2,-Math.sqrt(3),-2/3,0,1/3,-Math.sqrt(3)/3,0));var Ke=(s=>(s[s.WOOD=0]="WOOD",s[s.GRAYSCALE=1]="GRAYSCALE",s))(Ke||{});class tt{constructor(e,t){B(this,"colorArray",[["#d18b47","#e8ab6f","#ffce9e"],["#9a9a9a","#cdcdcd","#ffffff"]]);if(this.currentIndex=e,this.theme=t,e>this.colorArray.length||e<0)throw`color picker must be within range [0,${this.colorArray.length}]`}next(){let e=this.colorArray[this.theme][this.currentIndex];return this.currentIndex++,this.currentIndex>this.colorArray.length&&(this.currentIndex=0),e}previous(){let e=this.colorArray[this.theme][this.currentIndex];return this.currentIndex--,this.currentIndex<0&&(this.currentIndex=this.colorArray.length),e}}class qt{constructor(e,t,n){B(this,"currentColor");B(this,"running");B(this,"stalemate");B(this,"selectedPiece");B(this,"checkmate");this.running=e,this.currentColor=t,this.stalemate=n}}var kt=(s=>(s[s.WHITE=0]="WHITE",s[s.BLACK=1]="BLACK",s))(kt||{}),N=(s=>(s[s.WHITE_PAWN=0]="WHITE_PAWN",s[s.BLACK_PAWN=1]="BLACK_PAWN",s[s.WHITE_ROOK=2]="WHITE_ROOK",s[s.BLACK_ROOK=3]="BLACK_ROOK",s[s.WHITE_KNIGHT=4]="WHITE_KNIGHT",s[s.BLACK_KNIGHT=5]="BLACK_KNIGHT",s[s.WHITE_BISHOP=6]="WHITE_BISHOP",s[s.BLACK_BISHOP=7]="BLACK_BISHOP",s[s.WHITE_QUEEN=8]="WHITE_QUEEN",s[s.BLACK_QUEEN=9]="BLACK_QUEEN",s[s.WHITE_KING=10]="WHITE_KING",s[s.BLACK_KING=11]="BLACK_KING",s))(N||{});const Ve=[[0,0,"svgs/Chess_plt45.svg"],[1,0,"svgs/Chess_pdt45.svg"],[0,1,"svgs/Chess_rlt45.svg"],[1,1,"svgs/Chess_rdt45.svg"],[0,3,"svgs/Chess_nlt45.svg"],[1,3,"svgs/Chess_ndt45.svg"],[0,2,"svgs/Chess_blt45.svg"],[1,2,"svgs/Chess_bdt45.svg"],[0,4,"svgs/Chess_qlt45.svg"],[1,4,"svgs/Chess_qdt45.svg"],[0,5,"svgs/Chess_klt45.svg"],[1,5,"svgs/Chess_kdt45.svg"]];class d{constructor(e,t){B(this,"enumNumber");B(this,"pieceType");B(this,"pieceImage");B(this,"hex");B(this,"color");B(this,"enPassantable");B(this,"firstMove");B(this,"boardMeta",Se);this.enumNumber=t,this.color=Ve[t][0],this.pieceType=Ve[t][1],this.pieceImage=Ve[t][2],this.enPassantable=!1,this.firstMove=!0,this.hex=new ae(e[0],e[1]),ge.subscribe(n=>{this.boardMeta=n})}static equals(e,t){return e.q===t.q&&e.r===t.r}static cloneArray(e){var t=[];return e.forEach(n=>{t.push(new d([n.hex.q,n.hex.r],n.enumNumber))}),t}static colorToEnum(e){return e.toLowerCase()=="white"?0:1}static enumToColor(e){return e==0?"WHITE":"BLACK"}getEnemyColor(){return this.color==0?1:0}movePiece(e){let t=[];ye.subscribe(l=>{t=l});let n=this.getLegalMoves(!1,t).find(l=>d.equals(l.to,e));if(n==null)return!1;t=t.map(l=>(l.enPassantable=!1,l)),this.pieceType==0&&this.hex.distance(n.to)>1&&(this.enPassantable=!0),t=t.filter(l=>!d.equals(l.hex,n.attacking)),this.firstMove=!1,this.hex=n.to;const r=this.getPromotion();r&&(this.pieceImage=r.pieceImage,this.pieceType=r.pieceType,this.enumNumber=r.enumNumber),ye.set(t);let i=this.getEnemyColor(),o=new qt(!0,d.enumToColor(i),!1);return d.getAllLegalMoves(i).length==0&&(o.running=!1,d.inCheck(i)?o.checkmate=[d.enumToColor(this.color),d.enumToColor(i)]:o.stalemate=!0),Fe.set(o),!0}getLegalMoves(e,t){let n=[];if(t?n=t:ye.subscribe(o=>{n=o}),!e){let o=Ct;if(Fe.subscribe(l=>o=l),!o.running||this.color!=d.colorToEnum(o.currentColor))return[]}let r=[];return this.getMoves(n).forEach(o=>{let l=d.cloneArray(n);d.testMove(o,l)&&r.push(o)}),r}static testMove(e,t){let n=t.find(i=>d.equals(i.hex,e.from)),r=[];return t.forEach(i=>{d.equals(i.hex,e.attacking)||r.push(i)}),n.hex=e.to,!d.inCheck(n.color,r)}static inCheck(e,t){let n=[];t?n=t:ye.subscribe(o=>{n=o});let r=[];n.forEach(o=>{o.color!=e&&(r=r.concat(o.getMoves(n)))});let i=r.map(o=>o.attacking);return!!n.find(o=>o.color==e&&o.pieceType==5&&i.find(l=>d.equals(l,o.hex)))}static getAllLegalMoves(e,t){let n=[];t?n=t:ye.subscribe(i=>{n=i});let r=[];return n.forEach(i=>{i.color===e&&(r=r.concat(i.getLegalMoves(!0)))}),r}getMoves(e){let t=[];switch(this.pieceType){case 4:{t=t.concat(this.diagonalMoves(this.boardMeta.radius,e),this.adjacentMoves(e),this.directionalMoves(e));break}case 5:{t=t.concat(this.diagonalMoves(1,e),this.adjacentMoves(e));break}case 2:{t=t.concat(this.diagonalMoves(this.boardMeta.radius,e));break}case 1:{t=t.concat(this.directionalMoves(e));break}case 3:{t=t.concat(this.knightMoves(e));break}case 0:{t=t.concat(this.pawnMoves(e));break}}return t}static pieceOn(e,t){let n=[];return t?n=t:ye.subscribe(r=>{n=r}),n.find(r=>d.equals(r.hex,e))}adjacentMoves(e){let t=[];for(let n=0;n<6;n++){let r=this.hex.neighbor(n),i=d.pieceOn(r,e);r.inRadius(this.boardMeta.radius)&&(i===void 0||i.color!==this.color)&&t.push(new te(this.hex,r,r))}return t}diagonalMoves(e,t){let n=[];for(let r=0;r<6;r++){let i=this.hex.diagonalNeighbor(r);for(let o=0;o<e&&i.inRadius(this.boardMeta.radius);o++){let l=d.pieceOn(i,t);if(l){l.color!==this.color&&n.push(new te(this.hex,i,i));break}n.push(new te(this.hex,i,i)),i=i.diagonalNeighbor(r)}}return n}directionalMoves(e){let t=[];for(let n=0;n<6;n++){let r=this.hex.neighbor(n);for(;r.inRadius(this.boardMeta.radius);){let i=d.pieceOn(r,e);if(i){i.color!==this.color&&t.push(new te(this.hex,r,r));break}t.push(new te(this.hex,r,r)),r=r.neighbor(n)}}return t}knightMoves(e){let t=[];for(let n=0;n<12;n++){let r=this.hex.knightNeighbor(n),i=d.pieceOn(r,e);r.inRadius(this.boardMeta.radius)&&(i===void 0||i.color!==this.color)&&t.push(new te(this.hex,r,r))}return t}pawnMoves(e){var o,l,m,q,w,$,O,f;let t=[],n=[],r=[],i=1;switch(this.firstMove==!0&&(i=2),this.color){case 0:{let g=this.hex;for(let b=0;b<i&&(g=g.neighbor(2),!d.pieceOn(g,e));b++)t.push(new te(this.hex,g,g));n.push(new te(this.hex,this.hex.neighbor(1),this.hex.neighbor(1)),new te(this.hex,this.hex.neighbor(3),this.hex.neighbor(3))),((o=d.pieceOn(this.hex.neighbor(0),e))==null?void 0:o.color)!=this.color&&((l=d.pieceOn(this.hex.neighbor(0),e))!=null&&l.enPassantable)&&r.push(new te(this.hex,this.hex.neighbor(1),this.hex.neighbor(0))),((m=d.pieceOn(this.hex.neighbor(4),e))==null?void 0:m.color)!=this.color&&((q=d.pieceOn(this.hex.neighbor(4),e))!=null&&q.enPassantable)&&r.push(new te(this.hex,this.hex.neighbor(3),this.hex.neighbor(4)));break}case 1:{let g=this.hex;for(let b=0;b<i&&(g=g.neighbor(5),!d.pieceOn(g,e));b++)t.push(new te(this.hex,g,g));n.push(new te(this.hex,this.hex.neighbor(0),this.hex.neighbor(0)),new te(this.hex,this.hex.neighbor(4),this.hex.neighbor(4))),((w=d.pieceOn(this.hex.neighbor(1),e))==null?void 0:w.color)!=this.color&&(($=d.pieceOn(this.hex.neighbor(1),e))!=null&&$.enPassantable)&&r.push(new te(this.hex,this.hex.neighbor(0),this.hex.neighbor(1))),((O=d.pieceOn(this.hex.neighbor(3),e))==null?void 0:O.color)!=this.color&&((f=d.pieceOn(this.hex.neighbor(3),e))!=null&&f.enPassantable)&&r.push(new te(this.hex,this.hex.neighbor(4),this.hex.neighbor(3)));break}}return t.filter(g=>g.to.inRadius(this.boardMeta.radius)&&d.pieceOn(g.to,e)===void 0).concat(n.filter(g=>{var b;return g.to.inRadius(this.boardMeta.radius)&&d.pieceOn(g.to,e)!=null&&((b=d.pieceOn(g.to,e))==null?void 0:b.color)!=this.color})).concat(r)}getPromotion(){if(this.pieceType==0){if(this.color==0&&(this.hex.q+this.hex.r==-5||this.hex.r==-5))return new d([this.hex.q,this.hex.r],8);if(this.color==1&&(this.hex.q+this.hex.r==5||this.hex.r==5))return new d([this.hex.q,this.hex.r],9)}}}class te{constructor(e,t,n){B(this,"from");B(this,"to");B(this,"attacking");this.from=e,this.to=t,this.attacking=n}}var We=(s=>(s[s.DEFAULT=0]="DEFAULT",s[s.FLIPPED=1]="FLIPPED",s))(We||{});class Wt{constructor(e,t,n,r,i){B(this,"layout");B(this,"theme");B(this,"radius");B(this,"hexSize");B(this,"flip");this.theme=t,this.radius=n,this.hexSize=r,this.layout=this.getLayout(e),this.flip=i}getLayout(e){return e==1?new Le(Le.FLIPPED,new be(this.hexSize,this.hexSize),new be(0,0)):new Le(Le.FLAT,new be(this.hexSize,this.hexSize),new be(0,0))}}var Ne=(s=>(s.CURRENT="#57ff00",s.SELECTED="#ffb400",s.LEGAL="#525252",s.ATTACK="#ff0000",s.PREVIOUS="#fff700",s))(Ne||{});class Xe{constructor(e,t,n,r,i){B(this,"current");B(this,"selections");B(this,"legal");B(this,"attacks");B(this,"previous");this.current=e,this.selections=t,this.legal=n,this.attacks=r,this.previous=i}}const Se=new Wt(We.DEFAULT,Ke.GRAYSCALE,5,40,!1),ge=ze(Se),Ct=new qt(!0,"WHITE",!1),Fe=ze(Ct);let Kt;const Oe=ze(Kt);let zt=[new d([0,-5],N.BLACK_BISHOP),new d([0,-4],N.BLACK_BISHOP),new d([0,-3],N.BLACK_BISHOP),new d([0,5],N.WHITE_BISHOP),new d([0,4],N.WHITE_BISHOP),new d([0,3],N.WHITE_BISHOP),new d([-4,-1],N.BLACK_PAWN),new d([-3,-1],N.BLACK_PAWN),new d([-2,-1],N.BLACK_PAWN),new d([-1,-1],N.BLACK_PAWN),new d([0,-1],N.BLACK_PAWN),new d([1,-2],N.BLACK_PAWN),new d([2,-3],N.BLACK_PAWN),new d([3,-4],N.BLACK_PAWN),new d([4,-5],N.BLACK_PAWN),new d([-4,5],N.WHITE_PAWN),new d([-3,4],N.WHITE_PAWN),new d([-2,3],N.WHITE_PAWN),new d([-1,2],N.WHITE_PAWN),new d([0,1],N.WHITE_PAWN),new d([1,1],N.WHITE_PAWN),new d([2,1],N.WHITE_PAWN),new d([3,1],N.WHITE_PAWN),new d([4,1],N.WHITE_PAWN),new d([-3,-2],N.BLACK_ROOK),new d([3,-5],N.BLACK_ROOK),new d([-3,5],N.WHITE_ROOK),new d([3,2],N.WHITE_ROOK),new d([-2,-3],N.BLACK_KNIGHT),new d([2,-5],N.BLACK_KNIGHT),new d([-2,5],N.WHITE_KNIGHT),new d([2,3],N.WHITE_KNIGHT),new d([-1,-4],N.BLACK_QUEEN),new d([-1,5],N.WHITE_QUEEN),new d([1,-5],N.BLACK_KING),new d([1,4],N.WHITE_KING)];const ye=ze(zt),je=ze(new Xe(void 0,[],[],[],[]));function Pt(s){let e,t,n,r;const i=s[8].default,o=yt(i,s,s[7],null);return{c(){e=ne("div"),o&&o.c(),this.h()},l(l){e=re(l,"DIV",{class:!0});var m=ee(e);o&&o.l(m),m.forEach(L),this.h()},h(){S(e,"class","draggable svelte-2qas1t")},m(l,m){G(l,e,m),o&&o.m(e,null),s[9](e),t=!0,n||(r=[ue(window,"pointermove",s[4]),ue(window,"pointerup",s[1]),ue(window,"touchmove",s[5]),ue(window,"pointerdown",s[3]),ue(e,"pointerdown",s[2]),ue(e,"contextmenu",Rt)],n=!0)},p(l,[m]){o&&o.p&&(!t||m&128)&&Lt(o,i,l,l[7],t?Bt(i,l[7],m,null):St(l[7]),null)},i(l){t||(_(o,l),t=!0)},o(l){v(o,l),t=!1},d(l){l&&L(e),o&&o.d(l),s[9](null),n=!1,Qe(r)}}}const Rt=function(s){s.preventDefault()};function Gt(s,e,t){let{$$slots:n={},$$scope:r}=e,{currentPiece:i}=e,o;Oe.subscribe(A=>{o=A}),ge.subscribe(A=>{});let l,m,q=0,w=0,$=0,O=0,f,g=[],b,x=[],P=[],C=[],D=[];je.subscribe(A=>D=A.previous);let h=!1;Nt(()=>{u()});function u(){var R,X;$=f.getBoundingClientRect().width,O=f.getBoundingClientRect().height;let A=document.getElementById(`${i.hex.q},${i.hex.r}`).getBoundingClientRect();q=(R=f.parentElement)==null?void 0:R.getBoundingClientRect().left,w=(X=f.parentElement)==null?void 0:X.getBoundingClientRect().top,f.setAttribute("style",`left:${A.left+A.width/2-$/2-q}px; top:${A.top+A.height/2-O/2-w}px;`)}function c(A){if(A.stopPropagation(),t(0,f.style.cursor="",f),t(0,f.style.zIndex="",f),!h){o==i&&(Oe.set(void 0),b=void 0,P=[],x=[],fe());return}if(h=!1,C.length>0){let R=i.movePiece(C[0]);R?(o&&Oe.set(void 0),P=[],x=[],D=[b,C[0]],b=void 0,u()):R||(o&&d.equals(o.hex,C[0])?(Oe.set(void 0),b=void 0,P=[],x=[]):(!o||o!=i)&&Oe.set(i))}else Oe.set(i);return t(0,f.style.left=l,f),t(0,f.style.top=m,f),C=[],fe(),!0}function F(A){var X,ie;h=!0,t(0,f.style.zIndex="100",f),t(0,f.style.cursor="grabbing",f),l=f.style.left,m=f.style.top,q=(X=f.parentElement)==null?void 0:X.getBoundingClientRect().left,w=(ie=f.parentElement)==null?void 0:ie.getBoundingClientRect().top;let R=i.getLegalMoves(!1);b=i.hex,P=R.filter(J=>d.pieceOn(J.attacking)).map(J=>J.to),x=R.filter(J=>!d.pieceOn(J.attacking)).map(J=>J.to),W(A.clientX,A.clientY)}function V(A){let R=se(A.clientX,A.clientY);!R||h||!o||o==i&&i.movePiece(R)&&(o&&Oe.set(void 0),P=[],x=[],D=[b,R],b=void 0,u(),fe())}function Q(A){W(A.clientX,A.clientY)}function k(A){return W(A.touches[0].clientX,A.touches[0].clientY),!0}function W(A,R){if(!h)return;let X=A-$/2-q,ie=R-O/2-w;t(0,f.style.left=`${X}px`,f),t(0,f.style.top=`${ie}px`,f);let J=se(A,R);J?C[0]=J:C=[],fe()}function se(A,R){g=document.elementsFromPoint(A,R);let X=g.find(_e=>_e.classList.contains("droppable"));if(!X)return;let ie=parseInt(X.getAttribute("data-q")),J=parseInt(X.getAttribute("data-r"));return new ae(ie,J)}function fe(){je.set(new Xe(b,C,x,P,D))}function de(A){Ht[A?"unshift":"push"](()=>{f=A,t(0,f)})}return s.$$set=A=>{"currentPiece"in A&&t(6,i=A.currentPiece),"$$scope"in A&&t(7,r=A.$$scope)},[f,c,F,V,Q,k,i,r,n,de]}class Ft extends xe{constructor(e){super(),qe(this,e,Gt,Pt,me,{currentPiece:6})}}function Ut(s){let e,t;return{c(){e=ne("img"),this.h()},l(n){e=re(n,"IMG",{style:!0,class:!0,draggable:!0,src:!0}),this.h()},h(){z(e,"z-index","100"),z(e,"width",s[2]*1.3+"px"),z(e,"height",s[2]*1.3+"px"),z(e,"transform","scaleY("+s[1]+")"),S(e,"class","piece"),S(e,"draggable","false"),Ze(e.src,t=s[0].pieceImage)||S(e,"src",t)},m(n,r){G(n,e,r)},p(n,r){r&2&&z(e,"transform","scaleY("+n[1]+")"),r&1&&!Ze(e.src,t=n[0].pieceImage)&&S(e,"src",t)},d(n){n&&L(e)}}}function Yt(s){let e,t;return e=new Ft({props:{currentPiece:s[0],$$slots:{default:[Ut]},$$scope:{ctx:s}}}),{c(){I(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){T(e,n,r),t=!0},p(n,[r]){const i={};r&1&&(i.currentPiece=n[0]),r&131&&(i.$$scope={dirty:r,ctx:n}),e.$set(i)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function Vt(s,e,t){let n,r;Ge(s,Fe,w=>t(3,n=w)),Ge(s,ge,w=>t(4,r=w));let{piece:i}=e,o=r,l=n;const m=o.layout.size.x;let q=1;return o.flip===!0&&d.colorToEnum(l.currentColor)===kt.BLACK&&(q=-1),s.$$set=w=>{"piece"in w&&t(0,i=w.piece)},[i,q,m]}class jt extends xe{constructor(e){super(),qe(this,e,Vt,Yt,me,{piece:0})}}function nt(s){let e;return{c(){e=pe("circle"),this.h()},l(t){e=$e(t,"circle",{r:!0,style:!0}),ee(e).forEach(L),this.h()},h(){S(e,"r",s[0]),z(e,"fill",s[1]),z(e,"z-index","50"),z(e,"stroke",s[1]),z(e,"stroke-width",s[0]/10)},m(t,n){G(t,e,n)},p(t,n){n&1&&S(e,"r",t[0]),n&2&&z(e,"fill",t[1]),n&2&&z(e,"stroke",t[1]),n&1&&z(e,"stroke-width",t[0]/10)},d(t){t&&L(e)}}}function rt(s){let e;return{c(){e=pe("circle"),this.h()},l(t){e=$e(t,"circle",{r:!0,style:!0}),ee(e).forEach(L),this.h()},h(){S(e,"r",s[0]),z(e,"fill","none"),z(e,"z-index","50"),z(e,"stroke",s[1]),z(e,"stroke-width",s[0]/10+"px")},m(t,n){G(t,e,n)},p(t,n){n&1&&S(e,"r",t[0]),n&2&&z(e,"stroke",t[1]),n&1&&z(e,"stroke-width",t[0]/10+"px")},d(t){t&&L(e)}}}function Qt(s){let e,t,n=s[2]&&nt(s),r=!s[2]&&rt(s);return{c(){e=pe("g"),n&&n.c(),t=Z(),r&&r.c(),this.h()},l(i){e=$e(i,"g",{transform:!0});var o=ee(e);n&&n.l(o),t=Z(),r&&r.l(o),o.forEach(L),this.h()},h(){S(e,"transform","translate("+s[3].x+", "+s[3].y+")")},m(i,o){G(i,e,o),n&&n.m(e,null),j(e,t),r&&r.m(e,null)},p(i,[o]){i[2]?n?n.p(i,o):(n=nt(i),n.c(),n.m(e,t)):n&&(n.d(1),n=null),i[2]?r&&(r.d(1),r=null):r?r.p(i,o):(r=rt(i),r.c(),r.m(e,null))},i:le,o:le,d(i){i&&L(e),n&&n.d(),r&&r.d()}}}function Xt(s,e,t){let{q:n}=e,{r}=e,{size:i}=e,{color:o}=e,{fill:l}=e,m=Se;ge.subscribe($=>{m=$}),new ae(0,0);const q=new ae(n,r),w=m.layout.hexToPixel(q);return s.$$set=$=>{"q"in $&&t(4,n=$.q),"r"in $&&t(5,r=$.r),"size"in $&&t(0,i=$.size),"color"in $&&t(1,o=$.color),"fill"in $&&t(2,l=$.fill)},[i,o,l,w,n,r]}class Je extends xe{constructor(e){super(),qe(this,e,Xt,Qt,me,{q:4,r:5,size:0,color:1,fill:2})}}function Jt(s){let e,t;return{c(){e=pe("g"),t=pe("polygon"),this.h()},l(n){e=$e(n,"g",{transform:!0});var r=ee(e);t=$e(r,"polygon",{class:!0,points:!0,style:!0,opacity:!0}),ee(t).forEach(L),r.forEach(L),this.h()},h(){S(t,"class","hexagon"),S(t,"points",s[3]),z(t,"fill",s[0]),z(t,"z-index","50"),z(t,"stroke","black"),z(t,"stroke-width",s[2]/25+"px"),S(t,"opacity","0.3"),S(e,"transform","translate("+s[1].x+", "+s[1].y+")")},m(n,r){G(n,e,r),j(e,t)},p(n,[r]){r&1&&z(t,"fill",n[0])},i:le,o:le,d(n){n&&L(e)}}}function Zt(s){var e="";return s.forEach(t=>{e=e.concat(`${t.x},${t.y} `)}),e}function Dt(s,e,t){let{q:n}=e,{r}=e,{color:i}=e,o=Se;ge.subscribe(f=>{o=f});const l=new ae(0,0),m=o.layout.polygonCorners(l),q=new ae(n,r),w=o.layout.hexToPixel(q),$=o.hexSize,O=Zt(m);return s.$$set=f=>{"q"in f&&t(4,n=f.q),"r"in f&&t(5,r=f.r),"color"in f&&t(0,i=f.color)},[i,w,$,O,n,r]}class At extends xe{constructor(e){super(),qe(this,e,Dt,Jt,me,{q:4,r:5,color:0})}}function en(s){let e,t,n;return{c(){e=pe("g"),t=pe("text"),n=vt(s[0]),this.h()},l(r){e=$e(r,"g",{style:!0,transform:!0});var i=ee(e);t=$e(i,"text",{x:!0,y:!0,"stroke-width":!0,class:!0});var o=ee(t);n=bt(o,s[0]),o.forEach(L),i.forEach(L),this.h()},h(){S(t,"x",-s[4]/3.3*s[2]-s[4]/4),S(t,"y",-(s[4]/3.3)*s[3]),S(t,"stroke-width",s[4]/50),S(t,"class","coordinate"),z(e,"font",s[4]/2+"px monospace"),S(e,"transform","translate("+s[1].x+", "+s[1].y+")")},m(r,i){G(r,e,i),j(e,t),j(t,n)},p(r,[i]){i&1&&xt(n,r[0])},i:le,o:le,d(r){r&&L(e)}}}function tn(s,e,t){let{q:n}=e,{r}=e,{text:i}=e,o=Se;ge.subscribe(f=>{o=f});const l=new ae(n,r),m=o.layout.hexToPixel(l),q=Math.sqrt(m.x*m.x+m.y*m.y),w=m.x/q,$=m.y/q,O=o.layout.size.x;return s.$$set=f=>{"q"in f&&t(5,n=f.q),"r"in f&&t(6,r=f.r),"text"in f&&t(0,i=f.text)},[i,m,w,$,O,n,r]}class H extends xe{constructor(e){super(),qe(this,e,tn,en,me,{q:5,r:6,text:0})}}function nn(s){let e,t,n,r,i;return{c(){e=pe("g"),t=pe("polygon"),this.h()},l(o){e=$e(o,"g",{transform:!0});var l=ee(e);t=$e(l,"polygon",{id:!0,"data-q":!0,"data-r":!0,class:!0,points:!0,style:!0}),ee(t).forEach(L),l.forEach(L),this.h()},h(){S(t,"id",n=s[0]+","+s[1]),S(t,"data-q",r=s[0]+","),S(t,"data-r",i=s[1]+","),S(t,"class","hexagon droppable"),S(t,"points",s[5]),z(t,"fill",s[2]),z(t,"stroke","black"),z(t,"stroke-width",s[4]/25+"px"),S(e,"transform","translate("+s[3].x+", "+s[3].y+")")},m(o,l){G(o,e,l),j(e,t)},p(o,[l]){l&3&&n!==(n=o[0]+","+o[1])&&S(t,"id",n),l&1&&r!==(r=o[0]+",")&&S(t,"data-q",r),l&2&&i!==(i=o[1]+",")&&S(t,"data-r",i),l&4&&z(t,"fill",o[2])},i:le,o:le,d(o){o&&L(e)}}}function rn(s){var e="";return s.forEach(t=>{e=e.concat(`${t.x},${t.y} `)}),e}function sn(s,e,t){let{q:n}=e,{r}=e,{color:i}=e,o=Se;ge.subscribe(f=>{o=f});const l=new ae(0,0),m=o.layout.polygonCorners(l),q=new ae(n,r),w=o.layout.hexToPixel(q),$=o.layout.size.x,O=rn(m);return s.$$set=f=>{"q"in f&&t(0,n=f.q),"r"in f&&t(1,r=f.r),"color"in f&&t(2,i=f.color)},[n,r,i,w,$,O]}class on extends xe{constructor(e){super(),qe(this,e,sn,nn,me,{q:0,r:1,color:2})}}function st(s,e,t){const n=s.slice();return n[9]=e[t],n}function it(s,e,t){const n=s.slice();return n[12]=e[t],n}function ot(s,e,t){const n=s.slice();return n[12]=e[t],n}function lt(s,e,t){const n=s.slice();return n[12]=e[t],n}function at(s,e,t){const n=s.slice();return n[12]=e[t],n}function ft(s,e,t){const n=s.slice();return n[21]=e[t].q,n[22]=e[t].r,n[23]=e[t].color,n}function ht(s){let e,t;return e=new on({props:{q:s[21],r:s[22],color:s[23]}}),{c(){I(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){T(e,n,r),t=!0},p(n,r){const i={};r&2&&(i.q=n[21]),r&2&&(i.r=n[22]),r&2&&(i.color=n[23]),e.$set(i)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function ct(s){let e,t;return e=new At({props:{q:s[12].q,r:s[12].r,color:Ne.PREVIOUS}}),{c(){I(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){T(e,n,r),t=!0},p(n,r){const i={};r&4&&(i.q=n[12].q),r&4&&(i.r=n[12].r),e.$set(i)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function ut(s){let e,t;return e=new Je({props:{q:s[12].q,r:s[12].r,size:s[0].hexSize/5,color:Ne.LEGAL,fill:!0}}),{c(){I(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){T(e,n,r),t=!0},p(n,r){const i={};r&4&&(i.q=n[12].q),r&4&&(i.r=n[12].r),r&1&&(i.size=n[0].hexSize/5),e.$set(i)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function gt(s){let e,t;return e=new Je({props:{q:s[12].q,r:s[12].r,size:s[0].hexSize/1.5,color:Ne.ATTACK,fill:!1}}),{c(){I(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){T(e,n,r),t=!0},p(n,r){const i={};r&4&&(i.q=n[12].q),r&4&&(i.r=n[12].r),r&1&&(i.size=n[0].hexSize/1.5),e.$set(i)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function mt(s){let e,t;return e=new At({props:{q:s[2].current.q,r:s[2].current.r,color:Ne.CURRENT}}),{c(){I(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){T(e,n,r),t=!0},p(n,r){const i={};r&4&&(i.q=n[2].current.q),r&4&&(i.r=n[2].current.r),e.$set(i)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function pt(s){let e,t;return e=new Je({props:{q:s[12].q,r:s[12].r,size:s[0].hexSize/1.5,color:Ne.SELECTED,fill:!1}}),{c(){I(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){T(e,n,r),t=!0},p(n,r){const i={};r&4&&(i.q=n[12].q),r&4&&(i.r=n[12].r),r&1&&(i.size=n[0].hexSize/1.5),e.$set(i)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function $t(s){let e,t,n,r,i,o,l=ce(s[2].previous),m=[];for(let h=0;h<l.length;h+=1)m[h]=ct(at(s,l,h));const q=h=>v(m[h],1,1,()=>{m[h]=null});let w=ce(s[2].legal),$=[];for(let h=0;h<w.length;h+=1)$[h]=ut(lt(s,w,h));const O=h=>v($[h],1,1,()=>{$[h]=null});let f=ce(s[2].attacks),g=[];for(let h=0;h<f.length;h+=1)g[h]=gt(ot(s,f,h));const b=h=>v(g[h],1,1,()=>{g[h]=null});let x=s[2].current&&mt(s),P=ce(s[2].selections),C=[];for(let h=0;h<P.length;h+=1)C[h]=pt(it(s,P,h));const D=h=>v(C[h],1,1,()=>{C[h]=null});return{c(){for(let h=0;h<m.length;h+=1)m[h].c();e=Z();for(let h=0;h<$.length;h+=1)$[h].c();t=Z();for(let h=0;h<g.length;h+=1)g[h].c();n=Z(),x&&x.c(),r=Z();for(let h=0;h<C.length;h+=1)C[h].c();i=Z()},l(h){for(let u=0;u<m.length;u+=1)m[u].l(h);e=Z();for(let u=0;u<$.length;u+=1)$[u].l(h);t=Z();for(let u=0;u<g.length;u+=1)g[u].l(h);n=Z(),x&&x.l(h),r=Z();for(let u=0;u<C.length;u+=1)C[u].l(h);i=Z()},m(h,u){for(let c=0;c<m.length;c+=1)m[c]&&m[c].m(h,u);G(h,e,u);for(let c=0;c<$.length;c+=1)$[c]&&$[c].m(h,u);G(h,t,u);for(let c=0;c<g.length;c+=1)g[c]&&g[c].m(h,u);G(h,n,u),x&&x.m(h,u),G(h,r,u);for(let c=0;c<C.length;c+=1)C[c]&&C[c].m(h,u);G(h,i,u),o=!0},p(h,u){if(u&4){l=ce(h[2].previous);let c;for(c=0;c<l.length;c+=1){const F=at(h,l,c);m[c]?(m[c].p(F,u),_(m[c],1)):(m[c]=ct(F),m[c].c(),_(m[c],1),m[c].m(e.parentNode,e))}for(we(),c=l.length;c<m.length;c+=1)q(c);ve()}if(u&5){w=ce(h[2].legal);let c;for(c=0;c<w.length;c+=1){const F=lt(h,w,c);$[c]?($[c].p(F,u),_($[c],1)):($[c]=ut(F),$[c].c(),_($[c],1),$[c].m(t.parentNode,t))}for(we(),c=w.length;c<$.length;c+=1)O(c);ve()}if(u&5){f=ce(h[2].attacks);let c;for(c=0;c<f.length;c+=1){const F=ot(h,f,c);g[c]?(g[c].p(F,u),_(g[c],1)):(g[c]=gt(F),g[c].c(),_(g[c],1),g[c].m(n.parentNode,n))}for(we(),c=f.length;c<g.length;c+=1)b(c);ve()}if(h[2].current?x?(x.p(h,u),u&4&&_(x,1)):(x=mt(h),x.c(),_(x,1),x.m(r.parentNode,r)):x&&(we(),v(x,1,1,()=>{x=null}),ve()),u&5){P=ce(h[2].selections);let c;for(c=0;c<P.length;c+=1){const F=it(h,P,c);C[c]?(C[c].p(F,u),_(C[c],1)):(C[c]=pt(F),C[c].c(),_(C[c],1),C[c].m(i.parentNode,i))}for(we(),c=P.length;c<C.length;c+=1)D(c);ve()}},i(h){if(!o){for(let u=0;u<l.length;u+=1)_(m[u]);for(let u=0;u<w.length;u+=1)_($[u]);for(let u=0;u<f.length;u+=1)_(g[u]);_(x);for(let u=0;u<P.length;u+=1)_(C[u]);o=!0}},o(h){m=m.filter(Boolean);for(let u=0;u<m.length;u+=1)v(m[u]);$=$.filter(Boolean);for(let u=0;u<$.length;u+=1)v($[u]);g=g.filter(Boolean);for(let u=0;u<g.length;u+=1)v(g[u]);v(x),C=C.filter(Boolean);for(let u=0;u<C.length;u+=1)v(C[u]);o=!1},d(h){h&&(L(e),L(t),L(n),L(r),L(i)),Be(m,h),Be($,h),Be(g,h),x&&x.d(h),Be(C,h)}}}function dt(s){let e,t;return e=new jt({props:{piece:s[9]}}),{c(){I(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){T(e,n,r),t=!0},p(n,r){const i={};r&8&&(i.piece=n[9]),e.$set(i)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function _t(s){let e,t,n,r=s[2],i,o,l,m,q,w,$,O,f,g,b,x,P,C,D,h,u,c,F,V,Q,k,W,se,fe,de,A,R,X,ie,J,_e,Ie,Me,Ue,Pe,Te=ce(s[1]),U=[];for(let a=0;a<Te.length;a+=1)U[a]=ht(ft(s,Te,a));const Mt=a=>v(U[a],1,1,()=>{U[a]=null});let he=$t(s);o=new H({props:{q:-5,r:6,text:"a"}}),l=new H({props:{q:-4,r:6,text:"b"}}),m=new H({props:{q:-3,r:6,text:"c"}}),q=new H({props:{q:-2,r:6,text:"d"}}),w=new H({props:{q:-1,r:6,text:"e"}}),$=new H({props:{q:0,r:6,text:"f"}}),O=new H({props:{q:1,r:5,text:"g"}}),f=new H({props:{q:2,r:4,text:"h"}}),g=new H({props:{q:3,r:3,text:"i"}}),b=new H({props:{q:4,r:2,text:"k"}}),x=new H({props:{q:5,r:1,text:"l"}}),P=new H({props:{q:-6,r:5,text:"1"}}),C=new H({props:{q:-6,r:4,text:"2"}}),D=new H({props:{q:-6,r:3,text:"3"}}),h=new H({props:{q:-6,r:2,text:"4"}}),u=new H({props:{q:-6,r:1,text:"5"}}),c=new H({props:{q:-6,r:0,text:"6"}}),F=new H({props:{q:-5,r:-1,text:"7"}}),V=new H({props:{q:-4,r:-2,text:"8"}}),Q=new H({props:{q:-3,r:-3,text:"9"}}),k=new H({props:{q:-2,r:-4,text:"10"}}),W=new H({props:{q:-1,r:-5,text:"11"}}),se=new H({props:{q:6,r:-1,text:"1"}}),fe=new H({props:{q:6,r:-2,text:"2"}}),de=new H({props:{q:6,r:-3,text:"3"}}),A=new H({props:{q:6,r:-4,text:"4"}}),R=new H({props:{q:6,r:-5,text:"5"}}),X=new H({props:{q:6,r:-6,text:"6"}}),ie=new H({props:{q:5,r:-6,text:"7"}}),J=new H({props:{q:4,r:-6,text:"8"}}),_e=new H({props:{q:3,r:-6,text:"9"}}),Ie=new H({props:{q:2,r:-6,text:"10"}}),Me=new H({props:{q:1,r:-6,text:"11"}});let Ee=ce(s[3]),Y=[];for(let a=0;a<Ee.length;a+=1)Y[a]=dt(st(s,Ee,a));const Tt=a=>v(Y[a],1,1,()=>{Y[a]=null});return{c(){e=ne("div"),t=pe("svg");for(let a=0;a<U.length;a+=1)U[a].c();n=Z(),he.c(),i=Z(),I(o.$$.fragment),I(l.$$.fragment),I(m.$$.fragment),I(q.$$.fragment),I(w.$$.fragment),I($.$$.fragment),I(O.$$.fragment),I(f.$$.fragment),I(g.$$.fragment),I(b.$$.fragment),I(x.$$.fragment),I(P.$$.fragment),I(C.$$.fragment),I(D.$$.fragment),I(h.$$.fragment),I(u.$$.fragment),I(c.$$.fragment),I(F.$$.fragment),I(V.$$.fragment),I(Q.$$.fragment),I(k.$$.fragment),I(W.$$.fragment),I(se.$$.fragment),I(fe.$$.fragment),I(de.$$.fragment),I(A.$$.fragment),I(R.$$.fragment),I(X.$$.fragment),I(ie.$$.fragment),I(J.$$.fragment),I(_e.$$.fragment),I(Ie.$$.fragment),I(Me.$$.fragment),Ue=Ce();for(let a=0;a<Y.length;a+=1)Y[a].c();this.h()},l(a){e=re(a,"DIV",{class:!0});var K=ee(e);t=$e(K,"svg",{class:!0,overflow:!0,viewBox:!0});var p=ee(t);for(let oe=0;oe<U.length;oe+=1)U[oe].l(p);n=Z(),he.l(p),i=Z(),M(o.$$.fragment,p),M(l.$$.fragment,p),M(m.$$.fragment,p),M(q.$$.fragment,p),M(w.$$.fragment,p),M($.$$.fragment,p),M(O.$$.fragment,p),M(f.$$.fragment,p),M(g.$$.fragment,p),M(b.$$.fragment,p),M(x.$$.fragment,p),M(P.$$.fragment,p),M(C.$$.fragment,p),M(D.$$.fragment,p),M(h.$$.fragment,p),M(u.$$.fragment,p),M(c.$$.fragment,p),M(F.$$.fragment,p),M(V.$$.fragment,p),M(Q.$$.fragment,p),M(k.$$.fragment,p),M(W.$$.fragment,p),M(se.$$.fragment,p),M(fe.$$.fragment,p),M(de.$$.fragment,p),M(A.$$.fragment,p),M(R.$$.fragment,p),M(X.$$.fragment,p),M(ie.$$.fragment,p),M(J.$$.fragment,p),M(_e.$$.fragment,p),M(Ie.$$.fragment,p),M(Me.$$.fragment,p),p.forEach(L),Ue=Ae(K);for(let oe=0;oe<Y.length;oe+=1)Y[oe].l(K);K.forEach(L),this.h()},h(){S(t,"class","svgs"),S(t,"overflow","visible"),S(t,"viewBox",s[4]),S(e,"class","board svelte-1qv0hkr")},m(a,K){G(a,e,K),j(e,t);for(let p=0;p<U.length;p+=1)U[p]&&U[p].m(t,null);j(t,n),he.m(t,null),j(t,i),T(o,t,null),T(l,t,null),T(m,t,null),T(q,t,null),T(w,t,null),T($,t,null),T(O,t,null),T(f,t,null),T(g,t,null),T(b,t,null),T(x,t,null),T(P,t,null),T(C,t,null),T(D,t,null),T(h,t,null),T(u,t,null),T(c,t,null),T(F,t,null),T(V,t,null),T(Q,t,null),T(k,t,null),T(W,t,null),T(se,t,null),T(fe,t,null),T(de,t,null),T(A,t,null),T(R,t,null),T(X,t,null),T(ie,t,null),T(J,t,null),T(_e,t,null),T(Ie,t,null),T(Me,t,null),j(e,Ue);for(let p=0;p<Y.length;p+=1)Y[p]&&Y[p].m(e,null);Pe=!0},p(a,K){if(K&2){Te=ce(a[1]);let p;for(p=0;p<Te.length;p+=1){const oe=ft(a,Te,p);U[p]?(U[p].p(oe,K),_(U[p],1)):(U[p]=ht(oe),U[p].c(),_(U[p],1),U[p].m(t,n))}for(we(),p=Te.length;p<U.length;p+=1)Mt(p);ve()}if(K&4&&me(r,r=a[2])?(we(),v(he,1,1,le),ve(),he=$t(a),he.c(),_(he,1),he.m(t,i)):he.p(a,K),K&8){Ee=ce(a[3]);let p;for(p=0;p<Ee.length;p+=1){const oe=st(a,Ee,p);Y[p]?(Y[p].p(oe,K),_(Y[p],1)):(Y[p]=dt(oe),Y[p].c(),_(Y[p],1),Y[p].m(e,null))}for(we(),p=Ee.length;p<Y.length;p+=1)Tt(p);ve()}},i(a){if(!Pe){for(let K=0;K<Te.length;K+=1)_(U[K]);_(he),_(o.$$.fragment,a),_(l.$$.fragment,a),_(m.$$.fragment,a),_(q.$$.fragment,a),_(w.$$.fragment,a),_($.$$.fragment,a),_(O.$$.fragment,a),_(f.$$.fragment,a),_(g.$$.fragment,a),_(b.$$.fragment,a),_(x.$$.fragment,a),_(P.$$.fragment,a),_(C.$$.fragment,a),_(D.$$.fragment,a),_(h.$$.fragment,a),_(u.$$.fragment,a),_(c.$$.fragment,a),_(F.$$.fragment,a),_(V.$$.fragment,a),_(Q.$$.fragment,a),_(k.$$.fragment,a),_(W.$$.fragment,a),_(se.$$.fragment,a),_(fe.$$.fragment,a),_(de.$$.fragment,a),_(A.$$.fragment,a),_(R.$$.fragment,a),_(X.$$.fragment,a),_(ie.$$.fragment,a),_(J.$$.fragment,a),_(_e.$$.fragment,a),_(Ie.$$.fragment,a),_(Me.$$.fragment,a);for(let K=0;K<Ee.length;K+=1)_(Y[K]);Pe=!0}},o(a){U=U.filter(Boolean);for(let K=0;K<U.length;K+=1)v(U[K]);v(he),v(o.$$.fragment,a),v(l.$$.fragment,a),v(m.$$.fragment,a),v(q.$$.fragment,a),v(w.$$.fragment,a),v($.$$.fragment,a),v(O.$$.fragment,a),v(f.$$.fragment,a),v(g.$$.fragment,a),v(b.$$.fragment,a),v(x.$$.fragment,a),v(P.$$.fragment,a),v(C.$$.fragment,a),v(D.$$.fragment,a),v(h.$$.fragment,a),v(u.$$.fragment,a),v(c.$$.fragment,a),v(F.$$.fragment,a),v(V.$$.fragment,a),v(Q.$$.fragment,a),v(k.$$.fragment,a),v(W.$$.fragment,a),v(se.$$.fragment,a),v(fe.$$.fragment,a),v(de.$$.fragment,a),v(A.$$.fragment,a),v(R.$$.fragment,a),v(X.$$.fragment,a),v(ie.$$.fragment,a),v(J.$$.fragment,a),v(_e.$$.fragment,a),v(Ie.$$.fragment,a),v(Me.$$.fragment,a),Y=Y.filter(Boolean);for(let K=0;K<Y.length;K+=1)v(Y[K]);Pe=!1},d(a){a&&L(e),Be(U,a),he.d(a),E(o),E(l),E(m),E(q),E(w),E($),E(O),E(f),E(g),E(b),E(x),E(P),E(C),E(D),E(h),E(u),E(c),E(F),E(V),E(Q),E(k),E(W),E(se),E(fe),E(de),E(A),E(R),E(X),E(ie),E(J),E(_e),E(Ie),E(Me),Be(Y,a)}}}function ln(s){let e=[s[0].theme,s[3]],t,n,r=_t(s);return{c(){r.c(),t=Z()},l(i){r.l(i),t=Z()},m(i,o){r.m(i,o),G(i,t,o),n=!0},p(i,[o]){o&9&&me(e,e=[i[0].theme,i[3]])?(we(),v(r,1,1,le),ve(),r=_t(i),r.c(),_(r,1),r.m(t.parentNode,t)):r.p(i,o)},i(i){n||(_(r),n=!0)},o(i){v(r),n=!1},d(i){i&&L(t),r.d(i)}}}function an(s,e,t){class n{constructor(f,g,b,x){this.q=f,this.r=g,this.size=b,this.color=x}}let r=Se;ge.subscribe(O=>{t(0,r=O),q()});const i=r.radius*2+1;var o=[],l=new Xe(void 0,[],[],[],[]);je.subscribe(O=>t(2,l=O));var m=[];ye.subscribe(O=>{t(3,m=O)});function q(){t(1,o=[]);let O=new tt(0,r.theme);for(let f=r.radius;f>=r.radius*-1;f--){let g=new tt(O.currentIndex,O.theme);for(let b=r.radius;b>=r.radius*-1;b--){let x;x=new ae(f,b),x.inRadius(r.radius)&&o.push(new n(x.q,x.r,r.hexSize,g.next()))}f>0?O.next():O.previous()}}q();const w=new be(r.hexSize*(3/2)*(i+2),r.hexSize*Math.sqrt(3)*(i+1)),$=`${w.x/-2} ${w.y/-2} ${w.x} ${w.y}`;return[r,o,l,m,$]}class fn extends xe{constructor(e){super(),qe(this,e,an,ln,me,{})}}function wt(s){let e,t,n,r="×",i,o,l="GAME OVER!",m,q,w,$,O;return{c(){e=ne("div"),t=ne("div"),n=ne("span"),n.textContent=r,i=Ce(),o=ne("p"),o.textContent=l,m=Ce(),q=ne("p"),w=vt(s[0]),this.h()},l(f){e=re(f,"DIV",{class:!0});var g=ee(e);t=re(g,"DIV",{class:!0});var b=ee(t);n=re(b,"SPAN",{class:!0,"data-svelte-h":!0}),ke(n)!=="svelte-ty2x6x"&&(n.textContent=r),i=Ae(b),o=re(b,"P",{"data-svelte-h":!0}),ke(o)!=="svelte-av41o5"&&(o.textContent=l),m=Ae(b),q=re(b,"P",{});var x=ee(q);w=bt(x,s[0]),x.forEach(L),b.forEach(L),g.forEach(L),this.h()},h(){S(n,"class","close-button svelte-p4vkuh"),S(t,"class","popup-content svelte-p4vkuh"),S(e,"class","popup svelte-p4vkuh")},m(f,g){G(f,e,g),j(e,t),j(t,n),j(t,i),j(t,o),j(t,m),j(t,q),j(q,w),$||(O=[ue(n,"click",s[2]),ue(e,"click",s[3])],$=!0)},p(f,g){g&1&&xt(w,f[0])},d(f){f&&L(e),$=!1,Qe(O)}}}function hn(s){let e,t=s[1]&&wt(s);return{c(){t&&t.c(),e=Z()},l(n){t&&t.l(n),e=Z()},m(n,r){t&&t.m(n,r),G(n,e,r)},p(n,[r]){n[1]?t?t.p(n,r):(t=wt(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:le,o:le,d(n){n&&L(e),t&&t.d(n)}}}function cn(s,e,t){let{text:n=""}=e,r=!0;function i(){t(1,r=!1)}function o(l){l.target===l.currentTarget&&i()}return s.$$set=l=>{"text"in l&&t(0,n=l.text)},[n,r,i,o]}class It extends xe{constructor(e){super(),qe(this,e,cn,hn,me,{text:0})}}function un(s){let e,t;return e=new It({props:{text:s[2].checkmate[0]+" checkmated "+s[2].checkmate[1]}}),{c(){I(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){T(e,n,r),t=!0},p:le,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function gn(s){let e,t;return e=new It({props:{text:"Stalemate!"}}),{c(){I(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){T(e,n,r),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function mn(s){let e,t="Hexagonal Chess",n,r,i,o="Grayscale",l,m="Wood",q,w,$,O="Default",f,g="Flipped",b,x="Pass and Play",P,C,D,h,u,c,F,V=s[2].checkmate&&un(s),Q=s[2].stalemate&&gn();return h=new fn({}),{c(){e=ne("h1"),e.textContent=t,n=Ce(),r=ne("select"),i=ne("option"),i.textContent=o,l=ne("option"),l.textContent=m,q=Ce(),w=ne("select"),$=ne("option"),$.textContent=O,f=ne("option"),f.textContent=g,b=ne("option"),b.textContent=x,P=Ce(),V&&V.c(),C=Ce(),Q&&Q.c(),D=Ce(),I(h.$$.fragment),this.h()},l(k){e=re(k,"H1",{class:!0,"data-svelte-h":!0}),ke(e)!=="svelte-17uesqs"&&(e.textContent=t),n=Ae(k),r=re(k,"SELECT",{class:!0});var W=ee(r);i=re(W,"OPTION",{"data-svelte-h":!0}),ke(i)!=="svelte-c4ukt8"&&(i.textContent=o),l=re(W,"OPTION",{"data-svelte-h":!0}),ke(l)!=="svelte-1loqtfl"&&(l.textContent=m),W.forEach(L),q=Ae(k),w=re(k,"SELECT",{class:!0});var se=ee(w);$=re(se,"OPTION",{"data-svelte-h":!0}),ke($)!=="svelte-1r2fxli"&&($.textContent=O),f=re(se,"OPTION",{"data-svelte-h":!0}),ke(f)!=="svelte-4nai0v"&&(f.textContent=g),b=re(se,"OPTION",{"data-svelte-h":!0}),ke(b)!=="svelte-ig5h84"&&(b.textContent=x),se.forEach(L),P=Ae(k),V&&V.l(k),C=Ae(k),Q&&Q.l(k),D=Ae(k),M(h.$$.fragment,k),this.h()},h(){S(e,"class","ui"),i.__value=Ke.GRAYSCALE,He(i,i.__value),i.selected=!0,l.__value=Ke.WOOD,He(l,l.__value),S(r,"class","ui"),s[1]===void 0&&De(()=>s[4].call(r)),$.__value=0,He($,$.__value),$.selected=!0,f.__value=1,He(f,f.__value),b.__value=2,He(b,b.__value),S(w,"class","ui"),s[0]===void 0&&De(()=>s[6].call(w))},m(k,W){G(k,e,W),G(k,n,W),G(k,r,W),j(r,i),j(r,l),Re(r,s[1],!0),G(k,q,W),G(k,w,W),j(w,$),j(w,f),j(w,b),Re(w,s[0],!0),G(k,P,W),V&&V.m(k,W),G(k,C,W),Q&&Q.m(k,W),G(k,D,W),T(h,k,W),u=!0,c||(F=[ue(r,"change",s[4]),ue(r,"change",s[5]),ue(w,"change",s[6]),ue(w,"change",s[7])],c=!0)},p(k,[W]){W&2&&Re(r,k[1]),W&1&&Re(w,k[0]),k[2].checkmate&&V.p(k,W)},i(k){u||(_(V),_(Q),_(h.$$.fragment,k),u=!0)},o(k){v(V),v(Q),v(h.$$.fragment,k),u=!1},d(k){k&&(L(e),L(n),L(r),L(q),L(w),L(P),L(C),L(D)),V&&V.d(k),Q&&Q.d(k),E(h,k),c=!1,Qe(F)}}}function pn(s,e,t){let n,r,i,o;Ge(s,ge,f=>t(8,i=f)),Ge(s,Fe,f=>t(9,o=f));let l=o;function m(f){let g=i;switch(f){case 0:{g.flip=!1,g.layout=g.getLayout(We.DEFAULT);break}case 1:{g.flip=!1,g.layout=g.getLayout(We.FLIPPED);break}case 2:{g.flip=!0,g.layout=g.getLayout(We.DEFAULT);break}}ge.set(g)}function q(){n=et(this),t(1,n)}const w=f=>ge.update(g=>{let b=g;return b.theme=n,b});function $(){r=et(this),t(0,r)}const O=f=>{m(r)};return t(1,n=Ke.GRAYSCALE),t(0,r=0),[r,n,l,m,q,w,$,O]}class vn extends xe{constructor(e){super(),qe(this,e,pn,mn,me,{})}}export{vn as component};
