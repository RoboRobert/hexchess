var ft=Object.defineProperty;var ut=(s,t,e)=>t in s?ft(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var N=(s,t,e)=>ut(s,typeof t!="symbol"?t+"":t,e);import{s as ce,a as ct,u as gt,g as pt,b as mt,r as Pe,o as $t,e as st,x as Ye,n as xe,k as je}from"../chunks/scheduler.BeaK0CkN.js";import{S as be,i as Ce,e as X,c as J,a as re,d as E,o as K,g as z,y as ie,k as g,l as m,u as b,v as C,w as q,x as I,z as Ie,t as Be,A as Me,b as We,h as Y,j as Ge,p as le,m as ue,q as Ae,n as ke,s as oe,f as ae,B as Ue,C as ve,D as Ee,E as Le,F as Ve}from"../chunks/index.5FCiXH1Q.js";import{w as ze}from"../chunks/index.BIw2-lZ9.js";function Ne(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}class dt{constructor(t,e,n,r){this.q=t,this.r=e,this.size=n,this.color=r}}class he{constructor(t,e){this.x=t,this.y=e}}const v=class v{constructor(t,e,n){N(this,"q");N(this,"r");N(this,"s");if(this.q=t,this.r=e,this.s=-t-e,Math.round(t+e+this.s)!==0)throw"q + r + s must be 0"}inRadius(t){return Math.abs(this.q)+Math.abs(this.r)+Math.abs(this.s)<=2*t}add(t){return new v(this.q+t.q,this.r+t.r,this.s+t.s)}subtract(t){return new v(this.q-t.q,this.r-t.r,this.s-t.s)}scale(t){return new v(this.q*t,this.r*t,this.s*t)}rotateLeft(){return new v(-this.s,-this.q,-this.r)}rotateRight(){return new v(-this.r,-this.s,-this.q)}static direction(t){return v.directions[t]}neighbor(t){return this.add(v.direction(t))}diagonalNeighbor(t){return this.add(v.diagonals[t])}knightNeighbor(t){return this.add(v.knightMoves[t])}len(){return(Math.abs(this.q)+Math.abs(this.r)+Math.abs(this.s))/2}distance(t){return this.subtract(t).len()}round(){var t=Math.round(this.q),e=Math.round(this.r),n=Math.round(this.s),r=Math.abs(t-this.q),i=Math.abs(e-this.r),o=Math.abs(n-this.s);return r>i&&r>o?t=-e-n:i>o?e=-t-n:n=-t-e,new v(t,e,n)}lerp(t,e){return new v(this.q*(1-e)+t.q*e,this.r*(1-e)+t.r*e,this.s*(1-e)+t.s*e)}linedraw(t){for(var e=this.distance(t),n=new v(this.q+1e-6,this.r+1e-6,this.s-2e-6),r=new v(t.q+1e-6,t.r+1e-6,t.s-2e-6),i=[],o=1/Math.max(e,1),l=0;l<=e;l++)i.push(n.lerp(r,o*l).round());return i}};N(v,"directions",[new v(1,0,-1),new v(1,-1,0),new v(0,-1,1),new v(-1,0,1),new v(-1,1,0),new v(0,1,-1)]),N(v,"diagonals",[new v(2,-1,-1),new v(1,-2,1),new v(-1,-1,2),new v(-2,1,1),new v(-1,2,-1),new v(1,1,-2)]),N(v,"knightMoves",[new v(2,1),new v(1,2),new v(-1,3),new v(-2,3),new v(-3,2),new v(-3,1),new v(-2,-1),new v(-1,-2),new v(1,-3),new v(2,-3),new v(3,-2),new v(3,-1)]);let fe=v;class Qe{constructor(t,e,n,r,i,o,l,p,M){this.f0=t,this.f1=e,this.f2=n,this.f3=r,this.b0=i,this.b1=o,this.b2=l,this.b3=p,this.start_angle=M}}class qe{constructor(t,e,n){this.orientation=t,this.size=e,this.origin=n}hexToPixel(t){var e=this.orientation,n=this.size,r=this.origin,i=(e.f0*t.q+e.f1*t.r)*n.x,o=(e.f2*t.q+e.f3*t.r)*n.y;return new he(i+r.x,o+r.y)}pixelToHex(t){var e=this.orientation,n=this.size,r=this.origin,i=new he((t.x-r.x)/n.x,(t.y-r.y)/n.y),o=e.b0*i.x+e.b1*i.y,l=e.b2*i.x+e.b3*i.y;return new fe(o,l,-o-l)}hexCornerOffset(t){var e=this.orientation,n=this.size,r=2*Math.PI*(e.start_angle-t)/6;return new he(n.x*Math.cos(r),n.y*Math.sin(r))}polygonCorners(t){for(var e=[],n=this.hexToPixel(t),r=0;r<6;r++){var i=this.hexCornerOffset(r);e.push(new he(n.x+i.x,n.y+i.y))}return e}}N(qe,"POINTY",new Qe(Math.sqrt(3),Math.sqrt(3)/2,0,3/2,Math.sqrt(3)/3,-1/3,0,2/3,.5)),N(qe,"FLAT",new Qe(3/2,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,0));var ye=(s=>(s[s.WOOD=0]="WOOD",s[s.GRAYSCALE=1]="GRAYSCALE",s))(ye||{});class Fe{constructor(t,e){N(this,"colorArray",[["#d18b47","#e8ab6f","#ffce9e"],["#9a9a9a","#cdcdcd","#ffffff"]]);if(this.currentIndex=t,this.theme=e,t>2||t<0)throw"color picker must be within range [0,2]"}next(){let t=this.colorArray[this.theme][this.currentIndex];return this.currentIndex++,this.currentIndex>2&&(this.currentIndex=0),t}previous(){let t=this.colorArray[this.theme][this.currentIndex];return this.currentIndex--,this.currentIndex<0&&(this.currentIndex=2),t}}class it{constructor(t,e,n){N(this,"currentColor");N(this,"running");N(this,"stalemate");N(this,"checkmate");this.running=t,this.currentColor=e,this.stalemate=n}}var k=(s=>(s[s.WHITE_PAWN=0]="WHITE_PAWN",s[s.BLACK_PAWN=1]="BLACK_PAWN",s[s.WHITE_ROOK=2]="WHITE_ROOK",s[s.BLACK_ROOK=3]="BLACK_ROOK",s[s.WHITE_KNIGHT=4]="WHITE_KNIGHT",s[s.BLACK_KNIGHT=5]="BLACK_KNIGHT",s[s.WHITE_BISHOP=6]="WHITE_BISHOP",s[s.BLACK_BISHOP=7]="BLACK_BISHOP",s[s.WHITE_QUEEN=8]="WHITE_QUEEN",s[s.BLACK_QUEEN=9]="BLACK_QUEEN",s[s.WHITE_KING=10]="WHITE_KING",s[s.BLACK_KING=11]="BLACK_KING",s))(k||{});const Ke=[[0,0,"svgs/Chess_plt45.svg"],[1,0,"svgs/Chess_pdt45.svg"],[0,1,"svgs/Chess_rlt45.svg"],[1,1,"svgs/Chess_rdt45.svg"],[0,3,"svgs/Chess_nlt45.svg"],[1,3,"svgs/Chess_ndt45.svg"],[0,2,"svgs/Chess_blt45.svg"],[1,2,"svgs/Chess_bdt45.svg"],[0,4,"svgs/Chess_qlt45.svg"],[1,4,"svgs/Chess_qdt45.svg"],[0,5,"svgs/Chess_klt45.svg"],[1,5,"svgs/Chess_kdt45.svg"]];class u{constructor(t,e){N(this,"enumNumber");N(this,"pieceType");N(this,"pieceImage");N(this,"hex");N(this,"color");N(this,"enPassantable");N(this,"firstMove");N(this,"boardMeta",Oe);this.enumNumber=e,this.color=Ke[e][0],this.pieceType=Ke[e][1],this.pieceImage=Ke[e][2],this.enPassantable=!1,this.firstMove=!0,this.hex=new fe(t[0],t[1]),_e.subscribe(n=>{this.boardMeta=n})}static equals(t,e){return t.q===e.q&&t.r===e.r}static cloneArray(t){var e=[];return t.forEach(n=>{e.push(new u([n.hex.q,n.hex.r],n.enumNumber))}),e}static colorToEnum(t){return t.toLowerCase()=="white"?0:1}static enumToColor(t){return t==0?"WHITE":"BLACK"}getEnemyColor(){return this.color==0?1:0}movePiece(t){let e=[];we.subscribe(l=>{e=l});let n=this.getLegalMoves(!1,e).find(l=>u.equals(l.to,t));if(n==null)return!1;e=e.map(l=>(l.enPassantable=!1,l)),this.pieceType==0&&this.hex.distance(n.to)>1&&(this.enPassantable=!0),e=e.filter(l=>!u.equals(l.hex,n.attacking)),this.firstMove=!1,this.hex=n.to;const r=this.getPromotion();r&&(this.pieceImage=r.pieceImage,this.pieceType=r.pieceType,this.enumNumber=r.enumNumber),we.set(e);let i=this.getEnemyColor(),o=new it(!0,u.enumToColor(i),!1);return u.getAllLegalMoves(i).length==0&&(o.running=!1,u.inCheck(i)?o.checkmate=[u.enumToColor(this.color),u.enumToColor(i)]:o.stalemate=!0),Re.set(o),!0}getLegalMoves(t,e){let n=[];if(e?n=e:we.subscribe(o=>{n=o}),!t){let o=ot;if(Re.subscribe(l=>o=l),!o.running||this.color!=u.colorToEnum(o.currentColor))return[]}let r=[];return this.getMoves(n).forEach(o=>{let l=u.cloneArray(n);u.testMove(o,l)&&r.push(o)}),r}static testMove(t,e){let n=e.find(i=>u.equals(i.hex,t.from)),r=[];return e.forEach(i=>{u.equals(i.hex,t.attacking)||r.push(i)}),n.hex=t.to,!u.inCheck(n.color,r)}static inCheck(t,e){let n=[];e?n=e:we.subscribe(o=>{n=o});let r=[];n.forEach(o=>{o.color!=t&&(r=r.concat(o.getMoves(n)))});let i=r.map(o=>o.attacking);return!!n.find(o=>o.color==t&&o.pieceType==5&&i.find(l=>u.equals(l,o.hex)))}static getAllLegalMoves(t,e){let n=[];e?n=e:we.subscribe(i=>{n=i});let r=[];return n.forEach(i=>{i.color===t&&(r=r.concat(i.getLegalMoves(!0)))}),r}getMoves(t){let e=[];switch(this.pieceType){case 4:{e=e.concat(this.diagonalMoves(this.boardMeta.radius,t),this.adjacentMoves(t),this.directionalMoves(t));break}case 5:{e=e.concat(this.diagonalMoves(1,t),this.adjacentMoves(t));break}case 2:{e=e.concat(this.diagonalMoves(this.boardMeta.radius,t));break}case 1:{e=e.concat(this.directionalMoves(t));break}case 3:{e=e.concat(this.knightMoves(t));break}case 0:{e=e.concat(this.pawnMoves(t));break}}return e}static pieceOn(t,e){let n=[];return e?n=e:we.subscribe(r=>{n=r}),n.find(r=>u.equals(r.hex,t))}adjacentMoves(t){let e=[];for(let n=0;n<6;n++){let r=this.hex.neighbor(n),i=u.pieceOn(r,t);r.inRadius(this.boardMeta.radius)&&(i===void 0||i.color!==this.color)&&e.push(new F(this.hex,r,r))}return e}diagonalMoves(t,e){let n=[];for(let r=0;r<6;r++){let i=this.hex.diagonalNeighbor(r);for(let o=0;o<t&&i.inRadius(this.boardMeta.radius);o++){let l=u.pieceOn(i,e);if(l){l.color!==this.color&&n.push(new F(this.hex,i,i));break}n.push(new F(this.hex,i,i)),i=i.diagonalNeighbor(r)}}return n}directionalMoves(t){let e=[];for(let n=0;n<6;n++){let r=this.hex.neighbor(n);for(;r.inRadius(this.boardMeta.radius);){let i=u.pieceOn(r,t);if(i){i.color!==this.color&&e.push(new F(this.hex,r,r));break}e.push(new F(this.hex,r,r)),r=r.neighbor(n)}}return e}knightMoves(t){let e=[];for(let n=0;n<12;n++){let r=this.hex.knightNeighbor(n),i=u.pieceOn(r,t);r.inRadius(this.boardMeta.radius)&&(i===void 0||i.color!==this.color)&&e.push(new F(this.hex,r,r))}return e}pawnMoves(t){var o,l,p,M,d,x,h,w;let e=[],n=[],r=[],i=1;switch(this.firstMove==!0&&(i=2),this.color){case 0:{let $=this.hex;for(let A=0;A<i&&($=$.neighbor(2),!u.pieceOn($,t));A++)e.push(new F(this.hex,$,$));n.push(new F(this.hex,this.hex.neighbor(1),this.hex.neighbor(1)),new F(this.hex,this.hex.neighbor(3),this.hex.neighbor(3))),((o=u.pieceOn(this.hex.neighbor(0),t))==null?void 0:o.color)!=this.color&&((l=u.pieceOn(this.hex.neighbor(0),t))!=null&&l.enPassantable)&&r.push(new F(this.hex,this.hex.neighbor(1),this.hex.neighbor(0))),((p=u.pieceOn(this.hex.neighbor(4),t))==null?void 0:p.color)!=this.color&&((M=u.pieceOn(this.hex.neighbor(4),t))!=null&&M.enPassantable)&&r.push(new F(this.hex,this.hex.neighbor(3),this.hex.neighbor(4)));break}case 1:{let $=this.hex;for(let A=0;A<i&&($=$.neighbor(5),!u.pieceOn($,t));A++)e.push(new F(this.hex,$,$));n.push(new F(this.hex,this.hex.neighbor(0),this.hex.neighbor(0)),new F(this.hex,this.hex.neighbor(4),this.hex.neighbor(4))),((d=u.pieceOn(this.hex.neighbor(1),t))==null?void 0:d.color)!=this.color&&((x=u.pieceOn(this.hex.neighbor(1),t))!=null&&x.enPassantable)&&r.push(new F(this.hex,this.hex.neighbor(0),this.hex.neighbor(1))),((h=u.pieceOn(this.hex.neighbor(3),t))==null?void 0:h.color)!=this.color&&((w=u.pieceOn(this.hex.neighbor(3),t))!=null&&w.enPassantable)&&r.push(new F(this.hex,this.hex.neighbor(4),this.hex.neighbor(3)));break}}return e.filter($=>$.to.inRadius(this.boardMeta.radius)&&u.pieceOn($.to,t)===void 0).concat(n.filter($=>{var A;return $.to.inRadius(this.boardMeta.radius)&&u.pieceOn($.to,t)!=null&&((A=u.pieceOn($.to,t))==null?void 0:A.color)!=this.color})).concat(r)}getPromotion(){if(this.pieceType==0){if(this.color==0&&(this.hex.q+this.hex.r==-5||this.hex.r==-5))return new u([this.hex.q,this.hex.r],8);if(this.color==1&&(this.hex.q+this.hex.r==5||this.hex.r==5))return new u([this.hex.q,this.hex.r],9)}}}class F{constructor(t,e,n){N(this,"from");N(this,"to");N(this,"attacking");this.from=t,this.to=e,this.attacking=n}}class wt{constructor(t,e,n,r){N(this,"layout");N(this,"theme");N(this,"radius");N(this,"hexSize");this.layout=t,this.theme=e,this.radius=n,this.hexSize=r}}const Se=new qe(qe.FLAT,new he(50,50),new he(0,0)),vt=new qe(qe.POINTY,new he(50,50),new he(0,0)),Oe=new wt(Se,ye.GRAYSCALE,5,50),_e=ze(Oe),ot=new it(!0,"WHITE",!1),Re=ze(ot);let xt=[new u([0,-5],k.BLACK_BISHOP),new u([0,-4],k.BLACK_BISHOP),new u([0,-3],k.BLACK_BISHOP),new u([0,5],k.WHITE_BISHOP),new u([0,4],k.WHITE_BISHOP),new u([0,3],k.WHITE_BISHOP),new u([-4,-1],k.BLACK_PAWN),new u([-3,-1],k.BLACK_PAWN),new u([-2,-1],k.BLACK_PAWN),new u([-1,-1],k.BLACK_PAWN),new u([0,-1],k.BLACK_PAWN),new u([1,-2],k.BLACK_PAWN),new u([2,-3],k.BLACK_PAWN),new u([3,-4],k.BLACK_PAWN),new u([4,-5],k.BLACK_PAWN),new u([-4,5],k.WHITE_PAWN),new u([-3,4],k.WHITE_PAWN),new u([-2,3],k.WHITE_PAWN),new u([-1,2],k.WHITE_PAWN),new u([0,1],k.WHITE_PAWN),new u([1,1],k.WHITE_PAWN),new u([2,1],k.WHITE_PAWN),new u([3,1],k.WHITE_PAWN),new u([4,1],k.WHITE_PAWN),new u([-3,-2],k.BLACK_ROOK),new u([3,-5],k.BLACK_ROOK),new u([-3,5],k.WHITE_ROOK),new u([3,2],k.WHITE_ROOK),new u([-2,-3],k.BLACK_KNIGHT),new u([2,-5],k.BLACK_KNIGHT),new u([-2,5],k.WHITE_KNIGHT),new u([2,3],k.WHITE_KNIGHT),new u([-1,-4],k.BLACK_QUEEN),new u([-1,5],k.WHITE_QUEEN),new u([1,-5],k.BLACK_KING),new u([1,4],k.WHITE_KING)];const we=ze(xt);function _t(s){let t,e,n,r;const i=s[7].default,o=ct(i,s,s[6],null);return{c(){t=X("div"),o&&o.c(),this.h()},l(l){t=J(l,"DIV",{class:!0});var p=re(t);o&&o.l(p),p.forEach(E),this.h()},h(){K(t,"class","draggable svelte-kwdgvp")},m(l,p){z(l,t,p),o&&o.m(t,null),s[8](t),e=!0,n||(r=[ie(window,"pointermove",s[3]),ie(window,"pointerup",s[1]),ie(window,"touchend",s[1]),ie(window,"touchmove",s[4]),ie(t,"pointerdown",s[2])],n=!0)},p(l,[p]){o&&o.p&&(!e||p&64)&&gt(o,i,l,l[6],e?mt(i,l[6],p,null):pt(l[6]),null)},i(l){e||(g(o,l),e=!0)},o(l){m(o,l),e=!1},d(l){l&&E(t),o&&o.d(l),s[8](null),n=!1,Pe(r)}}}function bt(s){if(s.classList.contains("possible"))return"possible";if(s.classList.contains("attack"))return"attack"}function Ct(s,t,e){let{$$slots:n={},$$scope:r}=t,{currentPiece:i}=t;_e.subscribe(_=>{});let o,l,p=0,M=0,d=0,x=0,h,w=[],$=[],A=[],B,W,j=!1;$t(()=>{D()});function D(){var S,y;d=h.getBoundingClientRect().width,x=h.getBoundingClientRect().height;let _=document.getElementById(`${i.hex.q},${i.hex.r}`).getBoundingClientRect();p=(S=h.parentElement)==null?void 0:S.getBoundingClientRect().left,M=(y=h.parentElement)==null?void 0:y.getBoundingClientRect().top,h.setAttribute("style",`left:${_.left+_.width/2-d/2-p}px; top:${_.top+_.height/2-x/2-M}px;`)}function ee(_){if(e(0,h.style.cursor="",h),e(0,h.style.zIndex="",h),$.forEach(S=>S.classList.remove("possible")),A.forEach(S=>S.classList.remove("attack")),!!j){if(j=!1,W!=null){W.classList.remove("selection");let S=parseInt(W.getAttribute("data-q")),y=parseInt(W.getAttribute("data-r"));i.movePiece(new fe(S,y)),D(),W=void 0;return}{e(0,h.style.left=o,h),e(0,h.style.top=l,h);return}}}function V(_){var c,O;j=!0,o=h.style.left,l=h.style.top,p=(c=h.parentElement)==null?void 0:c.getBoundingClientRect().left,M=(O=h.parentElement)==null?void 0:O.getBoundingClientRect().top;let S=i.getLegalMoves(!1);S.filter(R=>u.pieceOn(R.attacking)).forEach(R=>A.push(document.getElementById(`${R.to.q},${R.to.r}`))),S.filter(R=>!u.pieceOn(R.attacking)).forEach(R=>$.push(document.getElementById(`${R.to.q},${R.to.r}`))),$.forEach(R=>R.classList.add("possible")),A.forEach(R=>R.classList.add("attack")),U(_.clientX,_.clientY),e(0,h.style.cursor="grabbing",h),e(0,h.style.zIndex="100",h)}function te(_){j&&U(_.clientX,_.clientY)}function Q(_){return j&&U(_.touches[0].clientX,_.touches[0].clientY),!0}function U(_,S){let y=_-d/2-p,L=S-x/2-M;e(0,h.style.left=`${y}px`,h),e(0,h.style.top=`${L}px`,h),console.log(_,S),w=document.elementsFromPoint(_,S),W!=null&&(W.classList.remove("selection"),B&&W.classList.add(B),W=void 0),W=w.find(c=>c.classList.contains("droppable")),W!=null&&(B=bt(W),B&&W.classList.remove(B),W.classList.add("selection"))}function Z(_){st[_?"unshift":"push"](()=>{h=_,e(0,h)})}return s.$$set=_=>{"currentPiece"in _&&e(5,i=_.currentPiece),"$$scope"in _&&e(6,r=_.$$scope)},[h,ee,V,te,Q,i,r,n,Z]}class qt extends be{constructor(t){super(),Ce(this,t,Ct,_t,ce,{currentPiece:5})}}function It(s){let t,e;return{c(){t=X("img"),this.h()},l(n){t=J(n,"IMG",{class:!0,draggable:!0,src:!0}),this.h()},h(){K(t,"class","piece svelte-mwpcpw"),K(t,"draggable","false"),Ye(t.src,e=s[0].pieceImage)||K(t,"src",e)},m(n,r){z(n,t,r)},p(n,r){r&1&&!Ye(t.src,e=n[0].pieceImage)&&K(t,"src",e)},d(n){n&&E(t)}}}function Mt(s){let t,e;return t=new qt({props:{currentPiece:s[0],$$slots:{default:[It]},$$scope:{ctx:s}}}),{c(){b(t.$$.fragment)},l(n){C(t.$$.fragment,n)},m(n,r){q(t,n,r),e=!0},p(n,[r]){const i={};r&1&&(i.currentPiece=n[0]),r&3&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i(n){e||(g(t.$$.fragment,n),e=!0)},o(n){m(t.$$.fragment,n),e=!1},d(n){I(t,n)}}}function At(s,t,e){let{piece:n}=t;return s.$$set=r=>{"piece"in r&&e(0,n=r.piece)},[n]}class kt extends be{constructor(t){super(),Ce(this,t,At,Mt,ce,{piece:0})}}function yt(s){let t,e,n;return{c(){t=Ie("g"),e=Ie("text"),n=Be(s[0]),this.h()},l(r){t=Me(r,"g",{transform:!0});var i=re(t);e=Me(i,"text",{x:!0,y:!0,class:!0});var o=re(e);n=We(o,s[0]),o.forEach(E),i.forEach(E),this.h()},h(){K(e,"x",-15*s[2]-12),K(e,"y",-15*s[3]),K(e,"class","coordinate"),K(t,"transform","translate("+s[1].x+", "+s[1].y+")")},m(r,i){z(r,t,i),Y(t,e),Y(e,n)},p(r,[i]){i&1&&Ge(n,r[0])},i:xe,o:xe,d(r){r&&E(t)}}}function Ot(s,t,e){let{q:n}=t,{r}=t,{text:i}=t,o=Oe;_e.subscribe(h=>{o=h});const l=new fe(n,r),p=o.layout.hexToPixel(l),M=Math.sqrt(p.x*p.x+p.y*p.y),d=p.x/M,x=p.y/M;return o.layout.size.x,s.$$set=h=>{"q"in h&&e(4,n=h.q),"r"in h&&e(5,r=h.r),"text"in h&&e(0,i=h.text)},[i,p,d,x,n,r]}class T extends be{constructor(t){super(),Ce(this,t,Ot,yt,ce,{q:4,r:5,text:0})}}function Tt(s){let t,e,n,r,i;return{c(){t=Ie("g"),e=Ie("polygon"),this.h()},l(o){t=Me(o,"g",{transform:!0});var l=re(t);e=Me(l,"polygon",{id:!0,"data-q":!0,"data-r":!0,class:!0,points:!0,style:!0}),re(e).forEach(E),l.forEach(E),this.h()},h(){K(e,"id",n=s[0]+","+s[1]),K(e,"data-q",r=s[0]+","),K(e,"data-r",i=s[1]+","),K(e,"class","hexagon droppable"),K(e,"points",s[4]),le(e,"fill",s[2]),le(e,"stroke","black"),le(e,"stroke-width","2px"),K(t,"transform","translate("+s[3].x+", "+s[3].y+")")},m(o,l){z(o,t,l),Y(t,e)},p(o,[l]){l&3&&n!==(n=o[0]+","+o[1])&&K(e,"id",n),l&1&&r!==(r=o[0]+",")&&K(e,"data-q",r),l&2&&i!==(i=o[1]+",")&&K(e,"data-r",i),l&4&&le(e,"fill",o[2])},i:xe,o:xe,d(o){o&&E(t)}}}function Et(s){var t="";return s.forEach(e=>{t=t.concat(`${e.x},${e.y} `)}),t}function Lt(s,t,e){let{q:n}=t,{r}=t,{color:i}=t,o=Oe;_e.subscribe(h=>{o=h});const l=new fe(0,0),p=o.layout.polygonCorners(l),M=new fe(n,r),d=o.layout.hexToPixel(M);o.layout.size.x;const x=Et(p);return s.$$set=h=>{"q"in h&&e(0,n=h.q),"r"in h&&e(1,r=h.r),"color"in h&&e(2,i=h.color)},[n,r,i,d,x]}class Nt extends be{constructor(t){super(),Ce(this,t,Lt,Tt,ce,{q:0,r:1,color:2})}}function Xe(s,t,e){const n=s.slice();return n[9]=t[e],n}function Je(s,t,e){const n=s.slice();return n[12]=t[e].q,n[13]=t[e].r,n[14]=t[e].color,n}function Ze(s){let t,e;return t=new Nt({props:{q:s[12],r:s[13],color:s[14]}}),{c(){b(t.$$.fragment)},l(n){C(t.$$.fragment,n)},m(n,r){q(t,n,r),e=!0},p(n,r){const i={};r&2&&(i.q=n[12]),r&2&&(i.r=n[13]),r&2&&(i.color=n[14]),t.$set(i)},i(n){e||(g(t.$$.fragment,n),e=!0)},o(n){m(t.$$.fragment,n),e=!1},d(n){I(t,n)}}}function De(s){let t,e;return t=new kt({props:{piece:s[9]}}),{c(){b(t.$$.fragment)},l(n){C(t.$$.fragment,n)},m(n,r){q(t,n,r),e=!0},p(n,r){const i={};r&4&&(i.piece=n[9]),t.$set(i)},i(n){e||(g(t.$$.fragment,n),e=!0)},o(n){m(t.$$.fragment,n),e=!1},d(n){I(t,n)}}}function et(s){let t,e,n,r,i,o,l,p,M,d,x,h,w,$,A,B,W,j,D,ee,V,te,Q,U,Z,_,S,y,L,c,O,R,se,ge,pe,me,He,Te,$e=Ne(s[1]),P=[];for(let a=0;a<$e.length;a+=1)P[a]=Ze(Je(s,$e,a));const lt=a=>m(P[a],1,1,()=>{P[a]=null});r=new T({props:{q:-5,r:6,text:"a"}}),i=new T({props:{q:-4,r:6,text:"b"}}),o=new T({props:{q:-3,r:6,text:"c"}}),l=new T({props:{q:-2,r:6,text:"d"}}),p=new T({props:{q:-1,r:6,text:"e"}}),M=new T({props:{q:0,r:6,text:"f"}}),d=new T({props:{q:1,r:5,text:"g"}}),x=new T({props:{q:2,r:4,text:"h"}}),h=new T({props:{q:3,r:3,text:"i"}}),w=new T({props:{q:4,r:2,text:"k"}}),$=new T({props:{q:5,r:1,text:"l"}}),A=new T({props:{q:-6,r:5,text:"1"}}),B=new T({props:{q:-6,r:4,text:"2"}}),W=new T({props:{q:-6,r:3,text:"3"}}),j=new T({props:{q:-6,r:2,text:"4"}}),D=new T({props:{q:-6,r:1,text:"5"}}),ee=new T({props:{q:-6,r:0,text:"6"}}),V=new T({props:{q:-5,r:-1,text:"7"}}),te=new T({props:{q:-4,r:-2,text:"8"}}),Q=new T({props:{q:-3,r:-3,text:"9"}}),U=new T({props:{q:-2,r:-4,text:"10"}}),Z=new T({props:{q:-1,r:-5,text:"11"}}),_=new T({props:{q:6,r:-1,text:"1"}}),S=new T({props:{q:6,r:-2,text:"2"}}),y=new T({props:{q:6,r:-3,text:"3"}}),L=new T({props:{q:6,r:-4,text:"4"}}),c=new T({props:{q:6,r:-5,text:"5"}}),O=new T({props:{q:6,r:-6,text:"6"}}),R=new T({props:{q:5,r:-6,text:"7"}}),se=new T({props:{q:4,r:-6,text:"8"}}),ge=new T({props:{q:3,r:-6,text:"9"}}),pe=new T({props:{q:2,r:-6,text:"10"}}),me=new T({props:{q:1,r:-6,text:"11"}});let de=Ne(s[2]),G=[];for(let a=0;a<de.length;a+=1)G[a]=De(Xe(s,de,a));const ht=a=>m(G[a],1,1,()=>{G[a]=null});return{c(){t=X("div"),e=Ie("svg");for(let a=0;a<P.length;a+=1)P[a].c();n=ue(),b(r.$$.fragment),b(i.$$.fragment),b(o.$$.fragment),b(l.$$.fragment),b(p.$$.fragment),b(M.$$.fragment),b(d.$$.fragment),b(x.$$.fragment),b(h.$$.fragment),b(w.$$.fragment),b($.$$.fragment),b(A.$$.fragment),b(B.$$.fragment),b(W.$$.fragment),b(j.$$.fragment),b(D.$$.fragment),b(ee.$$.fragment),b(V.$$.fragment),b(te.$$.fragment),b(Q.$$.fragment),b(U.$$.fragment),b(Z.$$.fragment),b(_.$$.fragment),b(S.$$.fragment),b(y.$$.fragment),b(L.$$.fragment),b(c.$$.fragment),b(O.$$.fragment),b(R.$$.fragment),b(se.$$.fragment),b(ge.$$.fragment),b(pe.$$.fragment),b(me.$$.fragment),He=oe();for(let a=0;a<G.length;a+=1)G[a].c();this.h()},l(a){t=J(a,"DIV",{class:!0});var H=re(t);e=Me(H,"svg",{overflow:!0,viewBox:!0,width:!0,height:!0});var f=re(e);for(let ne=0;ne<P.length;ne+=1)P[ne].l(f);n=ue(),C(r.$$.fragment,f),C(i.$$.fragment,f),C(o.$$.fragment,f),C(l.$$.fragment,f),C(p.$$.fragment,f),C(M.$$.fragment,f),C(d.$$.fragment,f),C(x.$$.fragment,f),C(h.$$.fragment,f),C(w.$$.fragment,f),C($.$$.fragment,f),C(A.$$.fragment,f),C(B.$$.fragment,f),C(W.$$.fragment,f),C(j.$$.fragment,f),C(D.$$.fragment,f),C(ee.$$.fragment,f),C(V.$$.fragment,f),C(te.$$.fragment,f),C(Q.$$.fragment,f),C(U.$$.fragment,f),C(Z.$$.fragment,f),C(_.$$.fragment,f),C(S.$$.fragment,f),C(y.$$.fragment,f),C(L.$$.fragment,f),C(c.$$.fragment,f),C(O.$$.fragment,f),C(R.$$.fragment,f),C(se.$$.fragment,f),C(ge.$$.fragment,f),C(pe.$$.fragment,f),C(me.$$.fragment,f),f.forEach(E),He=ae(H);for(let ne=0;ne<G.length;ne+=1)G[ne].l(H);H.forEach(E),this.h()},h(){K(e,"overflow","visible"),K(e,"viewBox",s[5]),K(e,"width",s[4].x),K(e,"height",s[4].y),K(t,"class","board svelte-14rtn39")},m(a,H){z(a,t,H),Y(t,e);for(let f=0;f<P.length;f+=1)P[f]&&P[f].m(e,null);Y(e,n),q(r,e,null),q(i,e,null),q(o,e,null),q(l,e,null),q(p,e,null),q(M,e,null),q(d,e,null),q(x,e,null),q(h,e,null),q(w,e,null),q($,e,null),q(A,e,null),q(B,e,null),q(W,e,null),q(j,e,null),q(D,e,null),q(ee,e,null),q(V,e,null),q(te,e,null),q(Q,e,null),q(U,e,null),q(Z,e,null),q(_,e,null),q(S,e,null),q(y,e,null),q(L,e,null),q(c,e,null),q(O,e,null),q(R,e,null),q(se,e,null),q(ge,e,null),q(pe,e,null),q(me,e,null),Y(t,He);for(let f=0;f<G.length;f+=1)G[f]&&G[f].m(t,null);s[6](t),Te=!0},p(a,H){if(H&2){$e=Ne(a[1]);let f;for(f=0;f<$e.length;f+=1){const ne=Je(a,$e,f);P[f]?(P[f].p(ne,H),g(P[f],1)):(P[f]=Ze(ne),P[f].c(),g(P[f],1),P[f].m(e,n))}for(Ae(),f=$e.length;f<P.length;f+=1)lt(f);ke()}if(H&4){de=Ne(a[2]);let f;for(f=0;f<de.length;f+=1){const ne=Xe(a,de,f);G[f]?(G[f].p(ne,H),g(G[f],1)):(G[f]=De(ne),G[f].c(),g(G[f],1),G[f].m(t,null))}for(Ae(),f=de.length;f<G.length;f+=1)ht(f);ke()}},i(a){if(!Te){for(let H=0;H<$e.length;H+=1)g(P[H]);g(r.$$.fragment,a),g(i.$$.fragment,a),g(o.$$.fragment,a),g(l.$$.fragment,a),g(p.$$.fragment,a),g(M.$$.fragment,a),g(d.$$.fragment,a),g(x.$$.fragment,a),g(h.$$.fragment,a),g(w.$$.fragment,a),g($.$$.fragment,a),g(A.$$.fragment,a),g(B.$$.fragment,a),g(W.$$.fragment,a),g(j.$$.fragment,a),g(D.$$.fragment,a),g(ee.$$.fragment,a),g(V.$$.fragment,a),g(te.$$.fragment,a),g(Q.$$.fragment,a),g(U.$$.fragment,a),g(Z.$$.fragment,a),g(_.$$.fragment,a),g(S.$$.fragment,a),g(y.$$.fragment,a),g(L.$$.fragment,a),g(c.$$.fragment,a),g(O.$$.fragment,a),g(R.$$.fragment,a),g(se.$$.fragment,a),g(ge.$$.fragment,a),g(pe.$$.fragment,a),g(me.$$.fragment,a);for(let H=0;H<de.length;H+=1)g(G[H]);Te=!0}},o(a){P=P.filter(Boolean);for(let H=0;H<P.length;H+=1)m(P[H]);m(r.$$.fragment,a),m(i.$$.fragment,a),m(o.$$.fragment,a),m(l.$$.fragment,a),m(p.$$.fragment,a),m(M.$$.fragment,a),m(d.$$.fragment,a),m(x.$$.fragment,a),m(h.$$.fragment,a),m(w.$$.fragment,a),m($.$$.fragment,a),m(A.$$.fragment,a),m(B.$$.fragment,a),m(W.$$.fragment,a),m(j.$$.fragment,a),m(D.$$.fragment,a),m(ee.$$.fragment,a),m(V.$$.fragment,a),m(te.$$.fragment,a),m(Q.$$.fragment,a),m(U.$$.fragment,a),m(Z.$$.fragment,a),m(_.$$.fragment,a),m(S.$$.fragment,a),m(y.$$.fragment,a),m(L.$$.fragment,a),m(c.$$.fragment,a),m(O.$$.fragment,a),m(R.$$.fragment,a),m(se.$$.fragment,a),m(ge.$$.fragment,a),m(pe.$$.fragment,a),m(me.$$.fragment,a),G=G.filter(Boolean);for(let H=0;H<G.length;H+=1)m(G[H]);Te=!1},d(a){a&&E(t),Ue(P,a),I(r),I(i),I(o),I(l),I(p),I(M),I(d),I(x),I(h),I(w),I($),I(A),I(B),I(W),I(j),I(D),I(ee),I(V),I(te),I(Q),I(U),I(Z),I(_),I(S),I(y),I(L),I(c),I(O),I(R),I(se),I(ge),I(pe),I(me),Ue(G,a),s[6](null)}}}function Bt(s){let t=[s[0].theme,s[2]],e,n,r=et(s);return{c(){r.c(),e=ue()},l(i){r.l(i),e=ue()},m(i,o){r.m(i,o),z(i,e,o),n=!0},p(i,[o]){o&5&&ce(t,t=[i[0].theme,i[2]])?(Ae(),m(r,1,1,xe),ke(),r=et(i),r.c(),g(r,1),r.m(e.parentNode,e)):r.p(i,o)},i(i){n||(g(r),n=!0)},o(i){m(r),n=!1},d(i){i&&E(e),r.d(i)}}}function Wt(s,t,e){let n=Oe;_e.subscribe(h=>{e(0,n=h),l()});const r=n.radius*2+1;var i=[],o=[];we.subscribe(h=>{e(2,o=h)});function l(){e(1,i=[]);let h=new Fe(0,n.theme);for(let w=n.radius;w>=n.radius*-1;w--){let $=new Fe(h.currentIndex,h.theme);for(let A=n.radius;A>=n.radius*-1;A--)new fe(w,A).inRadius(n.radius)&&i.push(new dt(w,A,n.hexSize,$.next()));w>0?h.next():h.previous()}}l();const p=new he(n.hexSize*(3/2)*r,n.hexSize*Math.sqrt(3)*r),M=`${p.x/-2} ${p.y/-2} ${p.x} ${p.y}`;let d;function x(h){st[h?"unshift":"push"](()=>{d=h,e(3,d)})}return[n,i,o,d,p,M,x]}class Ht extends be{constructor(t){super(),Ce(this,t,Wt,Bt,ce,{})}}function tt(s){let t,e,n,r="Ã—",i,o,l="GAME OVER!",p,M,d,x,h;return{c(){t=X("div"),e=X("div"),n=X("span"),n.textContent=r,i=oe(),o=X("p"),o.textContent=l,p=oe(),M=X("p"),d=Be(s[0]),this.h()},l(w){t=J(w,"DIV",{class:!0});var $=re(t);e=J($,"DIV",{class:!0});var A=re(e);n=J(A,"SPAN",{class:!0,"data-svelte-h":!0}),ve(n)!=="svelte-ty2x6x"&&(n.textContent=r),i=ae(A),o=J(A,"P",{"data-svelte-h":!0}),ve(o)!=="svelte-av41o5"&&(o.textContent=l),p=ae(A),M=J(A,"P",{});var B=re(M);d=We(B,s[0]),B.forEach(E),A.forEach(E),$.forEach(E),this.h()},h(){K(n,"class","close-button svelte-p4vkuh"),K(e,"class","popup-content svelte-p4vkuh"),K(t,"class","popup svelte-p4vkuh")},m(w,$){z(w,t,$),Y(t,e),Y(e,n),Y(e,i),Y(e,o),Y(e,p),Y(e,M),Y(M,d),x||(h=[ie(n,"click",s[2]),ie(t,"click",s[3])],x=!0)},p(w,$){$&1&&Ge(d,w[0])},d(w){w&&E(t),x=!1,Pe(h)}}}function Kt(s){let t,e=s[1]&&tt(s);return{c(){e&&e.c(),t=ue()},l(n){e&&e.l(n),t=ue()},m(n,r){e&&e.m(n,r),z(n,t,r)},p(n,[r]){n[1]?e?e.p(n,r):(e=tt(n),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:xe,o:xe,d(n){n&&E(t),e&&e.d(n)}}}function St(s,t,e){let{text:n=""}=t,r=!0;function i(){e(1,r=!1)}function o(l){l.target===l.currentTarget&&i()}return s.$$set=l=>{"text"in l&&e(0,n=l.text)},[n,r,i,o]}class at extends be{constructor(t){super(),Ce(this,t,St,Kt,ce,{text:0})}}function nt(s){let t,e;return t=new at({props:{text:s[0].checkmate[0]+" checkmated "+s[0].checkmate[1]}}),{c(){b(t.$$.fragment)},l(n){C(t.$$.fragment,n)},m(n,r){q(t,n,r),e=!0},p(n,r){const i={};r&1&&(i.text=n[0].checkmate[0]+" checkmated "+n[0].checkmate[1]),t.$set(i)},i(n){e||(g(t.$$.fragment,n),e=!0)},o(n){m(t.$$.fragment,n),e=!1},d(n){I(t,n)}}}function rt(s){let t,e;return t=new at({props:{text:"Stalemate!"}}),{c(){b(t.$$.fragment)},l(n){C(t.$$.fragment,n)},m(n,r){q(t,n,r),e=!0},i(n){e||(g(t.$$.fragment,n),e=!0)},o(n){m(t.$$.fragment,n),e=!1},d(n){I(t,n)}}}function Rt(s){let t,e="Hexagonal Chess",n,r,i,o="Grayscale",l,p="Wood",M,d,x,h="Flat",w,$="Pointy",A,B,W=s[0].currentColor+"",j,D,ee,V,te,Q,U,Z,_,S;V=new Ht({});let y=s[0].checkmate&&nt(s),L=s[0].stalemate&&rt();return{c(){t=X("h1"),t.textContent=e,n=oe(),r=X("select"),i=X("option"),i.textContent=o,l=X("option"),l.textContent=p,M=oe(),d=X("select"),x=X("option"),x.textContent=h,w=X("option"),w.textContent=$,A=oe(),B=X("h2"),j=Be(W),D=Be(" TO MOVE"),ee=oe(),b(V.$$.fragment),te=oe(),y&&y.c(),Q=oe(),L&&L.c(),U=ue(),this.h()},l(c){t=J(c,"H1",{class:!0,"data-svelte-h":!0}),ve(t)!=="svelte-1bl0xm5"&&(t.textContent=e),n=ae(c),r=J(c,"SELECT",{style:!0});var O=re(r);i=J(O,"OPTION",{"data-svelte-h":!0}),ve(i)!=="svelte-c4ukt8"&&(i.textContent=o),l=J(O,"OPTION",{"data-svelte-h":!0}),ve(l)!=="svelte-1loqtfl"&&(l.textContent=p),O.forEach(E),M=ae(c),d=J(c,"SELECT",{style:!0});var R=re(d);x=J(R,"OPTION",{"data-svelte-h":!0}),ve(x)!=="svelte-itmjg8"&&(x.textContent=h),w=J(R,"OPTION",{"data-svelte-h":!0}),ve(w)!=="svelte-wt3xu4"&&(w.textContent=$),R.forEach(E),A=ae(c),B=J(c,"H2",{style:!0});var se=re(B);j=We(se,W),D=We(se," TO MOVE"),se.forEach(E),ee=ae(c),C(V.$$.fragment,c),te=ae(c),y&&y.l(c),Q=ae(c),L&&L.l(c),U=ue(),this.h()},h(){K(t,"class","header"),i.__value=ye.GRAYSCALE,Ee(i,i.__value),i.selected=!0,l.__value=ye.WOOD,Ee(l,l.__value),le(r,"margin","10px"),le(r,"margin-bottom","20px"),s[2]===void 0&&je(()=>s[4].call(r)),x.__value=0,Ee(x,x.__value),x.selected=!0,w.__value=1,Ee(w,w.__value),le(d,"margin","10px"),le(d,"margin-bottom","20px"),s[1]===void 0&&je(()=>s[6].call(d)),le(B,"margin-bottom","20px")},m(c,O){z(c,t,O),z(c,n,O),z(c,r,O),Y(r,i),Y(r,l),Le(r,s[2],!0),z(c,M,O),z(c,d,O),Y(d,x),Y(d,w),Le(d,s[1],!0),z(c,A,O),z(c,B,O),Y(B,j),Y(B,D),z(c,ee,O),q(V,c,O),z(c,te,O),y&&y.m(c,O),z(c,Q,O),L&&L.m(c,O),z(c,U,O),Z=!0,_||(S=[ie(r,"change",s[4]),ie(r,"change",s[5]),ie(d,"change",s[6]),ie(d,"change",s[7])],_=!0)},p(c,[O]){O&4&&Le(r,c[2]),O&2&&Le(d,c[1]),(!Z||O&1)&&W!==(W=c[0].currentColor+"")&&Ge(j,W),c[0].checkmate?y?(y.p(c,O),O&1&&g(y,1)):(y=nt(c),y.c(),g(y,1),y.m(Q.parentNode,Q)):y&&(Ae(),m(y,1,1,()=>{y=null}),ke()),c[0].stalemate?L?O&1&&g(L,1):(L=rt(),L.c(),g(L,1),L.m(U.parentNode,U)):L&&(Ae(),m(L,1,1,()=>{L=null}),ke())},i(c){Z||(g(V.$$.fragment,c),g(y),g(L),Z=!0)},o(c){m(V.$$.fragment,c),m(y),m(L),Z=!1},d(c){c&&(E(t),E(n),E(r),E(M),E(d),E(A),E(B),E(ee),E(te),E(Q),E(U)),I(V,c),y&&y.d(c),L&&L.d(c),_=!1,Pe(S)}}}function Pt(s,t,e){let n,r,i;Re.subscribe(x=>e(0,i=x));function o(x){let h=Se;switch(x){case 0:{h=Se;break}case 1:{h=vt;break}}_e.update(w=>{let $=w;return $.layout=h,$})}function l(){n=Ve(this),e(2,n)}const p=x=>_e.update(h=>{let w=h;return w.theme=n,w});function M(){r=Ve(this),e(1,r)}const d=x=>{o(r)};return e(2,n=ye.GRAYSCALE),e(1,r=0),[i,r,n,o,l,p,M,d]}class Ut extends be{constructor(t){super(),Ce(this,t,Pt,Rt,ce,{})}}export{Ut as component};
