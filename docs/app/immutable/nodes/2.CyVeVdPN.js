var Nt=Object.defineProperty;var St=(s,e,t)=>e in s?Nt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var y=(s,e,t)=>St(s,typeof e!="symbol"?e+"":e,t);import{s as me,a as Lt,u as Bt,g as Ht,b as yt,r as je,o as Kt,e as Wt,x as Ze,n as he,k as De}from"../chunks/scheduler.BeaK0CkN.js";import{S as xe,i as qe,e as ee,c as te,a as Z,d as S,o as H,g as G,y as ie,k as p,l as w,u as M,v as E,w as T,x as O,p as P,z as $e,m as j,A as de,h as X,t as xt,b as qt,j as kt,q as ue,n as ge,s as ke,f as Ce,B as Be,C as Se,D as Re,E as Pe,F as et}from"../chunks/index.5FCiXH1Q.js";import{w as We}from"../chunks/index.BIw2-lZ9.js";function fe(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}class be{constructor(e,t){this.x=e,this.y=t}}const N=class N{constructor(e,t,n){y(this,"q");y(this,"r");y(this,"s");if(this.q=e,this.r=t,this.s=-e-t,Math.round(e+t+this.s)!==0)throw"q + r + s must be 0"}inRadius(e){return Math.abs(this.q)+Math.abs(this.r)+Math.abs(this.s)<=2*e}add(e){return new N(this.q+e.q,this.r+e.r,this.s+e.s)}subtract(e){return new N(this.q-e.q,this.r-e.r,this.s-e.s)}scale(e){return new N(this.q*e,this.r*e,this.s*e)}rotateLeft(){return new N(-this.s,-this.q,-this.r)}rotateRight(){return new N(-this.r,-this.s,-this.q)}static direction(e){return N.directions[e]}neighbor(e){return this.add(N.direction(e))}diagonalNeighbor(e){return this.add(N.diagonals[e])}knightNeighbor(e){return this.add(N.knightMoves[e])}len(){return(Math.abs(this.q)+Math.abs(this.r)+Math.abs(this.s))/2}distance(e){return this.subtract(e).len()}round(){var e=Math.round(this.q),t=Math.round(this.r),n=Math.round(this.s),r=Math.abs(e-this.q),i=Math.abs(t-this.r),o=Math.abs(n-this.s);return r>i&&r>o?e=-t-n:i>o?t=-e-n:n=-e-t,new N(e,t,n)}lerp(e,t){return new N(this.q*(1-t)+e.q*t,this.r*(1-t)+e.r*t,this.s*(1-t)+e.s*t)}linedraw(e){for(var t=this.distance(e),n=new N(this.q+1e-6,this.r+1e-6,this.s-2e-6),r=new N(e.q+1e-6,e.r+1e-6,e.s-2e-6),i=[],o=1/Math.max(t,1),f=0;f<=t;f++)i.push(n.lerp(r,o*f).round());return i}};y(N,"directions",[new N(1,0,-1),new N(1,-1,0),new N(0,-1,1),new N(-1,0,1),new N(-1,1,0),new N(0,1,-1)]),y(N,"diagonals",[new N(2,-1,-1),new N(1,-2,1),new N(-1,-1,2),new N(-2,1,1),new N(-1,2,-1),new N(1,1,-2)]),y(N,"knightMoves",[new N(2,1),new N(1,2),new N(-1,3),new N(-2,3),new N(-3,2),new N(-3,1),new N(-2,-1),new N(-1,-2),new N(1,-3),new N(2,-3),new N(3,-2),new N(3,-1)]);let oe=N;class Fe{constructor(e,t,n,r,i,o,f,d,I){this.f0=e,this.f1=t,this.f2=n,this.f3=r,this.b0=i,this.b1=o,this.b2=f,this.b3=d,this.start_angle=I}}class Le{constructor(e,t,n){this.orientation=e,this.size=t,this.origin=n}hexToPixel(e){var t=this.orientation,n=this.size,r=this.origin,i=(t.f0*e.q+t.f1*e.r)*n.x,o=(t.f2*e.q+t.f3*e.r)*n.y;return new be(i+r.x,o+r.y)}pixelToHex(e){var t=this.orientation,n=this.size,r=this.origin,i=new be((e.x-r.x)/n.x,(e.y-r.y)/n.y),o=t.b0*i.x+t.b1*i.y,f=t.b2*i.x+t.b3*i.y;return new oe(o,f,-o-f)}hexCornerOffset(e){var t=this.orientation,n=this.size,r=2*Math.PI*(t.start_angle-e)/6;return new be(n.x*Math.cos(r),n.y*Math.sin(r))}polygonCorners(e){for(var t=[],n=this.hexToPixel(e),r=0;r<6;r++){var i=this.hexCornerOffset(r);t.push(new be(n.x+i.x,n.y+i.y))}return t}}y(Le,"POINTY",new Fe(Math.sqrt(3),Math.sqrt(3)/2,0,3/2,Math.sqrt(3)/3,-1/3,0,2/3,.5)),y(Le,"FLAT",new Fe(3/2,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,0)),y(Le,"FLIPPED",new Fe(-3/2,0,-Math.sqrt(3)/2,-Math.sqrt(3),-2/3,0,1/3,-Math.sqrt(3)/3,0));var Ke=(s=>(s[s.WOOD=0]="WOOD",s[s.GRAYSCALE=1]="GRAYSCALE",s))(Ke||{});class tt{constructor(e,t){y(this,"colorArray",[["#d18b47","#e8ab6f","#ffce9e"],["#9a9a9a","#cdcdcd","#ffffff"]]);if(this.currentIndex=e,this.theme=t,e>this.colorArray.length||e<0)throw`color picker must be within range [0,${this.colorArray.length}]`}next(){let e=this.colorArray[this.theme][this.currentIndex];return this.currentIndex++,this.currentIndex>this.colorArray.length&&(this.currentIndex=0),e}previous(){let e=this.colorArray[this.theme][this.currentIndex];return this.currentIndex--,this.currentIndex<0&&(this.currentIndex=this.colorArray.length),e}}const zt=["p","r","b","n","q","k"];class Ge{static hexToColumn(e){let t=e.q+102;return t>=106&&(t+=1),String.fromCharCode(t)}static hexToRow(e){return 6-Math.max(e.q+e.r,e.r)}static hexToNotation(e){let t=e.q+102;t>=106&&(t+=1);let n=String.fromCharCode(t),r=6-Math.max(e.q+e.r,e.r);return n+`${r}`}static moveToNotation(e,t,n){let r="",i=t.pieceType==At.PAWN;return i||(r+=zt[t.pieceType]),$.pieceOn(e.attacking,n)&&(i&&(r+=Ge.hexToColumn(e.from)),r+="x"),r+=Ge.hexToNotation(e.to),r}}class Ct{constructor(e,t,n){y(this,"currentColor");y(this,"running");y(this,"stalemate");y(this,"selectedPiece");y(this,"checkmate");this.running=e,this.currentColor=t,this.stalemate=n}}var At=(s=>(s[s.PAWN=0]="PAWN",s[s.ROOK=1]="ROOK",s[s.BISHOP=2]="BISHOP",s[s.KNIGHT=3]="KNIGHT",s[s.QUEEN=4]="QUEEN",s[s.KING=5]="KING",s))(At||{}),B=(s=>(s[s.WHITE_PAWN=0]="WHITE_PAWN",s[s.BLACK_PAWN=1]="BLACK_PAWN",s[s.WHITE_ROOK=2]="WHITE_ROOK",s[s.BLACK_ROOK=3]="BLACK_ROOK",s[s.WHITE_KNIGHT=4]="WHITE_KNIGHT",s[s.BLACK_KNIGHT=5]="BLACK_KNIGHT",s[s.WHITE_BISHOP=6]="WHITE_BISHOP",s[s.BLACK_BISHOP=7]="BLACK_BISHOP",s[s.WHITE_QUEEN=8]="WHITE_QUEEN",s[s.BLACK_QUEEN=9]="BLACK_QUEEN",s[s.WHITE_KING=10]="WHITE_KING",s[s.BLACK_KING=11]="BLACK_KING",s))(B||{});const Ye=[[0,0,"svgs/Chess_plt45.svg"],[1,0,"svgs/Chess_pdt45.svg"],[0,1,"svgs/Chess_rlt45.svg"],[1,1,"svgs/Chess_rdt45.svg"],[0,3,"svgs/Chess_nlt45.svg"],[1,3,"svgs/Chess_ndt45.svg"],[0,2,"svgs/Chess_blt45.svg"],[1,2,"svgs/Chess_bdt45.svg"],[0,4,"svgs/Chess_qlt45.svg"],[1,4,"svgs/Chess_qdt45.svg"],[0,5,"svgs/Chess_klt45.svg"],[1,5,"svgs/Chess_kdt45.svg"]];class ${constructor(e,t){y(this,"enumNumber");y(this,"pieceType");y(this,"pieceImage");y(this,"hex");y(this,"color");y(this,"enPassantable");y(this,"firstMove");y(this,"boardMeta",Ae);this.enumNumber=t,this.color=Ye[t][0],this.pieceType=Ye[t][1],this.pieceImage=Ye[t][2],this.enPassantable=!1,this.firstMove=!0,this.hex=new oe(e[0],e[1]),_e.subscribe(n=>{this.boardMeta=n})}static equals(e,t){return e.q===t.q&&e.r===t.r}static cloneArray(e){var t=[];return e.forEach(n=>{t.push(new $([n.hex.q,n.hex.r],n.enumNumber))}),t}static colorToEnum(e){return e.toLowerCase()=="white"?0:1}static enumToColor(e){return e==0?"WHITE":"BLACK"}getEnemyColor(){return this.color==0?1:0}movePiece(e){let t=[];Ne.subscribe(f=>{t=f});let n=this.getLegalMoves(!1,t).find(f=>$.equals(f.to,e));if(n==null)return!1;console.log(Ge.moveToNotation(n,this,t)),t=t.map(f=>(f.enPassantable=!1,f)),this.pieceType==0&&this.hex.distance(n.to)>1&&(this.enPassantable=!0),t=t.filter(f=>!$.equals(f.hex,n.attacking)),this.firstMove=!1,this.hex=n.to;const r=this.getPromotion();r&&(this.pieceImage=r.pieceImage,this.pieceType=r.pieceType,this.enumNumber=r.enumNumber),Ne.set(t);let i=this.getEnemyColor(),o=new Ct(!0,$.enumToColor(i),!1);return $.getAllLegalMoves(i).length==0&&(o.running=!1,$.inCheck(i)?o.checkmate=[$.enumToColor(this.color),$.enumToColor(i)]:o.stalemate=!0),Qe.set(o),!0}getLegalMoves(e,t){let n=[];if(t?n=t:Ne.subscribe(o=>{n=o}),!e){let o=It;if(Qe.subscribe(f=>o=f),!o.running||this.color!=$.colorToEnum(o.currentColor))return[]}let r=[];return this.getMoves(n).forEach(o=>{let f=$.cloneArray(n);$.testMove(o,f)&&r.push(o)}),r}static testMove(e,t){let n=t.find(i=>$.equals(i.hex,e.from)),r=[];return t.forEach(i=>{$.equals(i.hex,e.attacking)||r.push(i)}),n.hex=e.to,!$.inCheck(n.color,r)}static inCheck(e,t){let n=[];t?n=t:Ne.subscribe(o=>{n=o});let r=[];n.forEach(o=>{o.color!=e&&(r=r.concat(o.getMoves(n)))});let i=r.map(o=>o.attacking);return!!n.find(o=>o.color==e&&o.pieceType==5&&i.find(f=>$.equals(f,o.hex)))}static getAllLegalMoves(e,t){let n=[];t?n=t:Ne.subscribe(i=>{n=i});let r=[];return n.forEach(i=>{i.color===e&&(r=r.concat(i.getLegalMoves(!0)))}),r}getMoves(e){let t=[];switch(this.pieceType){case 4:{t=t.concat(this.diagonalMoves(this.boardMeta.radius,e),this.adjacentMoves(e),this.directionalMoves(e));break}case 5:{t=t.concat(this.diagonalMoves(1,e),this.adjacentMoves(e));break}case 2:{t=t.concat(this.diagonalMoves(this.boardMeta.radius,e));break}case 1:{t=t.concat(this.directionalMoves(e));break}case 3:{t=t.concat(this.knightMoves(e));break}case 0:{t=t.concat(this.pawnMoves(e));break}}return t}static pieceOn(e,t){let n=[];return t?n=t:Ne.subscribe(r=>{n=r}),n.find(r=>$.equals(r.hex,e))}adjacentMoves(e){let t=[];for(let n=0;n<6;n++){let r=this.hex.neighbor(n),i=$.pieceOn(r,e);r.inRadius(this.boardMeta.radius)&&(i===void 0||i.color!==this.color)&&t.push(new D(this.hex,r,r))}return t}diagonalMoves(e,t){let n=[];for(let r=0;r<6;r++){let i=this.hex.diagonalNeighbor(r);for(let o=0;o<e&&i.inRadius(this.boardMeta.radius);o++){let f=$.pieceOn(i,t);if(f){f.color!==this.color&&n.push(new D(this.hex,i,i));break}n.push(new D(this.hex,i,i)),i=i.diagonalNeighbor(r)}}return n}directionalMoves(e){let t=[];for(let n=0;n<6;n++){let r=this.hex.neighbor(n);for(;r.inRadius(this.boardMeta.radius);){let i=$.pieceOn(r,e);if(i){i.color!==this.color&&t.push(new D(this.hex,r,r));break}t.push(new D(this.hex,r,r)),r=r.neighbor(n)}}return t}knightMoves(e){let t=[];for(let n=0;n<12;n++){let r=this.hex.knightNeighbor(n),i=$.pieceOn(r,e);r.inRadius(this.boardMeta.radius)&&(i===void 0||i.color!==this.color)&&t.push(new D(this.hex,r,r))}return t}pawnMoves(e){var o,f,d,I,v,g,k,h;let t=[],n=[],r=[],i=1;switch(this.firstMove==!0&&(i=2),this.color){case 0:{let _=this.hex;for(let C=0;C<i&&(_=_.neighbor(2),!$.pieceOn(_,e));C++)t.push(new D(this.hex,_,_));n.push(new D(this.hex,this.hex.neighbor(1),this.hex.neighbor(1)),new D(this.hex,this.hex.neighbor(3),this.hex.neighbor(3))),((o=$.pieceOn(this.hex.neighbor(0),e))==null?void 0:o.color)!=this.color&&((f=$.pieceOn(this.hex.neighbor(0),e))!=null&&f.enPassantable)&&r.push(new D(this.hex,this.hex.neighbor(1),this.hex.neighbor(0))),((d=$.pieceOn(this.hex.neighbor(4),e))==null?void 0:d.color)!=this.color&&((I=$.pieceOn(this.hex.neighbor(4),e))!=null&&I.enPassantable)&&r.push(new D(this.hex,this.hex.neighbor(3),this.hex.neighbor(4)));break}case 1:{let _=this.hex;for(let C=0;C<i&&(_=_.neighbor(5),!$.pieceOn(_,e));C++)t.push(new D(this.hex,_,_));n.push(new D(this.hex,this.hex.neighbor(0),this.hex.neighbor(0)),new D(this.hex,this.hex.neighbor(4),this.hex.neighbor(4))),((v=$.pieceOn(this.hex.neighbor(1),e))==null?void 0:v.color)!=this.color&&((g=$.pieceOn(this.hex.neighbor(1),e))!=null&&g.enPassantable)&&r.push(new D(this.hex,this.hex.neighbor(0),this.hex.neighbor(1))),((k=$.pieceOn(this.hex.neighbor(3),e))==null?void 0:k.color)!=this.color&&((h=$.pieceOn(this.hex.neighbor(3),e))!=null&&h.enPassantable)&&r.push(new D(this.hex,this.hex.neighbor(4),this.hex.neighbor(3)));break}}return t.filter(_=>_.to.inRadius(this.boardMeta.radius)&&$.pieceOn(_.to,e)===void 0).concat(n.filter(_=>{var C;return _.to.inRadius(this.boardMeta.radius)&&$.pieceOn(_.to,e)!=null&&((C=$.pieceOn(_.to,e))==null?void 0:C.color)!=this.color})).concat(r)}getPromotion(){if(this.pieceType==0){if(this.color==0&&(this.hex.q+this.hex.r==-5||this.hex.r==-5))return new $([this.hex.q,this.hex.r],8);if(this.color==1&&(this.hex.q+this.hex.r==5||this.hex.r==5))return new $([this.hex.q,this.hex.r],9)}}}class D{constructor(e,t,n){y(this,"from");y(this,"to");y(this,"attacking");this.from=e,this.to=t,this.attacking=n}}var ye=(s=>(s[s.DEFAULT=0]="DEFAULT",s[s.FLIPPED=1]="FLIPPED",s))(ye||{});class Rt{constructor(e,t,n,r){y(this,"layout");y(this,"theme");y(this,"radius");y(this,"hexSize");this.theme=t,this.radius=n,this.hexSize=r,this.layout=this.getLayout(e)}getLayout(e){return e==1?new Le(Le.FLIPPED,new be(this.hexSize,this.hexSize),new be(0,0)):new Le(Le.FLAT,new be(this.hexSize,this.hexSize),new be(0,0))}}var He=(s=>(s.CURRENT="#57ff00",s.SELECTED="#ffb400",s.LEGAL="#525252",s.ATTACK="#ff0000",s.PREVIOUS="#fff700",s))(He||{});class Xe{constructor(e,t,n,r,i){y(this,"current");y(this,"selections");y(this,"legal");y(this,"attacks");y(this,"previous");this.current=e,this.selections=t,this.legal=n,this.attacks=r,this.previous=i}}const Ae=new Rt(ye.DEFAULT,Ke.GRAYSCALE,5,40),_e=We(Ae),It=new Ct(!0,"WHITE",!1),Qe=We(It);let Pt;const Oe=We(Pt);let Gt=[new $([0,-5],B.BLACK_BISHOP),new $([0,-4],B.BLACK_BISHOP),new $([0,-3],B.BLACK_BISHOP),new $([0,5],B.WHITE_BISHOP),new $([0,4],B.WHITE_BISHOP),new $([0,3],B.WHITE_BISHOP),new $([-4,-1],B.BLACK_PAWN),new $([-3,-1],B.BLACK_PAWN),new $([-2,-1],B.BLACK_PAWN),new $([-1,-1],B.BLACK_PAWN),new $([0,-1],B.BLACK_PAWN),new $([1,-2],B.BLACK_PAWN),new $([2,-3],B.BLACK_PAWN),new $([3,-4],B.BLACK_PAWN),new $([4,-5],B.BLACK_PAWN),new $([-4,5],B.WHITE_PAWN),new $([-3,4],B.WHITE_PAWN),new $([-2,3],B.WHITE_PAWN),new $([-1,2],B.WHITE_PAWN),new $([0,1],B.WHITE_PAWN),new $([1,1],B.WHITE_PAWN),new $([2,1],B.WHITE_PAWN),new $([3,1],B.WHITE_PAWN),new $([4,1],B.WHITE_PAWN),new $([-3,-2],B.BLACK_ROOK),new $([3,-5],B.BLACK_ROOK),new $([-3,5],B.WHITE_ROOK),new $([3,2],B.WHITE_ROOK),new $([-2,-3],B.BLACK_KNIGHT),new $([2,-5],B.BLACK_KNIGHT),new $([-2,5],B.WHITE_KNIGHT),new $([2,3],B.WHITE_KNIGHT),new $([-1,-4],B.BLACK_QUEEN),new $([-1,5],B.WHITE_QUEEN),new $([1,-5],B.BLACK_KING),new $([1,4],B.WHITE_KING)];const Ne=We(Gt),Ve=We(new Xe(void 0,[],[],[],[]));function Ut(s){let e,t,n,r;const i=s[8].default,o=Lt(i,s,s[7],null);return{c(){e=ee("div"),o&&o.c(),this.h()},l(f){e=te(f,"DIV",{class:!0});var d=Z(e);o&&o.l(d),d.forEach(S),this.h()},h(){H(e,"class","draggable svelte-kwdgvp")},m(f,d){G(f,e,d),o&&o.m(e,null),s[9](e),t=!0,n||(r=[ie(window,"pointermove",s[4]),ie(window,"pointerup",s[1]),ie(window,"touchend",s[1]),ie(window,"touchmove",s[5]),ie(window,"pointerdown",s[3]),ie(e,"pointerdown",s[2]),ie(e,"contextmenu",Ft)],n=!0)},p(f,[d]){o&&o.p&&(!t||d&128)&&Bt(o,i,f,f[7],t?yt(i,f[7],d,null):Ht(f[7]),null)},i(f){t||(p(o,f),t=!0)},o(f){w(o,f),t=!1},d(f){f&&S(e),o&&o.d(f),s[9](null),n=!1,je(r)}}}const Ft=function(s){s.preventDefault()};function Yt(s,e,t){let{$$slots:n={},$$scope:r}=e,{currentPiece:i}=e,o;Oe.subscribe(A=>{o=A}),_e.subscribe(A=>{});let f,d,I=0,v=0,g=0,k=0,h,_=[],C,b=[],z=[],x=[],J=[];Ve.subscribe(A=>J=A.previous);let c=!1;Kt(()=>{u()});function u(){var Y,Q;g=h.getBoundingClientRect().width,k=h.getBoundingClientRect().height;let A=document.getElementById(`${i.hex.q},${i.hex.r}`).getBoundingClientRect();I=(Y=h.parentElement)==null?void 0:Y.getBoundingClientRect().left,v=(Q=h.parentElement)==null?void 0:Q.getBoundingClientRect().top,h.setAttribute("style",`left:${A.left+A.width/2-g/2-I}px; top:${A.top+A.height/2-k/2-v}px;`)}function l(){if(t(0,h.style.cursor="",h),t(0,h.style.zIndex="",h),!c){o==i&&(Oe.set(void 0),C=void 0,z=[],b=[],le());return}if(c=!1,x.length>0){let A=i.movePiece(x[0]);A?(o&&Oe.set(void 0),z=[],b=[],J=[C,x[0]],C=void 0,u()):A||(o&&$.equals(o.hex,x[0])?(Oe.set(void 0),C=void 0,z=[],b=[]):(!o||o!=i)&&Oe.set(i))}else Oe.set(i);return t(0,h.style.left=f,h),t(0,h.style.top=d,h),x=[],le(),!0}function L(A){var Q,ne;c=!0,t(0,h.style.zIndex="100",h),t(0,h.style.cursor="grabbing",h),f=h.style.left,d=h.style.top,I=(Q=h.parentElement)==null?void 0:Q.getBoundingClientRect().left,v=(ne=h.parentElement)==null?void 0:ne.getBoundingClientRect().top;let Y=i.getLegalMoves(!1);C=i.hex,z=Y.filter(V=>$.pieceOn(V.attacking)).map(V=>V.to),b=Y.filter(V=>!$.pieceOn(V.attacking)).map(V=>V.to),ce(A.clientX,A.clientY)}function q(A){let Y=pe(A.clientX,A.clientY);!Y||c||!o||o==i&&i.movePiece(Y)&&(o&&Oe.set(void 0),z=[],b=[],J=[C,Y],C=void 0,u(),le())}function W(A){ce(A.clientX,A.clientY)}function re(A){return ce(A.touches[0].clientX,A.touches[0].clientY),!0}function ce(A,Y){if(!c)return;let Q=A-g/2-I,ne=Y-k/2-v;t(0,h.style.left=`${Q}px`,h),t(0,h.style.top=`${ne}px`,h);let V=pe(A,Y);V?x[0]=V:x=[],le()}function pe(A,Y){_=document.elementsFromPoint(A,Y);let Q=_.find(ve=>ve.classList.contains("droppable"));if(!Q)return;let ne=parseInt(Q.getAttribute("data-q")),V=parseInt(Q.getAttribute("data-r"));return new oe(ne,V)}function le(){Ve.set(new Xe(C,x,b,z,J))}function we(A){Wt[A?"unshift":"push"](()=>{h=A,t(0,h)})}return s.$$set=A=>{"currentPiece"in A&&t(6,i=A.currentPiece),"$$scope"in A&&t(7,r=A.$$scope)},[h,l,L,q,W,re,i,r,n,we]}class Qt extends xe{constructor(e){super(),qe(this,e,Yt,Ut,me,{currentPiece:6})}}function Vt(s){let e,t;return{c(){e=ee("img"),this.h()},l(n){e=te(n,"IMG",{style:!0,class:!0,draggable:!0,src:!0}),this.h()},h(){P(e,"z-index","100"),P(e,"width",s[1]*1.3+"px"),P(e,"height",s[1]*1.3+"px"),H(e,"class","piece"),H(e,"draggable","false"),Ze(e.src,t=s[0].pieceImage)||H(e,"src",t)},m(n,r){G(n,e,r)},p(n,r){r&1&&!Ze(e.src,t=n[0].pieceImage)&&H(e,"src",t)},d(n){n&&S(e)}}}function jt(s){let e,t;return e=new Qt({props:{currentPiece:s[0],$$slots:{default:[Vt]},$$scope:{ctx:s}}}),{c(){M(e.$$.fragment)},l(n){E(e.$$.fragment,n)},m(n,r){T(e,n,r),t=!0},p(n,[r]){const i={};r&1&&(i.currentPiece=n[0]),r&9&&(i.$$scope={dirty:r,ctx:n}),e.$set(i)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function Xt(s,e,t){let{piece:n}=e,r=Ae;_e.subscribe(o=>{r=o});const i=r.layout.size.x;return s.$$set=o=>{"piece"in o&&t(0,n=o.piece)},[n,i]}class Jt extends xe{constructor(e){super(),qe(this,e,Xt,jt,me,{piece:0})}}function nt(s){let e;return{c(){e=$e("circle"),this.h()},l(t){e=de(t,"circle",{r:!0,style:!0}),Z(e).forEach(S),this.h()},h(){H(e,"r",s[0]),P(e,"fill",s[1]),P(e,"z-index","50"),P(e,"stroke",s[1]),P(e,"stroke-width",s[0]/10)},m(t,n){G(t,e,n)},p(t,n){n&1&&H(e,"r",t[0]),n&2&&P(e,"fill",t[1]),n&2&&P(e,"stroke",t[1]),n&1&&P(e,"stroke-width",t[0]/10)},d(t){t&&S(e)}}}function rt(s){let e;return{c(){e=$e("circle"),this.h()},l(t){e=de(t,"circle",{r:!0,style:!0}),Z(e).forEach(S),this.h()},h(){H(e,"r",s[0]),P(e,"fill","none"),P(e,"z-index","50"),P(e,"stroke",s[1]),P(e,"stroke-width",s[0]/10+"px")},m(t,n){G(t,e,n)},p(t,n){n&1&&H(e,"r",t[0]),n&2&&P(e,"stroke",t[1]),n&1&&P(e,"stroke-width",t[0]/10+"px")},d(t){t&&S(e)}}}function Zt(s){let e,t,n=s[2]&&nt(s),r=!s[2]&&rt(s);return{c(){e=$e("g"),n&&n.c(),t=j(),r&&r.c(),this.h()},l(i){e=de(i,"g",{transform:!0});var o=Z(e);n&&n.l(o),t=j(),r&&r.l(o),o.forEach(S),this.h()},h(){H(e,"transform","translate("+s[3].x+", "+s[3].y+")")},m(i,o){G(i,e,o),n&&n.m(e,null),X(e,t),r&&r.m(e,null)},p(i,[o]){i[2]?n?n.p(i,o):(n=nt(i),n.c(),n.m(e,t)):n&&(n.d(1),n=null),i[2]?r&&(r.d(1),r=null):r?r.p(i,o):(r=rt(i),r.c(),r.m(e,null))},i:he,o:he,d(i){i&&S(e),n&&n.d(),r&&r.d()}}}function Dt(s,e,t){let{q:n}=e,{r}=e,{size:i}=e,{color:o}=e,{fill:f}=e,d=Ae;_e.subscribe(g=>{d=g}),new oe(0,0);const I=new oe(n,r),v=d.layout.hexToPixel(I);return s.$$set=g=>{"q"in g&&t(4,n=g.q),"r"in g&&t(5,r=g.r),"size"in g&&t(0,i=g.size),"color"in g&&t(1,o=g.color),"fill"in g&&t(2,f=g.fill)},[i,o,f,v,n,r]}class Je extends xe{constructor(e){super(),qe(this,e,Dt,Zt,me,{q:4,r:5,size:0,color:1,fill:2})}}function en(s){let e,t;return{c(){e=$e("g"),t=$e("polygon"),this.h()},l(n){e=de(n,"g",{transform:!0});var r=Z(e);t=de(r,"polygon",{class:!0,points:!0,style:!0,opacity:!0}),Z(t).forEach(S),r.forEach(S),this.h()},h(){H(t,"class","hexagon"),H(t,"points",s[3]),P(t,"fill",s[0]),P(t,"z-index","50"),P(t,"stroke","black"),P(t,"stroke-width",s[2]/25+"px"),H(t,"opacity","0.3"),H(e,"transform","translate("+s[1].x+", "+s[1].y+")")},m(n,r){G(n,e,r),X(e,t)},p(n,[r]){r&1&&P(t,"fill",n[0])},i:he,o:he,d(n){n&&S(e)}}}function tn(s){var e="";return s.forEach(t=>{e=e.concat(`${t.x},${t.y} `)}),e}function nn(s,e,t){let{q:n}=e,{r}=e,{color:i}=e,o=Ae;_e.subscribe(h=>{o=h});const f=new oe(0,0),d=o.layout.polygonCorners(f),I=new oe(n,r),v=o.layout.hexToPixel(I),g=o.hexSize,k=tn(d);return s.$$set=h=>{"q"in h&&t(4,n=h.q),"r"in h&&t(5,r=h.r),"color"in h&&t(0,i=h.color)},[i,v,g,k,n,r]}class Mt extends xe{constructor(e){super(),qe(this,e,nn,en,me,{q:4,r:5,color:0})}}function rn(s){let e,t,n;return{c(){e=$e("g"),t=$e("text"),n=xt(s[0]),this.h()},l(r){e=de(r,"g",{style:!0,transform:!0});var i=Z(e);t=de(i,"text",{x:!0,y:!0,"stroke-width":!0,class:!0});var o=Z(t);n=qt(o,s[0]),o.forEach(S),i.forEach(S),this.h()},h(){H(t,"x",-s[4]/3.3*s[2]-s[4]/4),H(t,"y",-(s[4]/3.3)*s[3]),H(t,"stroke-width",s[4]/50),H(t,"class","coordinate"),P(e,"font",s[4]/2+"px monospace"),H(e,"transform","translate("+s[1].x+", "+s[1].y+")")},m(r,i){G(r,e,i),X(e,t),X(t,n)},p(r,[i]){i&1&&kt(n,r[0])},i:he,o:he,d(r){r&&S(e)}}}function sn(s,e,t){let{q:n}=e,{r}=e,{text:i}=e,o=Ae;_e.subscribe(h=>{o=h});const f=new oe(n,r),d=o.layout.hexToPixel(f),I=Math.sqrt(d.x*d.x+d.y*d.y),v=d.x/I,g=d.y/I,k=o.layout.size.x;return s.$$set=h=>{"q"in h&&t(5,n=h.q),"r"in h&&t(6,r=h.r),"text"in h&&t(0,i=h.text)},[i,d,v,g,k,n,r]}class K extends xe{constructor(e){super(),qe(this,e,sn,rn,me,{q:5,r:6,text:0})}}function on(s){let e,t,n,r,i;return{c(){e=$e("g"),t=$e("polygon"),this.h()},l(o){e=de(o,"g",{transform:!0});var f=Z(e);t=de(f,"polygon",{id:!0,"data-q":!0,"data-r":!0,class:!0,points:!0,style:!0}),Z(t).forEach(S),f.forEach(S),this.h()},h(){H(t,"id",n=s[0]+","+s[1]),H(t,"data-q",r=s[0]+","),H(t,"data-r",i=s[1]+","),H(t,"class","hexagon droppable"),H(t,"points",s[5]),P(t,"fill",s[2]),P(t,"stroke","black"),P(t,"stroke-width",s[4]/25+"px"),H(e,"transform","translate("+s[3].x+", "+s[3].y+")")},m(o,f){G(o,e,f),X(e,t)},p(o,[f]){f&3&&n!==(n=o[0]+","+o[1])&&H(t,"id",n),f&1&&r!==(r=o[0]+",")&&H(t,"data-q",r),f&2&&i!==(i=o[1]+",")&&H(t,"data-r",i),f&4&&P(t,"fill",o[2])},i:he,o:he,d(o){o&&S(e)}}}function ln(s){var e="";return s.forEach(t=>{e=e.concat(`${t.x},${t.y} `)}),e}function an(s,e,t){let{q:n}=e,{r}=e,{color:i}=e,o=Ae;_e.subscribe(h=>{o=h});const f=new oe(0,0),d=o.layout.polygonCorners(f),I=new oe(n,r),v=o.layout.hexToPixel(I),g=o.layout.size.x,k=ln(d);return s.$$set=h=>{"q"in h&&t(0,n=h.q),"r"in h&&t(1,r=h.r),"color"in h&&t(2,i=h.color)},[n,r,i,v,g,k]}class fn extends xe{constructor(e){super(),qe(this,e,an,on,me,{q:0,r:1,color:2})}}function st(s,e,t){const n=s.slice();return n[9]=e[t],n}function it(s,e,t){const n=s.slice();return n[12]=e[t],n}function ot(s,e,t){const n=s.slice();return n[12]=e[t],n}function lt(s,e,t){const n=s.slice();return n[12]=e[t],n}function at(s,e,t){const n=s.slice();return n[12]=e[t],n}function ft(s,e,t){const n=s.slice();return n[21]=e[t].q,n[22]=e[t].r,n[23]=e[t].color,n}function ht(s){let e,t;return e=new fn({props:{q:s[21],r:s[22],color:s[23]}}),{c(){M(e.$$.fragment)},l(n){E(e.$$.fragment,n)},m(n,r){T(e,n,r),t=!0},p(n,r){const i={};r&2&&(i.q=n[21]),r&2&&(i.r=n[22]),r&2&&(i.color=n[23]),e.$set(i)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function ct(s){let e,t;return e=new Mt({props:{q:s[12].q,r:s[12].r,color:He.PREVIOUS}}),{c(){M(e.$$.fragment)},l(n){E(e.$$.fragment,n)},m(n,r){T(e,n,r),t=!0},p(n,r){const i={};r&4&&(i.q=n[12].q),r&4&&(i.r=n[12].r),e.$set(i)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function ut(s){let e,t;return e=new Je({props:{q:s[12].q,r:s[12].r,size:s[0].hexSize/5,color:He.LEGAL,fill:!0}}),{c(){M(e.$$.fragment)},l(n){E(e.$$.fragment,n)},m(n,r){T(e,n,r),t=!0},p(n,r){const i={};r&4&&(i.q=n[12].q),r&4&&(i.r=n[12].r),r&1&&(i.size=n[0].hexSize/5),e.$set(i)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function gt(s){let e,t;return e=new Je({props:{q:s[12].q,r:s[12].r,size:s[0].hexSize/1.5,color:He.ATTACK,fill:!1}}),{c(){M(e.$$.fragment)},l(n){E(e.$$.fragment,n)},m(n,r){T(e,n,r),t=!0},p(n,r){const i={};r&4&&(i.q=n[12].q),r&4&&(i.r=n[12].r),r&1&&(i.size=n[0].hexSize/1.5),e.$set(i)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function mt(s){let e,t;return e=new Mt({props:{q:s[2].current.q,r:s[2].current.r,color:He.CURRENT}}),{c(){M(e.$$.fragment)},l(n){E(e.$$.fragment,n)},m(n,r){T(e,n,r),t=!0},p(n,r){const i={};r&4&&(i.q=n[2].current.q),r&4&&(i.r=n[2].current.r),e.$set(i)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function pt(s){let e,t;return e=new Je({props:{q:s[12].q,r:s[12].r,size:s[0].hexSize/1.5,color:He.SELECTED,fill:!1}}),{c(){M(e.$$.fragment)},l(n){E(e.$$.fragment,n)},m(n,r){T(e,n,r),t=!0},p(n,r){const i={};r&4&&(i.q=n[12].q),r&4&&(i.r=n[12].r),r&1&&(i.size=n[0].hexSize/1.5),e.$set(i)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function $t(s){let e,t,n,r,i,o,f=fe(s[2].previous),d=[];for(let c=0;c<f.length;c+=1)d[c]=ct(at(s,f,c));const I=c=>w(d[c],1,1,()=>{d[c]=null});let v=fe(s[2].legal),g=[];for(let c=0;c<v.length;c+=1)g[c]=ut(lt(s,v,c));const k=c=>w(g[c],1,1,()=>{g[c]=null});let h=fe(s[2].attacks),_=[];for(let c=0;c<h.length;c+=1)_[c]=gt(ot(s,h,c));const C=c=>w(_[c],1,1,()=>{_[c]=null});let b=s[2].current&&mt(s),z=fe(s[2].selections),x=[];for(let c=0;c<z.length;c+=1)x[c]=pt(it(s,z,c));const J=c=>w(x[c],1,1,()=>{x[c]=null});return{c(){for(let c=0;c<d.length;c+=1)d[c].c();e=j();for(let c=0;c<g.length;c+=1)g[c].c();t=j();for(let c=0;c<_.length;c+=1)_[c].c();n=j(),b&&b.c(),r=j();for(let c=0;c<x.length;c+=1)x[c].c();i=j()},l(c){for(let u=0;u<d.length;u+=1)d[u].l(c);e=j();for(let u=0;u<g.length;u+=1)g[u].l(c);t=j();for(let u=0;u<_.length;u+=1)_[u].l(c);n=j(),b&&b.l(c),r=j();for(let u=0;u<x.length;u+=1)x[u].l(c);i=j()},m(c,u){for(let l=0;l<d.length;l+=1)d[l]&&d[l].m(c,u);G(c,e,u);for(let l=0;l<g.length;l+=1)g[l]&&g[l].m(c,u);G(c,t,u);for(let l=0;l<_.length;l+=1)_[l]&&_[l].m(c,u);G(c,n,u),b&&b.m(c,u),G(c,r,u);for(let l=0;l<x.length;l+=1)x[l]&&x[l].m(c,u);G(c,i,u),o=!0},p(c,u){if(u&4){f=fe(c[2].previous);let l;for(l=0;l<f.length;l+=1){const L=at(c,f,l);d[l]?(d[l].p(L,u),p(d[l],1)):(d[l]=ct(L),d[l].c(),p(d[l],1),d[l].m(e.parentNode,e))}for(ue(),l=f.length;l<d.length;l+=1)I(l);ge()}if(u&5){v=fe(c[2].legal);let l;for(l=0;l<v.length;l+=1){const L=lt(c,v,l);g[l]?(g[l].p(L,u),p(g[l],1)):(g[l]=ut(L),g[l].c(),p(g[l],1),g[l].m(t.parentNode,t))}for(ue(),l=v.length;l<g.length;l+=1)k(l);ge()}if(u&5){h=fe(c[2].attacks);let l;for(l=0;l<h.length;l+=1){const L=ot(c,h,l);_[l]?(_[l].p(L,u),p(_[l],1)):(_[l]=gt(L),_[l].c(),p(_[l],1),_[l].m(n.parentNode,n))}for(ue(),l=h.length;l<_.length;l+=1)C(l);ge()}if(c[2].current?b?(b.p(c,u),u&4&&p(b,1)):(b=mt(c),b.c(),p(b,1),b.m(r.parentNode,r)):b&&(ue(),w(b,1,1,()=>{b=null}),ge()),u&5){z=fe(c[2].selections);let l;for(l=0;l<z.length;l+=1){const L=it(c,z,l);x[l]?(x[l].p(L,u),p(x[l],1)):(x[l]=pt(L),x[l].c(),p(x[l],1),x[l].m(i.parentNode,i))}for(ue(),l=z.length;l<x.length;l+=1)J(l);ge()}},i(c){if(!o){for(let u=0;u<f.length;u+=1)p(d[u]);for(let u=0;u<v.length;u+=1)p(g[u]);for(let u=0;u<h.length;u+=1)p(_[u]);p(b);for(let u=0;u<z.length;u+=1)p(x[u]);o=!0}},o(c){d=d.filter(Boolean);for(let u=0;u<d.length;u+=1)w(d[u]);g=g.filter(Boolean);for(let u=0;u<g.length;u+=1)w(g[u]);_=_.filter(Boolean);for(let u=0;u<_.length;u+=1)w(_[u]);w(b),x=x.filter(Boolean);for(let u=0;u<x.length;u+=1)w(x[u]);o=!1},d(c){c&&(S(e),S(t),S(n),S(r),S(i)),Be(d,c),Be(g,c),Be(_,c),b&&b.d(c),Be(x,c)}}}function dt(s){let e,t;return e=new Jt({props:{piece:s[9]}}),{c(){M(e.$$.fragment)},l(n){E(e.$$.fragment,n)},m(n,r){T(e,n,r),t=!0},p(n,r){const i={};r&8&&(i.piece=n[9]),e.$set(i)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function _t(s){let e,t,n,r=s[2],i,o,f,d,I,v,g,k,h,_,C,b,z,x,J,c,u,l,L,q,W,re,ce,pe,le,we,A,Y,Q,ne,V,ve,Ie,Me,Ue,ze,Ee=fe(s[1]),U=[];for(let a=0;a<Ee.length;a+=1)U[a]=ht(ft(s,Ee,a));const Tt=a=>w(U[a],1,1,()=>{U[a]=null});let ae=$t(s);o=new K({props:{q:-5,r:6,text:"a"}}),f=new K({props:{q:-4,r:6,text:"b"}}),d=new K({props:{q:-3,r:6,text:"c"}}),I=new K({props:{q:-2,r:6,text:"d"}}),v=new K({props:{q:-1,r:6,text:"e"}}),g=new K({props:{q:0,r:6,text:"f"}}),k=new K({props:{q:1,r:5,text:"g"}}),h=new K({props:{q:2,r:4,text:"h"}}),_=new K({props:{q:3,r:3,text:"i"}}),C=new K({props:{q:4,r:2,text:"k"}}),b=new K({props:{q:5,r:1,text:"l"}}),z=new K({props:{q:-6,r:5,text:"1"}}),x=new K({props:{q:-6,r:4,text:"2"}}),J=new K({props:{q:-6,r:3,text:"3"}}),c=new K({props:{q:-6,r:2,text:"4"}}),u=new K({props:{q:-6,r:1,text:"5"}}),l=new K({props:{q:-6,r:0,text:"6"}}),L=new K({props:{q:-5,r:-1,text:"7"}}),q=new K({props:{q:-4,r:-2,text:"8"}}),W=new K({props:{q:-3,r:-3,text:"9"}}),re=new K({props:{q:-2,r:-4,text:"10"}}),ce=new K({props:{q:-1,r:-5,text:"11"}}),pe=new K({props:{q:6,r:-1,text:"1"}}),le=new K({props:{q:6,r:-2,text:"2"}}),we=new K({props:{q:6,r:-3,text:"3"}}),A=new K({props:{q:6,r:-4,text:"4"}}),Y=new K({props:{q:6,r:-5,text:"5"}}),Q=new K({props:{q:6,r:-6,text:"6"}}),ne=new K({props:{q:5,r:-6,text:"7"}}),V=new K({props:{q:4,r:-6,text:"8"}}),ve=new K({props:{q:3,r:-6,text:"9"}}),Ie=new K({props:{q:2,r:-6,text:"10"}}),Me=new K({props:{q:1,r:-6,text:"11"}});let Te=fe(s[3]),F=[];for(let a=0;a<Te.length;a+=1)F[a]=dt(st(s,Te,a));const Ot=a=>w(F[a],1,1,()=>{F[a]=null});return{c(){e=ee("div"),t=$e("svg");for(let a=0;a<U.length;a+=1)U[a].c();n=j(),ae.c(),i=j(),M(o.$$.fragment),M(f.$$.fragment),M(d.$$.fragment),M(I.$$.fragment),M(v.$$.fragment),M(g.$$.fragment),M(k.$$.fragment),M(h.$$.fragment),M(_.$$.fragment),M(C.$$.fragment),M(b.$$.fragment),M(z.$$.fragment),M(x.$$.fragment),M(J.$$.fragment),M(c.$$.fragment),M(u.$$.fragment),M(l.$$.fragment),M(L.$$.fragment),M(q.$$.fragment),M(W.$$.fragment),M(re.$$.fragment),M(ce.$$.fragment),M(pe.$$.fragment),M(le.$$.fragment),M(we.$$.fragment),M(A.$$.fragment),M(Y.$$.fragment),M(Q.$$.fragment),M(ne.$$.fragment),M(V.$$.fragment),M(ve.$$.fragment),M(Ie.$$.fragment),M(Me.$$.fragment),Ue=ke();for(let a=0;a<F.length;a+=1)F[a].c();this.h()},l(a){e=te(a,"DIV",{class:!0});var R=Z(e);t=de(R,"svg",{overflow:!0,viewBox:!0,width:!0,height:!0});var m=Z(t);for(let se=0;se<U.length;se+=1)U[se].l(m);n=j(),ae.l(m),i=j(),E(o.$$.fragment,m),E(f.$$.fragment,m),E(d.$$.fragment,m),E(I.$$.fragment,m),E(v.$$.fragment,m),E(g.$$.fragment,m),E(k.$$.fragment,m),E(h.$$.fragment,m),E(_.$$.fragment,m),E(C.$$.fragment,m),E(b.$$.fragment,m),E(z.$$.fragment,m),E(x.$$.fragment,m),E(J.$$.fragment,m),E(c.$$.fragment,m),E(u.$$.fragment,m),E(l.$$.fragment,m),E(L.$$.fragment,m),E(q.$$.fragment,m),E(W.$$.fragment,m),E(re.$$.fragment,m),E(ce.$$.fragment,m),E(pe.$$.fragment,m),E(le.$$.fragment,m),E(we.$$.fragment,m),E(A.$$.fragment,m),E(Y.$$.fragment,m),E(Q.$$.fragment,m),E(ne.$$.fragment,m),E(V.$$.fragment,m),E(ve.$$.fragment,m),E(Ie.$$.fragment,m),E(Me.$$.fragment,m),m.forEach(S),Ue=Ce(R);for(let se=0;se<F.length;se+=1)F[se].l(R);R.forEach(S),this.h()},h(){H(t,"overflow","visible"),H(t,"viewBox",s[5]),H(t,"width",s[4].x),H(t,"height",s[4].y),H(e,"class","board svelte-1qr0g3m")},m(a,R){G(a,e,R),X(e,t);for(let m=0;m<U.length;m+=1)U[m]&&U[m].m(t,null);X(t,n),ae.m(t,null),X(t,i),T(o,t,null),T(f,t,null),T(d,t,null),T(I,t,null),T(v,t,null),T(g,t,null),T(k,t,null),T(h,t,null),T(_,t,null),T(C,t,null),T(b,t,null),T(z,t,null),T(x,t,null),T(J,t,null),T(c,t,null),T(u,t,null),T(l,t,null),T(L,t,null),T(q,t,null),T(W,t,null),T(re,t,null),T(ce,t,null),T(pe,t,null),T(le,t,null),T(we,t,null),T(A,t,null),T(Y,t,null),T(Q,t,null),T(ne,t,null),T(V,t,null),T(ve,t,null),T(Ie,t,null),T(Me,t,null),X(e,Ue);for(let m=0;m<F.length;m+=1)F[m]&&F[m].m(e,null);ze=!0},p(a,R){if(R&2){Ee=fe(a[1]);let m;for(m=0;m<Ee.length;m+=1){const se=ft(a,Ee,m);U[m]?(U[m].p(se,R),p(U[m],1)):(U[m]=ht(se),U[m].c(),p(U[m],1),U[m].m(t,n))}for(ue(),m=Ee.length;m<U.length;m+=1)Tt(m);ge()}if(R&4&&me(r,r=a[2])?(ue(),w(ae,1,1,he),ge(),ae=$t(a),ae.c(),p(ae,1),ae.m(t,i)):ae.p(a,R),R&8){Te=fe(a[3]);let m;for(m=0;m<Te.length;m+=1){const se=st(a,Te,m);F[m]?(F[m].p(se,R),p(F[m],1)):(F[m]=dt(se),F[m].c(),p(F[m],1),F[m].m(e,null))}for(ue(),m=Te.length;m<F.length;m+=1)Ot(m);ge()}},i(a){if(!ze){for(let R=0;R<Ee.length;R+=1)p(U[R]);p(ae),p(o.$$.fragment,a),p(f.$$.fragment,a),p(d.$$.fragment,a),p(I.$$.fragment,a),p(v.$$.fragment,a),p(g.$$.fragment,a),p(k.$$.fragment,a),p(h.$$.fragment,a),p(_.$$.fragment,a),p(C.$$.fragment,a),p(b.$$.fragment,a),p(z.$$.fragment,a),p(x.$$.fragment,a),p(J.$$.fragment,a),p(c.$$.fragment,a),p(u.$$.fragment,a),p(l.$$.fragment,a),p(L.$$.fragment,a),p(q.$$.fragment,a),p(W.$$.fragment,a),p(re.$$.fragment,a),p(ce.$$.fragment,a),p(pe.$$.fragment,a),p(le.$$.fragment,a),p(we.$$.fragment,a),p(A.$$.fragment,a),p(Y.$$.fragment,a),p(Q.$$.fragment,a),p(ne.$$.fragment,a),p(V.$$.fragment,a),p(ve.$$.fragment,a),p(Ie.$$.fragment,a),p(Me.$$.fragment,a);for(let R=0;R<Te.length;R+=1)p(F[R]);ze=!0}},o(a){U=U.filter(Boolean);for(let R=0;R<U.length;R+=1)w(U[R]);w(ae),w(o.$$.fragment,a),w(f.$$.fragment,a),w(d.$$.fragment,a),w(I.$$.fragment,a),w(v.$$.fragment,a),w(g.$$.fragment,a),w(k.$$.fragment,a),w(h.$$.fragment,a),w(_.$$.fragment,a),w(C.$$.fragment,a),w(b.$$.fragment,a),w(z.$$.fragment,a),w(x.$$.fragment,a),w(J.$$.fragment,a),w(c.$$.fragment,a),w(u.$$.fragment,a),w(l.$$.fragment,a),w(L.$$.fragment,a),w(q.$$.fragment,a),w(W.$$.fragment,a),w(re.$$.fragment,a),w(ce.$$.fragment,a),w(pe.$$.fragment,a),w(le.$$.fragment,a),w(we.$$.fragment,a),w(A.$$.fragment,a),w(Y.$$.fragment,a),w(Q.$$.fragment,a),w(ne.$$.fragment,a),w(V.$$.fragment,a),w(ve.$$.fragment,a),w(Ie.$$.fragment,a),w(Me.$$.fragment,a),F=F.filter(Boolean);for(let R=0;R<F.length;R+=1)w(F[R]);ze=!1},d(a){a&&S(e),Be(U,a),ae.d(a),O(o),O(f),O(d),O(I),O(v),O(g),O(k),O(h),O(_),O(C),O(b),O(z),O(x),O(J),O(c),O(u),O(l),O(L),O(q),O(W),O(re),O(ce),O(pe),O(le),O(we),O(A),O(Y),O(Q),O(ne),O(V),O(ve),O(Ie),O(Me),Be(F,a)}}}function hn(s){let e=[s[0].theme,s[3]],t,n,r=_t(s);return{c(){r.c(),t=j()},l(i){r.l(i),t=j()},m(i,o){r.m(i,o),G(i,t,o),n=!0},p(i,[o]){o&9&&me(e,e=[i[0].theme,i[3]])?(ue(),w(r,1,1,he),ge(),r=_t(i),r.c(),p(r,1),r.m(t.parentNode,t)):r.p(i,o)},i(i){n||(p(r),n=!0)},o(i){w(r),n=!1},d(i){i&&S(t),r.d(i)}}}function cn(s,e,t){class n{constructor(h,_,C,b){this.q=h,this.r=_,this.size=C,this.color=b}}let r=Ae;_e.subscribe(k=>{t(0,r=k),I()});const i=r.radius*2+1;var o=[],f=new Xe(void 0,[],[],[],[]);Ve.subscribe(k=>t(2,f=k));var d=[];Ne.subscribe(k=>{t(3,d=k)});function I(){t(1,o=[]);let k=new tt(0,r.theme);for(let h=r.radius;h>=r.radius*-1;h--){let _=new tt(k.currentIndex,k.theme);for(let C=r.radius;C>=r.radius*-1;C--){let b;b=new oe(h,C),b.inRadius(r.radius)&&o.push(new n(b.q,b.r,r.hexSize,_.next()))}h>0?k.next():k.previous()}}I();const v=new be(r.hexSize*(3/2)*(i+2),r.hexSize*Math.sqrt(3)*(i+1)),g=`${v.x/-2} ${v.y/-2} ${v.x} ${v.y}`;return[r,o,f,d,v,g]}class un extends xe{constructor(e){super(),qe(this,e,cn,hn,me,{})}}function wt(s){let e,t,n,r="×",i,o,f="GAME OVER!",d,I,v,g,k;return{c(){e=ee("div"),t=ee("div"),n=ee("span"),n.textContent=r,i=ke(),o=ee("p"),o.textContent=f,d=ke(),I=ee("p"),v=xt(s[0]),this.h()},l(h){e=te(h,"DIV",{class:!0});var _=Z(e);t=te(_,"DIV",{class:!0});var C=Z(t);n=te(C,"SPAN",{class:!0,"data-svelte-h":!0}),Se(n)!=="svelte-ty2x6x"&&(n.textContent=r),i=Ce(C),o=te(C,"P",{"data-svelte-h":!0}),Se(o)!=="svelte-av41o5"&&(o.textContent=f),d=Ce(C),I=te(C,"P",{});var b=Z(I);v=qt(b,s[0]),b.forEach(S),C.forEach(S),_.forEach(S),this.h()},h(){H(n,"class","close-button svelte-p4vkuh"),H(t,"class","popup-content svelte-p4vkuh"),H(e,"class","popup svelte-p4vkuh")},m(h,_){G(h,e,_),X(e,t),X(t,n),X(t,i),X(t,o),X(t,d),X(t,I),X(I,v),g||(k=[ie(n,"click",s[2]),ie(e,"click",s[3])],g=!0)},p(h,_){_&1&&kt(v,h[0])},d(h){h&&S(e),g=!1,je(k)}}}function gn(s){let e,t=s[1]&&wt(s);return{c(){t&&t.c(),e=j()},l(n){t&&t.l(n),e=j()},m(n,r){t&&t.m(n,r),G(n,e,r)},p(n,[r]){n[1]?t?t.p(n,r):(t=wt(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:he,o:he,d(n){n&&S(e),t&&t.d(n)}}}function mn(s,e,t){let{text:n=""}=e,r=!0;function i(){t(1,r=!1)}function o(f){f.target===f.currentTarget&&i()}return s.$$set=f=>{"text"in f&&t(0,n=f.text)},[n,r,i,o]}class Et extends xe{constructor(e){super(),qe(this,e,mn,gn,me,{text:0})}}function vt(s){let e,t;return e=new Et({props:{text:s[0].checkmate[0]+" checkmated "+s[0].checkmate[1]}}),{c(){M(e.$$.fragment)},l(n){E(e.$$.fragment,n)},m(n,r){T(e,n,r),t=!0},p(n,r){const i={};r&1&&(i.text=n[0].checkmate[0]+" checkmated "+n[0].checkmate[1]),e.$set(i)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function bt(s){let e,t;return e=new Et({props:{text:"Stalemate!"}}),{c(){M(e.$$.fragment)},l(n){E(e.$$.fragment,n)},m(n,r){T(e,n,r),t=!0},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function pn(s){let e,t="Hexagonal Chess",n,r,i,o="Grayscale",f,d="Wood",I,v,g,k="Default",h,_="Flipped",C,b,z,x,J,c,u,l=s[0].checkmate&&vt(s),L=s[0].stalemate&&bt();return x=new un({}),{c(){e=ee("h1"),e.textContent=t,n=ke(),r=ee("select"),i=ee("option"),i.textContent=o,f=ee("option"),f.textContent=d,I=ke(),v=ee("select"),g=ee("option"),g.textContent=k,h=ee("option"),h.textContent=_,C=ke(),l&&l.c(),b=ke(),L&&L.c(),z=ke(),M(x.$$.fragment),this.h()},l(q){e=te(q,"H1",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-1bl0xm5"&&(e.textContent=t),n=Ce(q),r=te(q,"SELECT",{});var W=Z(r);i=te(W,"OPTION",{"data-svelte-h":!0}),Se(i)!=="svelte-c4ukt8"&&(i.textContent=o),f=te(W,"OPTION",{"data-svelte-h":!0}),Se(f)!=="svelte-1loqtfl"&&(f.textContent=d),W.forEach(S),I=Ce(q),v=te(q,"SELECT",{});var re=Z(v);g=te(re,"OPTION",{"data-svelte-h":!0}),Se(g)!=="svelte-1r2fxli"&&(g.textContent=k),h=te(re,"OPTION",{"data-svelte-h":!0}),Se(h)!=="svelte-4nai0v"&&(h.textContent=_),re.forEach(S),C=Ce(q),l&&l.l(q),b=Ce(q),L&&L.l(q),z=Ce(q),E(x.$$.fragment,q),this.h()},h(){H(e,"class","header"),i.__value=Ke.GRAYSCALE,Re(i,i.__value),i.selected=!0,f.__value=Ke.WOOD,Re(f,f.__value),s[2]===void 0&&De(()=>s[4].call(r)),g.__value=0,Re(g,g.__value),g.selected=!0,h.__value=1,Re(h,h.__value),s[1]===void 0&&De(()=>s[6].call(v))},m(q,W){G(q,e,W),G(q,n,W),G(q,r,W),X(r,i),X(r,f),Pe(r,s[2],!0),G(q,I,W),G(q,v,W),X(v,g),X(v,h),Pe(v,s[1],!0),G(q,C,W),l&&l.m(q,W),G(q,b,W),L&&L.m(q,W),G(q,z,W),T(x,q,W),J=!0,c||(u=[ie(r,"change",s[4]),ie(r,"change",s[5]),ie(v,"change",s[6]),ie(v,"change",s[7])],c=!0)},p(q,[W]){W&4&&Pe(r,q[2]),W&2&&Pe(v,q[1]),q[0].checkmate?l?(l.p(q,W),W&1&&p(l,1)):(l=vt(q),l.c(),p(l,1),l.m(b.parentNode,b)):l&&(ue(),w(l,1,1,()=>{l=null}),ge()),q[0].stalemate?L?W&1&&p(L,1):(L=bt(),L.c(),p(L,1),L.m(z.parentNode,z)):L&&(ue(),w(L,1,1,()=>{L=null}),ge())},i(q){J||(p(l),p(L),p(x.$$.fragment,q),J=!0)},o(q){w(l),w(L),w(x.$$.fragment,q),J=!1},d(q){q&&(S(e),S(n),S(r),S(I),S(v),S(C),S(b),S(z)),l&&l.d(q),L&&L.d(q),O(x,q),c=!1,je(u)}}}function $n(s,e,t){let n,r,i;Qe.subscribe(g=>t(0,i=g));function o(g){let k=ye.DEFAULT;switch(g){case 0:{k=ye.DEFAULT;break}case 1:{k=ye.FLIPPED;break}}_e.update(h=>{let _=h;return _.layout=h.getLayout(k),_})}function f(){n=et(this),t(2,n)}const d=g=>_e.update(k=>{let h=k;return h.theme=n,h});function I(){r=et(this),t(1,r)}const v=g=>{o(r)};return t(2,n=Ke.GRAYSCALE),t(1,r=0),[i,r,n,o,f,d,I,v]}class bn extends xe{constructor(e){super(),qe(this,e,$n,pn,me,{})}}export{bn as component};
