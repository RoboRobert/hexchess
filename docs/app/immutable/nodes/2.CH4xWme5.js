var yt=Object.defineProperty;var Ot=(s,e,t)=>e in s?yt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var L=(s,e,t)=>Ot(s,typeof e!="symbol"?e+"":e,t);import{s as me,n as fe,a as Nt,u as St,g as Bt,b as Ht,r as Ve,o as Lt,e as bt,x as Xe,k as Je}from"../chunks/scheduler.BeaK0CkN.js";import{S as be,i as xe,y as $e,z as de,a as Z,d as O,o as B,p as j,g as G,h as X,e as te,c as ne,A as ie,k as $,l as w,u as A,v as I,w as M,x as T,m as Q,t as xt,b as qt,j as kt,q as ue,n as ge,s as qe,f as ke,B as Se,C as Oe,D as ze,E as Re,F as Ze}from"../chunks/index.Daf1Fza9.js";import{w as We}from"../chunks/index.BIw2-lZ9.js";function ae(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}class Wt{constructor(e,t,n,r){this.q=e,this.r=t,this.size=n,this.color=r}}class ve{constructor(e,t){this.x=e,this.y=t}}const y=class y{constructor(e,t,n){L(this,"q");L(this,"r");L(this,"s");if(this.q=e,this.r=t,this.s=-e-t,Math.round(e+t+this.s)!==0)throw"q + r + s must be 0"}inRadius(e){return Math.abs(this.q)+Math.abs(this.r)+Math.abs(this.s)<=2*e}add(e){return new y(this.q+e.q,this.r+e.r,this.s+e.s)}subtract(e){return new y(this.q-e.q,this.r-e.r,this.s-e.s)}scale(e){return new y(this.q*e,this.r*e,this.s*e)}rotateLeft(){return new y(-this.s,-this.q,-this.r)}rotateRight(){return new y(-this.r,-this.s,-this.q)}static direction(e){return y.directions[e]}neighbor(e){return this.add(y.direction(e))}diagonalNeighbor(e){return this.add(y.diagonals[e])}knightNeighbor(e){return this.add(y.knightMoves[e])}len(){return(Math.abs(this.q)+Math.abs(this.r)+Math.abs(this.s))/2}distance(e){return this.subtract(e).len()}round(){var e=Math.round(this.q),t=Math.round(this.r),n=Math.round(this.s),r=Math.abs(e-this.q),i=Math.abs(t-this.r),o=Math.abs(n-this.s);return r>i&&r>o?e=-t-n:i>o?t=-e-n:n=-e-t,new y(e,t,n)}lerp(e,t){return new y(this.q*(1-t)+e.q*t,this.r*(1-t)+e.r*t,this.s*(1-t)+e.s*t)}linedraw(e){for(var t=this.distance(e),n=new y(this.q+1e-6,this.r+1e-6,this.s-2e-6),r=new y(e.q+1e-6,e.r+1e-6,e.s-2e-6),i=[],o=1/Math.max(t,1),f=0;f<=t;f++)i.push(n.lerp(r,o*f).round());return i}};L(y,"directions",[new y(1,0,-1),new y(1,-1,0),new y(0,-1,1),new y(-1,0,1),new y(-1,1,0),new y(0,1,-1)]),L(y,"diagonals",[new y(2,-1,-1),new y(1,-2,1),new y(-1,-1,2),new y(-2,1,1),new y(-1,2,-1),new y(1,1,-2)]),L(y,"knightMoves",[new y(2,1),new y(1,2),new y(-1,3),new y(-2,3),new y(-3,2),new y(-3,1),new y(-2,-1),new y(-1,-2),new y(1,-3),new y(2,-3),new y(3,-2),new y(3,-1)]);let oe=y;class De{constructor(e,t,n,r,i,o,f,p,C){this.f0=e,this.f1=t,this.f2=n,this.f3=r,this.b0=i,this.b1=o,this.b2=f,this.b3=p,this.start_angle=C}}class Be{constructor(e,t,n){this.orientation=e,this.size=t,this.origin=n}hexToPixel(e){var t=this.orientation,n=this.size,r=this.origin,i=(t.f0*e.q+t.f1*e.r)*n.x,o=(t.f2*e.q+t.f3*e.r)*n.y;return new ve(i+r.x,o+r.y)}pixelToHex(e){var t=this.orientation,n=this.size,r=this.origin,i=new ve((e.x-r.x)/n.x,(e.y-r.y)/n.y),o=t.b0*i.x+t.b1*i.y,f=t.b2*i.x+t.b3*i.y;return new oe(o,f,-o-f)}hexCornerOffset(e){var t=this.orientation,n=this.size,r=2*Math.PI*(t.start_angle-e)/6;return new ve(n.x*Math.cos(r),n.y*Math.sin(r))}polygonCorners(e){for(var t=[],n=this.hexToPixel(e),r=0;r<6;r++){var i=this.hexCornerOffset(r);t.push(new ve(n.x+i.x,n.y+i.y))}return t}}L(Be,"POINTY",new De(Math.sqrt(3),Math.sqrt(3)/2,0,3/2,Math.sqrt(3)/3,-1/3,0,2/3,.5)),L(Be,"FLAT",new De(3/2,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,0));var Le=(s=>(s[s.WOOD=0]="WOOD",s[s.GRAYSCALE=1]="GRAYSCALE",s))(Le||{});class et{constructor(e,t){L(this,"colorArray",[["#d18b47","#e8ab6f","#ffce9e"],["#9a9a9a","#cdcdcd","#ffffff"]]);if(this.currentIndex=e,this.theme=t,e>2||e<0)throw"color picker must be within range [0,2]"}next(){let e=this.colorArray[this.theme][this.currentIndex];return this.currentIndex++,this.currentIndex>2&&(this.currentIndex=0),e}previous(){let e=this.colorArray[this.theme][this.currentIndex];return this.currentIndex--,this.currentIndex<0&&(this.currentIndex=2),e}}class Ct{constructor(e,t,n){L(this,"currentColor");L(this,"running");L(this,"stalemate");L(this,"selectedPiece");L(this,"checkmate");this.running=e,this.currentColor=t,this.stalemate=n}}var H=(s=>(s[s.WHITE_PAWN=0]="WHITE_PAWN",s[s.BLACK_PAWN=1]="BLACK_PAWN",s[s.WHITE_ROOK=2]="WHITE_ROOK",s[s.BLACK_ROOK=3]="BLACK_ROOK",s[s.WHITE_KNIGHT=4]="WHITE_KNIGHT",s[s.BLACK_KNIGHT=5]="BLACK_KNIGHT",s[s.WHITE_BISHOP=6]="WHITE_BISHOP",s[s.BLACK_BISHOP=7]="BLACK_BISHOP",s[s.WHITE_QUEEN=8]="WHITE_QUEEN",s[s.BLACK_QUEEN=9]="BLACK_QUEEN",s[s.WHITE_KING=10]="WHITE_KING",s[s.BLACK_KING=11]="BLACK_KING",s))(H||{});const Ge=[[0,0,"svgs/Chess_plt45.svg"],[1,0,"svgs/Chess_pdt45.svg"],[0,1,"svgs/Chess_rlt45.svg"],[1,1,"svgs/Chess_rdt45.svg"],[0,3,"svgs/Chess_nlt45.svg"],[1,3,"svgs/Chess_ndt45.svg"],[0,2,"svgs/Chess_blt45.svg"],[1,2,"svgs/Chess_bdt45.svg"],[0,4,"svgs/Chess_qlt45.svg"],[1,4,"svgs/Chess_qdt45.svg"],[0,5,"svgs/Chess_klt45.svg"],[1,5,"svgs/Chess_kdt45.svg"]];class d{constructor(e,t){L(this,"enumNumber");L(this,"pieceType");L(this,"pieceImage");L(this,"hex");L(this,"color");L(this,"enPassantable");L(this,"firstMove");L(this,"boardMeta",Ce);this.enumNumber=t,this.color=Ge[t][0],this.pieceType=Ge[t][1],this.pieceImage=Ge[t][2],this.enPassantable=!1,this.firstMove=!0,this.hex=new oe(e[0],e[1]),_e.subscribe(n=>{this.boardMeta=n})}static equals(e,t){return e.q===t.q&&e.r===t.r}static cloneArray(e){var t=[];return e.forEach(n=>{t.push(new d([n.hex.q,n.hex.r],n.enumNumber))}),t}static colorToEnum(e){return e.toLowerCase()=="white"?0:1}static enumToColor(e){return e==0?"WHITE":"BLACK"}getEnemyColor(){return this.color==0?1:0}movePiece(e){let t=[];ye.subscribe(f=>{t=f});let n=this.getLegalMoves(!1,t).find(f=>d.equals(f.to,e));if(n==null)return!1;t=t.map(f=>(f.enPassantable=!1,f)),this.pieceType==0&&this.hex.distance(n.to)>1&&(this.enPassantable=!0),t=t.filter(f=>!d.equals(f.hex,n.attacking)),this.firstMove=!1,this.hex=n.to;const r=this.getPromotion();r&&(this.pieceImage=r.pieceImage,this.pieceType=r.pieceType,this.enumNumber=r.enumNumber),ye.set(t);let i=this.getEnemyColor(),o=new Ct(!0,d.enumToColor(i),!1);return d.getAllLegalMoves(i).length==0&&(o.running=!1,d.inCheck(i)?o.checkmate=[d.enumToColor(this.color),d.enumToColor(i)]:o.stalemate=!0),Ue.set(o),!0}getLegalMoves(e,t){let n=[];if(t?n=t:ye.subscribe(o=>{n=o}),!e){let o=At;if(Ue.subscribe(f=>o=f),!o.running||this.color!=d.colorToEnum(o.currentColor))return[]}let r=[];return this.getMoves(n).forEach(o=>{let f=d.cloneArray(n);d.testMove(o,f)&&r.push(o)}),r}static testMove(e,t){let n=t.find(i=>d.equals(i.hex,e.from)),r=[];return t.forEach(i=>{d.equals(i.hex,e.attacking)||r.push(i)}),n.hex=e.to,!d.inCheck(n.color,r)}static inCheck(e,t){let n=[];t?n=t:ye.subscribe(o=>{n=o});let r=[];n.forEach(o=>{o.color!=e&&(r=r.concat(o.getMoves(n)))});let i=r.map(o=>o.attacking);return!!n.find(o=>o.color==e&&o.pieceType==5&&i.find(f=>d.equals(f,o.hex)))}static getAllLegalMoves(e,t){let n=[];t?n=t:ye.subscribe(i=>{n=i});let r=[];return n.forEach(i=>{i.color===e&&(r=r.concat(i.getLegalMoves(!0)))}),r}getMoves(e){let t=[];switch(this.pieceType){case 4:{t=t.concat(this.diagonalMoves(this.boardMeta.radius,e),this.adjacentMoves(e),this.directionalMoves(e));break}case 5:{t=t.concat(this.diagonalMoves(1,e),this.adjacentMoves(e));break}case 2:{t=t.concat(this.diagonalMoves(this.boardMeta.radius,e));break}case 1:{t=t.concat(this.directionalMoves(e));break}case 3:{t=t.concat(this.knightMoves(e));break}case 0:{t=t.concat(this.pawnMoves(e));break}}return t}static pieceOn(e,t){let n=[];return t?n=t:ye.subscribe(r=>{n=r}),n.find(r=>d.equals(r.hex,e))}adjacentMoves(e){let t=[];for(let n=0;n<6;n++){let r=this.hex.neighbor(n),i=d.pieceOn(r,e);r.inRadius(this.boardMeta.radius)&&(i===void 0||i.color!==this.color)&&t.push(new ee(this.hex,r,r))}return t}diagonalMoves(e,t){let n=[];for(let r=0;r<6;r++){let i=this.hex.diagonalNeighbor(r);for(let o=0;o<e&&i.inRadius(this.boardMeta.radius);o++){let f=d.pieceOn(i,t);if(f){f.color!==this.color&&n.push(new ee(this.hex,i,i));break}n.push(new ee(this.hex,i,i)),i=i.diagonalNeighbor(r)}}return n}directionalMoves(e){let t=[];for(let n=0;n<6;n++){let r=this.hex.neighbor(n);for(;r.inRadius(this.boardMeta.radius);){let i=d.pieceOn(r,e);if(i){i.color!==this.color&&t.push(new ee(this.hex,r,r));break}t.push(new ee(this.hex,r,r)),r=r.neighbor(n)}}return t}knightMoves(e){let t=[];for(let n=0;n<12;n++){let r=this.hex.knightNeighbor(n),i=d.pieceOn(r,e);r.inRadius(this.boardMeta.radius)&&(i===void 0||i.color!==this.color)&&t.push(new ee(this.hex,r,r))}return t}pawnMoves(e){var o,f,p,C,b,_,v,c;let t=[],n=[],r=[],i=1;switch(this.firstMove==!0&&(i=2),this.color){case 0:{let u=this.hex;for(let N=0;N<i&&(u=u.neighbor(2),!d.pieceOn(u,e));N++)t.push(new ee(this.hex,u,u));n.push(new ee(this.hex,this.hex.neighbor(1),this.hex.neighbor(1)),new ee(this.hex,this.hex.neighbor(3),this.hex.neighbor(3))),((o=d.pieceOn(this.hex.neighbor(0),e))==null?void 0:o.color)!=this.color&&((f=d.pieceOn(this.hex.neighbor(0),e))!=null&&f.enPassantable)&&r.push(new ee(this.hex,this.hex.neighbor(1),this.hex.neighbor(0))),((p=d.pieceOn(this.hex.neighbor(4),e))==null?void 0:p.color)!=this.color&&((C=d.pieceOn(this.hex.neighbor(4),e))!=null&&C.enPassantable)&&r.push(new ee(this.hex,this.hex.neighbor(3),this.hex.neighbor(4)));break}case 1:{let u=this.hex;for(let N=0;N<i&&(u=u.neighbor(5),!d.pieceOn(u,e));N++)t.push(new ee(this.hex,u,u));n.push(new ee(this.hex,this.hex.neighbor(0),this.hex.neighbor(0)),new ee(this.hex,this.hex.neighbor(4),this.hex.neighbor(4))),((b=d.pieceOn(this.hex.neighbor(1),e))==null?void 0:b.color)!=this.color&&((_=d.pieceOn(this.hex.neighbor(1),e))!=null&&_.enPassantable)&&r.push(new ee(this.hex,this.hex.neighbor(0),this.hex.neighbor(1))),((v=d.pieceOn(this.hex.neighbor(3),e))==null?void 0:v.color)!=this.color&&((c=d.pieceOn(this.hex.neighbor(3),e))!=null&&c.enPassantable)&&r.push(new ee(this.hex,this.hex.neighbor(4),this.hex.neighbor(3)));break}}return t.filter(u=>u.to.inRadius(this.boardMeta.radius)&&d.pieceOn(u.to,e)===void 0).concat(n.filter(u=>{var N;return u.to.inRadius(this.boardMeta.radius)&&d.pieceOn(u.to,e)!=null&&((N=d.pieceOn(u.to,e))==null?void 0:N.color)!=this.color})).concat(r)}getPromotion(){if(this.pieceType==0){if(this.color==0&&(this.hex.q+this.hex.r==-5||this.hex.r==-5))return new d([this.hex.q,this.hex.r],8);if(this.color==1&&(this.hex.q+this.hex.r==5||this.hex.r==5))return new d([this.hex.q,this.hex.r],9)}}}class ee{constructor(e,t,n){L(this,"from");L(this,"to");L(this,"attacking");this.from=e,this.to=t,this.attacking=n}}class Kt{constructor(e,t,n,r){L(this,"layout");L(this,"theme");L(this,"radius");L(this,"hexSize");this.layout=e,this.theme=t,this.radius=n,this.hexSize=r}}const Ye=new Be(Be.FLAT,new ve(50,50),new ve(0,0)),zt=new Be(Be.POINTY,new ve(50,50),new ve(0,0));var He=(s=>(s.CURRENT="#57ff00",s.SELECTED="#ffb400",s.LEGAL="#525252",s.ATTACK="#ff0000",s.PREVIOUS="#fff700",s))(He||{});class Fe{constructor(e,t,n,r,i){L(this,"current");L(this,"selections");L(this,"legal");L(this,"attacks");L(this,"previous");this.current=e,this.selections=t,this.legal=n,this.attacks=r,this.previous=i}}const Ce=new Kt(Ye,Le.GRAYSCALE,5,50),_e=We(Ce),At=new Ct(!0,"WHITE",!1),Ue=We(At);let Rt;const Ne=We(Rt);let Pt=[new d([0,-5],H.BLACK_BISHOP),new d([0,-4],H.BLACK_BISHOP),new d([0,-3],H.BLACK_BISHOP),new d([0,5],H.WHITE_BISHOP),new d([0,4],H.WHITE_BISHOP),new d([0,3],H.WHITE_BISHOP),new d([-4,-1],H.BLACK_PAWN),new d([-3,-1],H.BLACK_PAWN),new d([-2,-1],H.BLACK_PAWN),new d([-1,-1],H.BLACK_PAWN),new d([0,-1],H.BLACK_PAWN),new d([1,-2],H.BLACK_PAWN),new d([2,-3],H.BLACK_PAWN),new d([3,-4],H.BLACK_PAWN),new d([4,-5],H.BLACK_PAWN),new d([-4,5],H.WHITE_PAWN),new d([-3,4],H.WHITE_PAWN),new d([-2,3],H.WHITE_PAWN),new d([-1,2],H.WHITE_PAWN),new d([0,1],H.WHITE_PAWN),new d([1,1],H.WHITE_PAWN),new d([2,1],H.WHITE_PAWN),new d([3,1],H.WHITE_PAWN),new d([4,1],H.WHITE_PAWN),new d([-3,-2],H.BLACK_ROOK),new d([3,-5],H.BLACK_ROOK),new d([-3,5],H.WHITE_ROOK),new d([3,2],H.WHITE_ROOK),new d([-2,-3],H.BLACK_KNIGHT),new d([2,-5],H.BLACK_KNIGHT),new d([-2,5],H.WHITE_KNIGHT),new d([2,3],H.WHITE_KNIGHT),new d([-1,-4],H.BLACK_QUEEN),new d([-1,5],H.WHITE_QUEEN),new d([1,-5],H.BLACK_KING),new d([1,4],H.WHITE_KING)];const ye=We(Pt),je=We(new Fe(void 0,[],[],[],[]));function Gt(s){let e,t;return{c(){e=$e("g"),t=$e("polygon"),this.h()},l(n){e=de(n,"g",{transform:!0});var r=Z(e);t=de(r,"polygon",{class:!0,points:!0,style:!0,opacity:!0}),Z(t).forEach(O),r.forEach(O),this.h()},h(){B(t,"class","hexagon"),B(t,"points",s[2]),j(t,"fill",s[0]),j(t,"z-index","50"),j(t,"stroke","black"),j(t,"stroke-width","2px"),B(t,"opacity","0.3"),B(e,"transform","translate("+s[1].x+", "+s[1].y+")")},m(n,r){G(n,e,r),X(e,t)},p(n,[r]){r&1&&j(t,"fill",n[0])},i:fe,o:fe,d(n){n&&O(e)}}}function Yt(s){var e="";return s.forEach(t=>{e=e.concat(`${t.x},${t.y} `)}),e}function Ut(s,e,t){let{q:n}=e,{r}=e,{color:i}=e,o=Ce;_e.subscribe(v=>{o=v});const f=new oe(0,0),p=o.layout.polygonCorners(f),C=new oe(n,r),b=o.layout.hexToPixel(C);o.hexSize;const _=Yt(p);return s.$$set=v=>{"q"in v&&t(3,n=v.q),"r"in v&&t(4,r=v.r),"color"in v&&t(0,i=v.color)},[i,b,_,n,r]}class It extends be{constructor(e){super(),xe(this,e,Ut,Gt,me,{q:3,r:4,color:0})}}function jt(s){let e,t,n,r;const i=s[8].default,o=Nt(i,s,s[7],null);return{c(){e=te("div"),o&&o.c(),this.h()},l(f){e=ne(f,"DIV",{class:!0});var p=Z(e);o&&o.l(p),p.forEach(O),this.h()},h(){B(e,"class","draggable svelte-kwdgvp")},m(f,p){G(f,e,p),o&&o.m(e,null),s[9](e),t=!0,n||(r=[ie(window,"pointermove",s[4]),ie(window,"pointerup",s[1]),ie(window,"touchend",s[1]),ie(window,"touchmove",s[5]),ie(window,"pointerdown",s[3]),ie(e,"pointerdown",s[2]),ie(e,"contextmenu",Vt)],n=!0)},p(f,[p]){o&&o.p&&(!t||p&128)&&St(o,i,f,f[7],t?Ht(i,f[7],p,null):Bt(f[7]),null)},i(f){t||($(o,f),t=!0)},o(f){w(o,f),t=!1},d(f){f&&O(e),o&&o.d(f),s[9](null),n=!1,Ve(r)}}}const Vt=function(s){s.preventDefault()};function Ft(s,e,t){let{$$slots:n={},$$scope:r}=e,{currentPiece:i}=e,o;Ne.subscribe(E=>{o=E}),_e.subscribe(E=>{});let f,p,C=0,b=0,_=0,v=0,c,u=[],N,x=[],z=[],q=[],J=[];je.subscribe(E=>J=E.previous);let h=!1;Lt(()=>{g()});function g(){var P,V;_=c.getBoundingClientRect().width,v=c.getBoundingClientRect().height;let E=document.getElementById(`${i.hex.q},${i.hex.r}`).getBoundingClientRect();C=(P=c.parentElement)==null?void 0:P.getBoundingClientRect().left,b=(V=c.parentElement)==null?void 0:V.getBoundingClientRect().top,c.setAttribute("style",`left:${E.left+E.width/2-_/2-C}px; top:${E.top+E.height/2-v/2-b}px;`)}function l(E){if(t(0,c.style.cursor="",c),t(0,c.style.zIndex="",c),!!h){if(h=!1,q.length>0){let P=i.movePiece(q[0]);P?(o&&Ne.set(void 0),z=[],x=[],J=[N,q[0]],N=void 0,g()):P||(o&&d.equals(o.hex,q[0])?(Ne.set(void 0),N=void 0,z=[],x=[]):(!o||o!=i)&&Ne.set(i))}return t(0,c.style.left=f,c),t(0,c.style.top=p,c),q=[],ce(),!0}}function S(E){var V,D;h=!0,t(0,c.style.zIndex="100",c),t(0,c.style.cursor="grabbing",c),f=c.style.left,p=c.style.top,C=(V=c.parentElement)==null?void 0:V.getBoundingClientRect().left,b=(D=c.parentElement)==null?void 0:D.getBoundingClientRect().top;let P=i.getLegalMoves(!1);N=i.hex,z=P.filter(F=>d.pieceOn(F.attacking)).map(F=>F.to),x=P.filter(F=>!d.pieceOn(F.attacking)).map(F=>F.to),he(E.clientX,E.clientY)}function k(E){let P=pe(E.clientX,E.clientY);!P||h||o==i&&(i.movePiece(P)?(o&&Ne.set(void 0),z=[],x=[],J=[N,P],N=void 0,g()):(Ne.set(void 0),N=void 0,z=[],x=[]),ce())}function K(E){he(E.clientX,E.clientY)}function re(E){return he(E.touches[0].clientX,E.touches[0].clientY),!0}function he(E,P){if(!h)return;let V=E-_/2-C,D=P-v/2-b;t(0,c.style.left=`${V}px`,c),t(0,c.style.top=`${D}px`,c);let F=pe(E,P);F?q[0]=F:q=[],ce()}function pe(E,P){u=document.elementsFromPoint(E,P);let V=u.find(D=>D.classList.contains("droppable"));if(V){let D=parseInt(V.getAttribute("data-q")),F=parseInt(V.getAttribute("data-r"));return new oe(D,F)}}function ce(){je.set(new Fe(N,q,x,z,J))}function we(E){bt[E?"unshift":"push"](()=>{c=E,t(0,c)})}return s.$$set=E=>{"currentPiece"in E&&t(6,i=E.currentPiece),"$$scope"in E&&t(7,r=E.$$scope)},[c,l,S,k,K,re,i,r,n,we]}class Qt extends be{constructor(e){super(),xe(this,e,Ft,jt,me,{currentPiece:6})}}function Xt(s){let e,t;return{c(){e=te("img"),this.h()},l(n){e=ne(n,"IMG",{style:!0,class:!0,draggable:!0,src:!0}),this.h()},h(){j(e,"z-index","100"),j(e,"width",s[1]*1.3+"px"),j(e,"height",s[1]*1.3+"px"),B(e,"class","piece"),B(e,"draggable","false"),Xe(e.src,t=s[0].pieceImage)||B(e,"src",t)},m(n,r){G(n,e,r)},p(n,r){r&1&&!Xe(e.src,t=n[0].pieceImage)&&B(e,"src",t)},d(n){n&&O(e)}}}function Jt(s){let e,t;return e=new Qt({props:{currentPiece:s[0],$$slots:{default:[Xt]},$$scope:{ctx:s}}}),{c(){A(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,r){M(e,n,r),t=!0},p(n,[r]){const i={};r&1&&(i.currentPiece=n[0]),r&9&&(i.$$scope={dirty:r,ctx:n}),e.$set(i)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function Zt(s,e,t){let{piece:n}=e,r=Ce;_e.subscribe(o=>{r=o});const i=r.layout.size.x;return s.$$set=o=>{"piece"in o&&t(0,n=o.piece)},[n,i]}class Dt extends be{constructor(e){super(),xe(this,e,Zt,Jt,me,{piece:0})}}function tt(s){let e;return{c(){e=$e("circle"),this.h()},l(t){e=de(t,"circle",{r:!0,points:!0,style:!0}),Z(e).forEach(O),this.h()},h(){B(e,"r",s[0]),B(e,"points",s[4]),j(e,"fill",s[1]),j(e,"z-index","50"),j(e,"stroke",s[1]),j(e,"stroke-width","4px")},m(t,n){G(t,e,n)},p(t,n){n&1&&B(e,"r",t[0]),n&2&&j(e,"fill",t[1]),n&2&&j(e,"stroke",t[1])},d(t){t&&O(e)}}}function nt(s){let e;return{c(){e=$e("circle"),this.h()},l(t){e=de(t,"circle",{r:!0,points:!0,style:!0}),Z(e).forEach(O),this.h()},h(){B(e,"r",s[0]),B(e,"points",s[4]),j(e,"fill","none"),j(e,"z-index","50"),j(e,"stroke",s[1]),j(e,"stroke-width","4px")},m(t,n){G(t,e,n)},p(t,n){n&1&&B(e,"r",t[0]),n&2&&j(e,"stroke",t[1])},d(t){t&&O(e)}}}function en(s){let e,t,n=s[2]&&tt(s),r=!s[2]&&nt(s);return{c(){e=$e("g"),n&&n.c(),t=Q(),r&&r.c(),this.h()},l(i){e=de(i,"g",{transform:!0});var o=Z(e);n&&n.l(o),t=Q(),r&&r.l(o),o.forEach(O),this.h()},h(){B(e,"transform","translate("+s[3].x+", "+s[3].y+")")},m(i,o){G(i,e,o),n&&n.m(e,null),X(e,t),r&&r.m(e,null)},p(i,[o]){i[2]?n?n.p(i,o):(n=tt(i),n.c(),n.m(e,t)):n&&(n.d(1),n=null),i[2]?r&&(r.d(1),r=null):r?r.p(i,o):(r=nt(i),r.c(),r.m(e,null))},i:fe,o:fe,d(i){i&&O(e),n&&n.d(),r&&r.d()}}}function tn(s){var e="";return s.forEach(t=>{e=e.concat(`${t.x},${t.y} `)}),e}function nn(s,e,t){let{q:n}=e,{r}=e,{size:i}=e,{color:o}=e,{fill:f}=e,p=Ce;_e.subscribe(u=>{p=u});const C=new oe(0,0),b=p.layout.polygonCorners(C),_=new oe(n,r),v=p.layout.hexToPixel(_),c=tn(b);return s.$$set=u=>{"q"in u&&t(5,n=u.q),"r"in u&&t(6,r=u.r),"size"in u&&t(0,i=u.size),"color"in u&&t(1,o=u.color),"fill"in u&&t(2,f=u.fill)},[i,o,f,v,c,n,r]}class Qe extends be{constructor(e){super(),xe(this,e,nn,en,me,{q:5,r:6,size:0,color:1,fill:2})}}function rn(s){let e,t,n;return{c(){e=$e("g"),t=$e("text"),n=xt(s[0]),this.h()},l(r){e=de(r,"g",{transform:!0});var i=Z(e);t=de(i,"text",{x:!0,y:!0,class:!0});var o=Z(t);n=qt(o,s[0]),o.forEach(O),i.forEach(O),this.h()},h(){B(t,"x",-15*s[2]-12),B(t,"y",-15*s[3]),B(t,"class","coordinate"),B(e,"transform","translate("+s[1].x+", "+s[1].y+")")},m(r,i){G(r,e,i),X(e,t),X(t,n)},p(r,[i]){i&1&&kt(n,r[0])},i:fe,o:fe,d(r){r&&O(e)}}}function sn(s,e,t){let{q:n}=e,{r}=e,{text:i}=e,o=Ce;_e.subscribe(v=>{o=v});const f=new oe(n,r),p=o.layout.hexToPixel(f),C=Math.sqrt(p.x*p.x+p.y*p.y),b=p.x/C,_=p.y/C;return o.layout.size.x,s.$$set=v=>{"q"in v&&t(4,n=v.q),"r"in v&&t(5,r=v.r),"text"in v&&t(0,i=v.text)},[i,p,b,_,n,r]}class W extends be{constructor(e){super(),xe(this,e,sn,rn,me,{q:4,r:5,text:0})}}function on(s){let e,t,n,r,i;return{c(){e=$e("g"),t=$e("polygon"),this.h()},l(o){e=de(o,"g",{transform:!0});var f=Z(e);t=de(f,"polygon",{id:!0,"data-q":!0,"data-r":!0,class:!0,points:!0,style:!0}),Z(t).forEach(O),f.forEach(O),this.h()},h(){B(t,"id",n=s[0]+","+s[1]),B(t,"data-q",r=s[0]+","),B(t,"data-r",i=s[1]+","),B(t,"class","hexagon droppable"),B(t,"points",s[4]),j(t,"fill",s[2]),j(t,"stroke","black"),j(t,"stroke-width","2px"),B(e,"transform","translate("+s[3].x+", "+s[3].y+")")},m(o,f){G(o,e,f),X(e,t)},p(o,[f]){f&3&&n!==(n=o[0]+","+o[1])&&B(t,"id",n),f&1&&r!==(r=o[0]+",")&&B(t,"data-q",r),f&2&&i!==(i=o[1]+",")&&B(t,"data-r",i),f&4&&j(t,"fill",o[2])},i:fe,o:fe,d(o){o&&O(e)}}}function ln(s){var e="";return s.forEach(t=>{e=e.concat(`${t.x},${t.y} `)}),e}function an(s,e,t){let{q:n}=e,{r}=e,{color:i}=e,o=Ce;_e.subscribe(v=>{o=v});const f=new oe(0,0),p=o.layout.polygonCorners(f),C=new oe(n,r),b=o.layout.hexToPixel(C);o.layout.size.x;const _=ln(p);return s.$$set=v=>{"q"in v&&t(0,n=v.q),"r"in v&&t(1,r=v.r),"color"in v&&t(2,i=v.color)},[n,r,i,b,_]}class fn extends be{constructor(e){super(),xe(this,e,an,on,me,{q:0,r:1,color:2})}}function rt(s,e,t){const n=s.slice();return n[10]=e[t],n}function st(s,e,t){const n=s.slice();return n[13]=e[t],n}function it(s,e,t){const n=s.slice();return n[13]=e[t],n}function ot(s,e,t){const n=s.slice();return n[13]=e[t],n}function lt(s,e,t){const n=s.slice();return n[13]=e[t],n}function at(s,e,t){const n=s.slice();return n[22]=e[t].q,n[23]=e[t].r,n[24]=e[t].color,n}function ft(s){let e,t;return e=new fn({props:{q:s[22],r:s[23],color:s[24]}}),{c(){A(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,r){M(e,n,r),t=!0},p(n,r){const i={};r&2&&(i.q=n[22]),r&2&&(i.r=n[23]),r&2&&(i.color=n[24]),e.$set(i)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function ht(s){let e,t;return e=new It({props:{q:s[13].q,r:s[13].r,color:He.PREVIOUS}}),{c(){A(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,r){M(e,n,r),t=!0},p(n,r){const i={};r&4&&(i.q=n[13].q),r&4&&(i.r=n[13].r),e.$set(i)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function ct(s){let e,t;return e=new Qe({props:{q:s[13].q,r:s[13].r,size:s[0].hexSize/5,color:He.LEGAL,fill:!0}}),{c(){A(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,r){M(e,n,r),t=!0},p(n,r){const i={};r&4&&(i.q=n[13].q),r&4&&(i.r=n[13].r),r&1&&(i.size=n[0].hexSize/5),e.$set(i)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function ut(s){let e,t;return e=new Qe({props:{q:s[13].q,r:s[13].r,size:s[0].hexSize/1.5,color:He.ATTACK,fill:!1}}),{c(){A(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,r){M(e,n,r),t=!0},p(n,r){const i={};r&4&&(i.q=n[13].q),r&4&&(i.r=n[13].r),r&1&&(i.size=n[0].hexSize/1.5),e.$set(i)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function gt(s){let e,t;return e=new It({props:{q:s[2].current.q,r:s[2].current.r,color:He.CURRENT}}),{c(){A(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,r){M(e,n,r),t=!0},p(n,r){const i={};r&4&&(i.q=n[2].current.q),r&4&&(i.r=n[2].current.r),e.$set(i)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function mt(s){let e,t;return e=new Qe({props:{q:s[13].q,r:s[13].r,size:s[0].hexSize/1.5,color:He.SELECTED,fill:!1}}),{c(){A(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,r){M(e,n,r),t=!0},p(n,r){const i={};r&4&&(i.q=n[13].q),r&4&&(i.r=n[13].r),r&1&&(i.size=n[0].hexSize/1.5),e.$set(i)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function pt(s){let e,t,n,r,i,o,f=ae(s[2].previous),p=[];for(let h=0;h<f.length;h+=1)p[h]=ht(lt(s,f,h));const C=h=>w(p[h],1,1,()=>{p[h]=null});let b=ae(s[2].legal),_=[];for(let h=0;h<b.length;h+=1)_[h]=ct(ot(s,b,h));const v=h=>w(_[h],1,1,()=>{_[h]=null});let c=ae(s[2].attacks),u=[];for(let h=0;h<c.length;h+=1)u[h]=ut(it(s,c,h));const N=h=>w(u[h],1,1,()=>{u[h]=null});let x=s[2].current&&gt(s),z=ae(s[2].selections),q=[];for(let h=0;h<z.length;h+=1)q[h]=mt(st(s,z,h));const J=h=>w(q[h],1,1,()=>{q[h]=null});return{c(){for(let h=0;h<p.length;h+=1)p[h].c();e=Q();for(let h=0;h<_.length;h+=1)_[h].c();t=Q();for(let h=0;h<u.length;h+=1)u[h].c();n=Q(),x&&x.c(),r=Q();for(let h=0;h<q.length;h+=1)q[h].c();i=Q()},l(h){for(let g=0;g<p.length;g+=1)p[g].l(h);e=Q();for(let g=0;g<_.length;g+=1)_[g].l(h);t=Q();for(let g=0;g<u.length;g+=1)u[g].l(h);n=Q(),x&&x.l(h),r=Q();for(let g=0;g<q.length;g+=1)q[g].l(h);i=Q()},m(h,g){for(let l=0;l<p.length;l+=1)p[l]&&p[l].m(h,g);G(h,e,g);for(let l=0;l<_.length;l+=1)_[l]&&_[l].m(h,g);G(h,t,g);for(let l=0;l<u.length;l+=1)u[l]&&u[l].m(h,g);G(h,n,g),x&&x.m(h,g),G(h,r,g);for(let l=0;l<q.length;l+=1)q[l]&&q[l].m(h,g);G(h,i,g),o=!0},p(h,g){if(g&4){f=ae(h[2].previous);let l;for(l=0;l<f.length;l+=1){const S=lt(h,f,l);p[l]?(p[l].p(S,g),$(p[l],1)):(p[l]=ht(S),p[l].c(),$(p[l],1),p[l].m(e.parentNode,e))}for(ue(),l=f.length;l<p.length;l+=1)C(l);ge()}if(g&5){b=ae(h[2].legal);let l;for(l=0;l<b.length;l+=1){const S=ot(h,b,l);_[l]?(_[l].p(S,g),$(_[l],1)):(_[l]=ct(S),_[l].c(),$(_[l],1),_[l].m(t.parentNode,t))}for(ue(),l=b.length;l<_.length;l+=1)v(l);ge()}if(g&5){c=ae(h[2].attacks);let l;for(l=0;l<c.length;l+=1){const S=it(h,c,l);u[l]?(u[l].p(S,g),$(u[l],1)):(u[l]=ut(S),u[l].c(),$(u[l],1),u[l].m(n.parentNode,n))}for(ue(),l=c.length;l<u.length;l+=1)N(l);ge()}if(h[2].current?x?(x.p(h,g),g&4&&$(x,1)):(x=gt(h),x.c(),$(x,1),x.m(r.parentNode,r)):x&&(ue(),w(x,1,1,()=>{x=null}),ge()),g&5){z=ae(h[2].selections);let l;for(l=0;l<z.length;l+=1){const S=st(h,z,l);q[l]?(q[l].p(S,g),$(q[l],1)):(q[l]=mt(S),q[l].c(),$(q[l],1),q[l].m(i.parentNode,i))}for(ue(),l=z.length;l<q.length;l+=1)J(l);ge()}},i(h){if(!o){for(let g=0;g<f.length;g+=1)$(p[g]);for(let g=0;g<b.length;g+=1)$(_[g]);for(let g=0;g<c.length;g+=1)$(u[g]);$(x);for(let g=0;g<z.length;g+=1)$(q[g]);o=!0}},o(h){p=p.filter(Boolean);for(let g=0;g<p.length;g+=1)w(p[g]);_=_.filter(Boolean);for(let g=0;g<_.length;g+=1)w(_[g]);u=u.filter(Boolean);for(let g=0;g<u.length;g+=1)w(u[g]);w(x),q=q.filter(Boolean);for(let g=0;g<q.length;g+=1)w(q[g]);o=!1},d(h){h&&(O(e),O(t),O(n),O(r),O(i)),Se(p,h),Se(_,h),Se(u,h),x&&x.d(h),Se(q,h)}}}function $t(s){let e,t;return e=new Dt({props:{piece:s[10]}}),{c(){A(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,r){M(e,n,r),t=!0},p(n,r){const i={};r&8&&(i.piece=n[10]),e.$set(i)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function dt(s){let e,t,n,r=s[2],i,o,f,p,C,b,_,v,c,u,N,x,z,q,J,h,g,l,S,k,K,re,he,pe,ce,we,E,P,V,D,F,Ae,Ie,Me,Pe,Ke,Te=ae(s[1]),Y=[];for(let a=0;a<Te.length;a+=1)Y[a]=ft(at(s,Te,a));const Tt=a=>w(Y[a],1,1,()=>{Y[a]=null});let le=pt(s);o=new W({props:{q:-5,r:6,text:"a"}}),f=new W({props:{q:-4,r:6,text:"b"}}),p=new W({props:{q:-3,r:6,text:"c"}}),C=new W({props:{q:-2,r:6,text:"d"}}),b=new W({props:{q:-1,r:6,text:"e"}}),_=new W({props:{q:0,r:6,text:"f"}}),v=new W({props:{q:1,r:5,text:"g"}}),c=new W({props:{q:2,r:4,text:"h"}}),u=new W({props:{q:3,r:3,text:"i"}}),N=new W({props:{q:4,r:2,text:"k"}}),x=new W({props:{q:5,r:1,text:"l"}}),z=new W({props:{q:-6,r:5,text:"1"}}),q=new W({props:{q:-6,r:4,text:"2"}}),J=new W({props:{q:-6,r:3,text:"3"}}),h=new W({props:{q:-6,r:2,text:"4"}}),g=new W({props:{q:-6,r:1,text:"5"}}),l=new W({props:{q:-6,r:0,text:"6"}}),S=new W({props:{q:-5,r:-1,text:"7"}}),k=new W({props:{q:-4,r:-2,text:"8"}}),K=new W({props:{q:-3,r:-3,text:"9"}}),re=new W({props:{q:-2,r:-4,text:"10"}}),he=new W({props:{q:-1,r:-5,text:"11"}}),pe=new W({props:{q:6,r:-1,text:"1"}}),ce=new W({props:{q:6,r:-2,text:"2"}}),we=new W({props:{q:6,r:-3,text:"3"}}),E=new W({props:{q:6,r:-4,text:"4"}}),P=new W({props:{q:6,r:-5,text:"5"}}),V=new W({props:{q:6,r:-6,text:"6"}}),D=new W({props:{q:5,r:-6,text:"7"}}),F=new W({props:{q:4,r:-6,text:"8"}}),Ae=new W({props:{q:3,r:-6,text:"9"}}),Ie=new W({props:{q:2,r:-6,text:"10"}}),Me=new W({props:{q:1,r:-6,text:"11"}});let Ee=ae(s[3]),U=[];for(let a=0;a<Ee.length;a+=1)U[a]=$t(rt(s,Ee,a));const Et=a=>w(U[a],1,1,()=>{U[a]=null});return{c(){e=te("div"),t=$e("svg");for(let a=0;a<Y.length;a+=1)Y[a].c();n=Q(),le.c(),i=Q(),A(o.$$.fragment),A(f.$$.fragment),A(p.$$.fragment),A(C.$$.fragment),A(b.$$.fragment),A(_.$$.fragment),A(v.$$.fragment),A(c.$$.fragment),A(u.$$.fragment),A(N.$$.fragment),A(x.$$.fragment),A(z.$$.fragment),A(q.$$.fragment),A(J.$$.fragment),A(h.$$.fragment),A(g.$$.fragment),A(l.$$.fragment),A(S.$$.fragment),A(k.$$.fragment),A(K.$$.fragment),A(re.$$.fragment),A(he.$$.fragment),A(pe.$$.fragment),A(ce.$$.fragment),A(we.$$.fragment),A(E.$$.fragment),A(P.$$.fragment),A(V.$$.fragment),A(D.$$.fragment),A(F.$$.fragment),A(Ae.$$.fragment),A(Ie.$$.fragment),A(Me.$$.fragment),Pe=qe();for(let a=0;a<U.length;a+=1)U[a].c();this.h()},l(a){e=ne(a,"DIV",{class:!0});var R=Z(e);t=de(R,"svg",{overflow:!0,viewBox:!0,width:!0,height:!0});var m=Z(t);for(let se=0;se<Y.length;se+=1)Y[se].l(m);n=Q(),le.l(m),i=Q(),I(o.$$.fragment,m),I(f.$$.fragment,m),I(p.$$.fragment,m),I(C.$$.fragment,m),I(b.$$.fragment,m),I(_.$$.fragment,m),I(v.$$.fragment,m),I(c.$$.fragment,m),I(u.$$.fragment,m),I(N.$$.fragment,m),I(x.$$.fragment,m),I(z.$$.fragment,m),I(q.$$.fragment,m),I(J.$$.fragment,m),I(h.$$.fragment,m),I(g.$$.fragment,m),I(l.$$.fragment,m),I(S.$$.fragment,m),I(k.$$.fragment,m),I(K.$$.fragment,m),I(re.$$.fragment,m),I(he.$$.fragment,m),I(pe.$$.fragment,m),I(ce.$$.fragment,m),I(we.$$.fragment,m),I(E.$$.fragment,m),I(P.$$.fragment,m),I(V.$$.fragment,m),I(D.$$.fragment,m),I(F.$$.fragment,m),I(Ae.$$.fragment,m),I(Ie.$$.fragment,m),I(Me.$$.fragment,m),m.forEach(O),Pe=ke(R);for(let se=0;se<U.length;se+=1)U[se].l(R);R.forEach(O),this.h()},h(){B(t,"overflow","visible"),B(t,"viewBox",s[6]),B(t,"width",s[5].x),B(t,"height",s[5].y),B(e,"class","board svelte-u1jk4r")},m(a,R){G(a,e,R),X(e,t);for(let m=0;m<Y.length;m+=1)Y[m]&&Y[m].m(t,null);X(t,n),le.m(t,null),X(t,i),M(o,t,null),M(f,t,null),M(p,t,null),M(C,t,null),M(b,t,null),M(_,t,null),M(v,t,null),M(c,t,null),M(u,t,null),M(N,t,null),M(x,t,null),M(z,t,null),M(q,t,null),M(J,t,null),M(h,t,null),M(g,t,null),M(l,t,null),M(S,t,null),M(k,t,null),M(K,t,null),M(re,t,null),M(he,t,null),M(pe,t,null),M(ce,t,null),M(we,t,null),M(E,t,null),M(P,t,null),M(V,t,null),M(D,t,null),M(F,t,null),M(Ae,t,null),M(Ie,t,null),M(Me,t,null),X(e,Pe);for(let m=0;m<U.length;m+=1)U[m]&&U[m].m(e,null);s[7](e),Ke=!0},p(a,R){if(R&2){Te=ae(a[1]);let m;for(m=0;m<Te.length;m+=1){const se=at(a,Te,m);Y[m]?(Y[m].p(se,R),$(Y[m],1)):(Y[m]=ft(se),Y[m].c(),$(Y[m],1),Y[m].m(t,n))}for(ue(),m=Te.length;m<Y.length;m+=1)Tt(m);ge()}if(R&4&&me(r,r=a[2])?(ue(),w(le,1,1,fe),ge(),le=pt(a),le.c(),$(le,1),le.m(t,i)):le.p(a,R),R&8){Ee=ae(a[3]);let m;for(m=0;m<Ee.length;m+=1){const se=rt(a,Ee,m);U[m]?(U[m].p(se,R),$(U[m],1)):(U[m]=$t(se),U[m].c(),$(U[m],1),U[m].m(e,null))}for(ue(),m=Ee.length;m<U.length;m+=1)Et(m);ge()}},i(a){if(!Ke){for(let R=0;R<Te.length;R+=1)$(Y[R]);$(le),$(o.$$.fragment,a),$(f.$$.fragment,a),$(p.$$.fragment,a),$(C.$$.fragment,a),$(b.$$.fragment,a),$(_.$$.fragment,a),$(v.$$.fragment,a),$(c.$$.fragment,a),$(u.$$.fragment,a),$(N.$$.fragment,a),$(x.$$.fragment,a),$(z.$$.fragment,a),$(q.$$.fragment,a),$(J.$$.fragment,a),$(h.$$.fragment,a),$(g.$$.fragment,a),$(l.$$.fragment,a),$(S.$$.fragment,a),$(k.$$.fragment,a),$(K.$$.fragment,a),$(re.$$.fragment,a),$(he.$$.fragment,a),$(pe.$$.fragment,a),$(ce.$$.fragment,a),$(we.$$.fragment,a),$(E.$$.fragment,a),$(P.$$.fragment,a),$(V.$$.fragment,a),$(D.$$.fragment,a),$(F.$$.fragment,a),$(Ae.$$.fragment,a),$(Ie.$$.fragment,a),$(Me.$$.fragment,a);for(let R=0;R<Ee.length;R+=1)$(U[R]);Ke=!0}},o(a){Y=Y.filter(Boolean);for(let R=0;R<Y.length;R+=1)w(Y[R]);w(le),w(o.$$.fragment,a),w(f.$$.fragment,a),w(p.$$.fragment,a),w(C.$$.fragment,a),w(b.$$.fragment,a),w(_.$$.fragment,a),w(v.$$.fragment,a),w(c.$$.fragment,a),w(u.$$.fragment,a),w(N.$$.fragment,a),w(x.$$.fragment,a),w(z.$$.fragment,a),w(q.$$.fragment,a),w(J.$$.fragment,a),w(h.$$.fragment,a),w(g.$$.fragment,a),w(l.$$.fragment,a),w(S.$$.fragment,a),w(k.$$.fragment,a),w(K.$$.fragment,a),w(re.$$.fragment,a),w(he.$$.fragment,a),w(pe.$$.fragment,a),w(ce.$$.fragment,a),w(we.$$.fragment,a),w(E.$$.fragment,a),w(P.$$.fragment,a),w(V.$$.fragment,a),w(D.$$.fragment,a),w(F.$$.fragment,a),w(Ae.$$.fragment,a),w(Ie.$$.fragment,a),w(Me.$$.fragment,a),U=U.filter(Boolean);for(let R=0;R<U.length;R+=1)w(U[R]);Ke=!1},d(a){a&&O(e),Se(Y,a),le.d(a),T(o),T(f),T(p),T(C),T(b),T(_),T(v),T(c),T(u),T(N),T(x),T(z),T(q),T(J),T(h),T(g),T(l),T(S),T(k),T(K),T(re),T(he),T(pe),T(ce),T(we),T(E),T(P),T(V),T(D),T(F),T(Ae),T(Ie),T(Me),Se(U,a),s[7](null)}}}function hn(s){let e=[s[0].theme,s[3]],t,n,r=dt(s);return{c(){r.c(),t=Q()},l(i){r.l(i),t=Q()},m(i,o){r.m(i,o),G(i,t,o),n=!0},p(i,[o]){o&9&&me(e,e=[i[0].theme,i[3]])?(ue(),w(r,1,1,fe),ge(),r=dt(i),r.c(),$(r,1),r.m(t.parentNode,t)):r.p(i,o)},i(i){n||($(r),n=!0)},o(i){w(r),n=!1},d(i){i&&O(t),r.d(i)}}}function cn(s,e,t){let n=Ce;_e.subscribe(c=>{t(0,n=c),p()});const r=n.radius*2+1;var i=[],o=new Fe(void 0,[],[],[],[]);je.subscribe(c=>t(2,o=c));var f=[];ye.subscribe(c=>{t(3,f=c)});function p(){t(1,i=[]);let c=new et(0,n.theme);for(let u=n.radius;u>=n.radius*-1;u--){let N=new et(c.currentIndex,c.theme);for(let x=n.radius;x>=n.radius*-1;x--)new oe(u,x).inRadius(n.radius)&&i.push(new Wt(u,x,n.hexSize,N.next()));u>0?c.next():c.previous()}}p();const C=new ve(n.hexSize*(3/2)*r,n.hexSize*Math.sqrt(3)*(r+1)),b=`${C.x/-2} ${C.y/-2} ${C.x} ${C.y}`;let _;function v(c){bt[c?"unshift":"push"](()=>{_=c,t(4,_)})}return[n,i,o,f,_,C,b,v]}class un extends be{constructor(e){super(),xe(this,e,cn,hn,me,{})}}function _t(s){let e,t,n,r="×",i,o,f="GAME OVER!",p,C,b,_,v;return{c(){e=te("div"),t=te("div"),n=te("span"),n.textContent=r,i=qe(),o=te("p"),o.textContent=f,p=qe(),C=te("p"),b=xt(s[0]),this.h()},l(c){e=ne(c,"DIV",{class:!0});var u=Z(e);t=ne(u,"DIV",{class:!0});var N=Z(t);n=ne(N,"SPAN",{class:!0,"data-svelte-h":!0}),Oe(n)!=="svelte-ty2x6x"&&(n.textContent=r),i=ke(N),o=ne(N,"P",{"data-svelte-h":!0}),Oe(o)!=="svelte-av41o5"&&(o.textContent=f),p=ke(N),C=ne(N,"P",{});var x=Z(C);b=qt(x,s[0]),x.forEach(O),N.forEach(O),u.forEach(O),this.h()},h(){B(n,"class","close-button svelte-p4vkuh"),B(t,"class","popup-content svelte-p4vkuh"),B(e,"class","popup svelte-p4vkuh")},m(c,u){G(c,e,u),X(e,t),X(t,n),X(t,i),X(t,o),X(t,p),X(t,C),X(C,b),_||(v=[ie(n,"click",s[2]),ie(e,"click",s[3])],_=!0)},p(c,u){u&1&&kt(b,c[0])},d(c){c&&O(e),_=!1,Ve(v)}}}function gn(s){let e,t=s[1]&&_t(s);return{c(){t&&t.c(),e=Q()},l(n){t&&t.l(n),e=Q()},m(n,r){t&&t.m(n,r),G(n,e,r)},p(n,[r]){n[1]?t?t.p(n,r):(t=_t(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:fe,o:fe,d(n){n&&O(e),t&&t.d(n)}}}function mn(s,e,t){let{text:n=""}=e,r=!0;function i(){t(1,r=!1)}function o(f){f.target===f.currentTarget&&i()}return s.$$set=f=>{"text"in f&&t(0,n=f.text)},[n,r,i,o]}class Mt extends be{constructor(e){super(),xe(this,e,mn,gn,me,{text:0})}}function wt(s){let e,t;return e=new Mt({props:{text:s[0].checkmate[0]+" checkmated "+s[0].checkmate[1]}}),{c(){A(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,r){M(e,n,r),t=!0},p(n,r){const i={};r&1&&(i.text=n[0].checkmate[0]+" checkmated "+n[0].checkmate[1]),e.$set(i)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function vt(s){let e,t;return e=new Mt({props:{text:"Stalemate!"}}),{c(){A(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,r){M(e,n,r),t=!0},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function pn(s){let e,t="Hexagonal Chess",n,r,i,o="Grayscale",f,p="Wood",C,b,_,v="Flat",c,u="Pointy",N,x,z,q,J,h,g,l=s[0].checkmate&&wt(s),S=s[0].stalemate&&vt();return q=new un({}),{c(){e=te("h1"),e.textContent=t,n=qe(),r=te("select"),i=te("option"),i.textContent=o,f=te("option"),f.textContent=p,C=qe(),b=te("select"),_=te("option"),_.textContent=v,c=te("option"),c.textContent=u,N=qe(),l&&l.c(),x=qe(),S&&S.c(),z=qe(),A(q.$$.fragment),this.h()},l(k){e=ne(k,"H1",{class:!0,"data-svelte-h":!0}),Oe(e)!=="svelte-1bl0xm5"&&(e.textContent=t),n=ke(k),r=ne(k,"SELECT",{});var K=Z(r);i=ne(K,"OPTION",{"data-svelte-h":!0}),Oe(i)!=="svelte-c4ukt8"&&(i.textContent=o),f=ne(K,"OPTION",{"data-svelte-h":!0}),Oe(f)!=="svelte-1loqtfl"&&(f.textContent=p),K.forEach(O),C=ke(k),b=ne(k,"SELECT",{});var re=Z(b);_=ne(re,"OPTION",{"data-svelte-h":!0}),Oe(_)!=="svelte-itmjg8"&&(_.textContent=v),c=ne(re,"OPTION",{"data-svelte-h":!0}),Oe(c)!=="svelte-wt3xu4"&&(c.textContent=u),re.forEach(O),N=ke(k),l&&l.l(k),x=ke(k),S&&S.l(k),z=ke(k),I(q.$$.fragment,k),this.h()},h(){B(e,"class","header"),i.__value=Le.GRAYSCALE,ze(i,i.__value),i.selected=!0,f.__value=Le.WOOD,ze(f,f.__value),s[2]===void 0&&Je(()=>s[4].call(r)),_.__value=0,ze(_,_.__value),_.selected=!0,c.__value=1,ze(c,c.__value),s[1]===void 0&&Je(()=>s[6].call(b))},m(k,K){G(k,e,K),G(k,n,K),G(k,r,K),X(r,i),X(r,f),Re(r,s[2],!0),G(k,C,K),G(k,b,K),X(b,_),X(b,c),Re(b,s[1],!0),G(k,N,K),l&&l.m(k,K),G(k,x,K),S&&S.m(k,K),G(k,z,K),M(q,k,K),J=!0,h||(g=[ie(r,"change",s[4]),ie(r,"change",s[5]),ie(b,"change",s[6]),ie(b,"change",s[7])],h=!0)},p(k,[K]){K&4&&Re(r,k[2]),K&2&&Re(b,k[1]),k[0].checkmate?l?(l.p(k,K),K&1&&$(l,1)):(l=wt(k),l.c(),$(l,1),l.m(x.parentNode,x)):l&&(ue(),w(l,1,1,()=>{l=null}),ge()),k[0].stalemate?S?K&1&&$(S,1):(S=vt(),S.c(),$(S,1),S.m(z.parentNode,z)):S&&(ue(),w(S,1,1,()=>{S=null}),ge())},i(k){J||($(l),$(S),$(q.$$.fragment,k),J=!0)},o(k){w(l),w(S),w(q.$$.fragment,k),J=!1},d(k){k&&(O(e),O(n),O(r),O(C),O(b),O(N),O(x),O(z)),l&&l.d(k),S&&S.d(k),T(q,k),h=!1,Ve(g)}}}function $n(s,e,t){let n,r,i;Ue.subscribe(_=>t(0,i=_));function o(_){let v=Ye;switch(_){case 0:{v=Ye;break}case 1:{v=zt;break}}_e.update(c=>{let u=c;return u.layout=v,u})}function f(){n=Ze(this),t(2,n)}const p=_=>_e.update(v=>{let c=v;return c.theme=n,c});function C(){r=Ze(this),t(1,r)}const b=_=>{o(r)};return t(2,n=Le.GRAYSCALE),t(1,r=0),[i,r,n,o,f,p,C,b]}class bn extends be{constructor(e){super(),xe(this,e,$n,pn,me,{})}}export{bn as component};
